---
title: "server.cfg"
description: 服务器配置文件.
---

## 描述

- `server.cfg` 是一个服务器配置文件，它允许您更改 sa-mp 服务器的各种设置。
- 该文件对于每一个服务器都是必需的，并且必须位于服务器文件夹中，与 samp-server.exe 文件 (或 Linux 上的 samp03svr) 处于同一层级。

## 控制台

| 配置项        | 类型   | 默认值                     | 仅读 | 规则 | 作用                                                         |
| ------------- | ------ | -------------------------- | ---- | ---- | ------------------------------------------------------------ |
| echo          | 字符串 | Executing Server Config... | 是   | 否   | 当启动 samp.cfg 时，samp-server.exe 输出到控制台的内容。没有必要修改这项配置，因为只有您能够看到控制台。 |
| rcon_password | 字符串 | changeme                   | 否   | 否   | 用于管理服务器和使用远程控制台 (rcon) 的密码。 您必须确保将其更改为难以破解的内容，以便其他人无法控制您的服务器。您必须将默认的 changeme 修改为其他密码，服务器才能启动。 |
| rcon          | 布尔型 | 1                          | 否   | 否   | 管理是否应启用 [远程控制台](RemoteConsole) 功能。 设置为 1 启用或 0 禁用。 |

## 脚本

| 配置项              | 类型   | 默认值                | 仅读 | 规则 | 作用                                                         |
| ------------------- | ------ | --------------------- | ---- | ---- | ------------------------------------------------------------ |
| gamemode(n) (N) (t) | 字符串 | gamemode0 grandlarc 1 | 否   | 否   | gamemodes 文件夹中的 .amx 文件，服务器会以它作为游戏模式 (主图文件) 运行。 (n) 是游戏模式序号，(N) 是不带 .amx 扩展名的游戏模式名称，(t) 是在切换到下一个游戏模式之前应该玩游戏模式的次数。 |
| filterscripts (N)   | 字符串 |                       | 是   | 否   | filterscripts 文件夹中的 .amx 文件，服务器应使用它作为脚本运行。 (N) 是不带 .amx 扩展名的脚本名称。 脚本是在您的游戏模式 (主图文件) 后台运行的脚本。 脚本可以为服务器添加额外的功能，而无需编辑主图文件。 如果您想将特定功能或属性带入多个游戏模式，这将非常有用。 如果您有多个要加载的脚本，请将它们全部放在一行中，以“空格”分隔，例如 filterscripts script1 script2。 |
| plugins (N)         | 字符串 |                       | 是   | 否   | plugins 文件夹中的 .dll 或 .so 文件，服务器应该使用它作为插件运行。 在 Windows (N) 上是不带 .dll 扩展名的插件名称。 但是，在 Linux 上需要 .so 扩展名！ 插件是旨在增强游戏模式和脚本的额外功能。 如果您有多个要加载的插件，请将它们全部放在一行中，以“空格”分隔，例如 plugins plugins1 plugins2。 |

## 服务器详细信息 (SA-MP 启动器中的服务器列表)

| 配置项       | 类型     | 默认值       | 仅读 | 规则 | 作用                                                         |
| ------------ | -------- | ------------ | ---- | ---- | ------------------------------------------------------------ |
| announce     | 布尔型   | 1            | 否   | 否   | 管理是否在 SA-MP 服务器列表中显示您的服务器。 设置为 1 启用或 0 禁用。 |
| query        | 布尔型   | 1            | 否   | 否   | 管理是否应在服务器列表中显示服务器信息。 设置为 1 启用或 0 禁用。 玩家仍然可以加入禁用查询的服务器，但服务器列表不会显示任何信息。 |
| hostname     | 字符串   | SA-MP Server | 否   | 否   | 当玩家连接到服务器时，将在服务器列表中显示的名称。           |
| language     | 字符串   |              | 否   | 否   | 服务器列表中显示的语言。 玩家可以使用它在服务器列表中按语言过滤服务器。<br /> <br />**注意:** 此服务器变量是在 0.3.7 中添加的，在以前的版本中将无效。 |
| mapname      | 字符串   | San Andreas  | 否   | 是   | 出现在服务器详细信息中的地图名称。 这可以是任意文本，例如 My Stunt Map。 |
| gamemodetext | 字符串   | Unknown      | 否   | 否   | 将在服务器列表中显示的模式. 使用 [SetGameModeText](../scripting/functions/SetGameModeText) 具有相同的效果并且会覆盖 server.cfg 中的值。如果您有多个游戏模式需要不同的游戏模式文本，请使用上述函数。 |
| weather      | 字符串\* | 10           | 否   | 是   | 服务器使用的全局天气，将显示在服务器详细信息中。在 server.cfg 中使用该设置会使服务器在启动时崩溃。使用 [SetWeather](../scripting/functions/SetWeather) 来修改此项设置。 |
| worldtime    | 字符串\* | 12:00        | 否   | 是   | 服务器使用的全局时间，将显示在服务器详细信息中。 在 server.cfg 文件中使用此设置无效。使用 [SetWorldTime](../scripting/functions/SetWorldTime) 来修改此项设置。 |
| gravity      | 字符串\* | 0.008        | 否   | 否   | 服务器使用的全局重力。 在 server.cfg 文件中使用此设置将使服务器在启动时崩溃。使用 [SetGravity](../scripting/functions/SetGravity) 来修改此项设置。 |
| weburl       | 字符串   | www.open.mp  | 否   | 是   | 人们可以访问该网站以获取有关服务器的更多信息。               |
| version      | 字符串   |              | 是   | 是   | 服务器使用的 SA-MP 版本，将显示在服务器详细信息中。在 server.cfg 文件中使用此设置无效。 |
| maxplayers   | 整型     | 50           | 是   | 否   | 您的服务器可以容纳的最大玩家数量。通过更改此数字，您可以更改可以进入服务器的玩家数量。 最大值为 1000，最小值为 1。 |
| password     | 字符串   |              | 否   | 否   | 用于锁定服务器的密码。使用此功能时，只有知道此密码的玩家才能进入服务器。 |

> [*] 某些设置的类型与您想象的不同。

## 网络

| 配置项            | 类型   | 默认值                 | 仅读 | 规则 | 作用                                                         |
| ----------------- | ------ | ---------------------- | ---- | ---- | ------------------------------------------------------------ |
| sleep             | 整型   | 5                      | 否   | 否   | 以毫秒为单位的主要 sa-mp 和 raknet 网络线程将在每个同步周期内“休眠”。 较高的值会降低服务器的处理器占用，但同时会降低同步质量。 较低的值会增加服务器的处理器占用，但会提高同步质量。 除非您的玩家数量非常多并且您的服务器存在 fps 稳定性问题，否则不建议更改此值。 |
| lanmode           | 布尔型 | 0                      | 否   | 否   | 已弃用的变量，没有效果。                                     |
| bind              | 字符串 |                        | 是   | 否   | 服务器应该使用的IP地址。服务器将被强制用这个IP地址，而不是自动选择一个空闲的IP地址。这个IP地址必须与服务器上分配给网卡的IP地址匹配。这对于在同一机器上的同一个端口上运行多个服务器非常有用。 |
| port              | 整型   | 8192 (7777 也是常用的) | 是   | 否   | 服务器使用的端口号。你应该使用 [端口转发](http://www.portforward.com/) 从而使在你的局域网之外的玩家进入你的服务器。 |
| conncookies       | 整型\* | 1                      | 否   | 否   | 设置是否启用 0.3.7 连接 cookie 系统。 设置为 1 以启用或设置为 0 以禁用。<br /><br />**注意:** 此服务器变量是在 0.3.7 R2 中添加的，在以前的版本中将无效。 |
| cookielogging     | 整型\* | 0                      | 否   | 否   | 设置是否启用记录新连接玩家的请求连接 cookie。 设置为 1 启用或 0 禁用。<br /><br />**注意:** 此服务器变量是在 0.3.7 R2 中添加的，在以前的版本中将无效。 |
| connseedtime      | 整型   | 300000                 | 否   | 否   | 连接 cookie 种子值更新的时间 (以毫秒为单位)。<br /><br />**注意:** 此服务器变量是在 0.3.7 中添加的，在以前的版本中将无效。 |
| minconnectiontime | 整型   | 0                      | 否   | 否   | 服务器在接受另一个传入连接之前将等待的时间 (以毫秒为单位)。除非您的服务器受到连接洪水攻击，否则不建议您使用此变量。<br /><br />**注意:** 此服务器变量是在 0.3z 中添加的，在以前的版本中将无效。 |
| messageslimit     | 整型   | 500                    | 否   | 否   | 用户每秒可以发送的最大消息条数。                             |
| messageholelimit  | 整型   | 3000                   | 否   | 否   | [查看详细](http://web-old.archive.org/web/20190426212838/https://forum.sa-mp.com/showpost.php?p=2868955&postcount=14). |
| ackslimit         | 整型   | 3000                   | 否   | 否   | [查看详细](http://web-old.archive.org/web/20190419211451/https://forum.sa-mp.com/showpost.php?p=2989045&postcount=1). |
| playertimeout     | 整型   | 10000                  | 否   | 否   | 玩家在不向服务器发送任何数据时超时的时间 (以毫秒为单位)。    |
| mtu               | 整型   | 576                    | 是   | 否   | [查看详细](https://en.wikipedia.org/wiki/Maximum_transmission_unit).<br /><br />**注意:** 此服务器变量是在 0.3.8 中添加的，在以前的版本中将无效。 |

> [*] 某些设置的类型与您想象的不同。

## 日志

| 配置项         | 类型   | 默认值     | 仅读 | 规则 | 作用                                                         |
| -------------- | ------ | ---------- | ---- | ---- | ------------------------------------------------------------ |
| output         | 布尔型 | 0          | 否   | 是   | 设置日志消息 (例如脚本中的 print/printf 或插件中的 logprintf) 是否应在服务器控制台中重复显示。设置为 1 启用或 0 禁用。 此选项仅对 Linux 服务器有效。 |
| timestamp      | 布尔型 | 1          | 否   | 否   | 设置是否在控制台的每条信息中显示时间信息。设置为 1 启用或 0 禁用。 |
| logtimeformat  | 字符串 | [%H:%M:%S] | 是   | 否   | 使用的时间信息格式。这个格式基于 C/C++ 中的 [strftime](http://cplusplus.com/reference/clibrary/ctime/strftime/) 格式。 这是一些例子:<br /><br />**[%H:%M:%S]** 这仅显示时间，并且是以前那所有 SA-MP 服务器版本的默认格式。<br /><br />**[%d/%m/%Y %H:%M:%S]** 这将以 日/月/年 格式显示日期，并以 时:分:秒 格式显示时间。 |
| logqueries     | 布尔型 | 0          | 否   | 否   | 设置是否应记录玩家发送到服务器的所有查询。设置为 1 启用或 0 禁用。它在 DDoS 攻击期间非常有用。 |
| chatlogging    | 整型\* | 1          | 否   | 否   | 设置是否应在服务器控制台中显示玩家聊天。如果您有另一个脚本文件记录聊天日志，禁用此项将会对防止日志变得臃肿很有用。设置为 1 以启用或设置为 0 以禁用。<br /><br />**注意:** 此服务器变量是在 0.3e R2 中添加的，在以前的版本中将无效。 |
| db_logging     | 整型\* | 0          | 否   | 否   | 设置是否在服务器控制台中记录 sqlite db\_\* 函数错误。<br /><br />**注意:** 此服务器变量是在 0.3.7 R2 中添加的，在以前的版本中将无效。 |
| db_log_queries | 整型\* | 0          | 否   | 否   | 设置是否记录所有 sqlite db_query 调用，包括查询语句。<br /><br />**注意:** 此服务器变量是在 0.3.7 R2 中添加的，在以前的版本中将无效。 |

> [*] 某些设置的类型与您想象的不同。

## 客户端

| 配置项            | 类型     | 默认值 | 仅读 | 规则 | 作用                                                         |
| ----------------- | -------- | ------ | ---- | ---- | ------------------------------------------------------------ |
| onfoot_rate\*     | 整型     | 30     | 是   | 否   | 玩家在步行时服务器更新数据的时间 (以毫秒为单位)。            |
| incar_rate        | 整型     | 30     | 是   | 否   | 玩家在车辆中时服务器更新数据的时间 (以毫秒为单位)。          |
| weapon_rate       | 整型     | 30     | 是   | 否   | 玩家在使用武器开火时服务器更新数据的时间 (以毫秒为单位)。    |
| stream_distance\* | 单浮点型 | 200.0  | 否   | 否   | 玩家数据流被加载进服务器实体的 X,Y 平面距离。最大值为 **400.0**，最小值为 **50.0**。 较高的值使玩家在更远的距离看到服务器实体，但需要更多的客户端处理器占用和潜在的更多带宽。 |
| stream_rate\*     | 整型     | 1000   | 否   | 否   | 为每个玩家重新测试服务器实体的流式传输之前的时间 (以毫秒为单位)。 最大值为**5000**，最小值为**500**。较低的值会增加服务器处理器占用，因为它必须更频繁地为每个玩家重新检查数据流条件。 |

> [*] 较低的 onfoot_rate、incar_rate 和 Weapon_rate 值会提高同步性能，但会使用更多带宽。

## NPCs

| 配置项 | 类型 | 默认值 | 仅读 | 规则 | 作用                                                         |
| ------ | ---- | ------ | ---- | ---- | ------------------------------------------------------------ |
| maxnpc | 整型 | 0      | 否   | 否   | 您的服务器可以容纳的最大 NPC 数量。通过更改此数字，您可以更改 NPC 可以使用的玩家 ID 数量。 |

## 延迟补偿

| 配置项      | 类型   | 默认值 | 仅读 | 规则 | 作用                                                         |
| ----------- | ------ | ------ | ---- | ---- | :----------------------------------------------------------- |
| lagcompmode | 整型   | 1      | 是   | 否   | 0: 完全关闭延迟补偿<br /><br />1: 完全开启延迟补偿<br /><br />2: 仅启用位置延迟补偿。这意味着玩家的轮换不会被延迟补偿。<br /><br />**注意:** 此服务器变量是在 0.3z 中添加的，在以前的版本中将无效。 |
| lagcomp     | 字符串 | On     | 是   | 是   | 根据 **lagcompmode** 设置，可能会自动设置为 **On** 或 **Off**。 |

## 自定义模型

| 配置项     | 类型   | 默认值 | 仅读 | 规则 | 作用                                                         |
| ---------- | ------ | ------ | ---- | ---- | ------------------------------------------------------------ |
| useartwork | 布尔型 | 0      | 是   | 否   | 设置服务器是否使用模型文件夹中的自定义模型。设置为 1 启用或 0 禁用。<br /><br />**注意:** 此服务器变量是在 0.3.8 中添加的，在以前的版本中将无效。 |
| artwork    | 字符串 | No     | 是   | 是   | 根据 **useartwork** 设置，可能会自动设置为 **No** 或 **Yes**。<br /><br />**注意:** 此服务器变量是在 0.3.8 中添加的，在以前的版本中将无效。 |
| artpath    | 字符串 | models | 是   | 否   | 自定义模型所在的路径。<br /><br />**注意:** 此服务器变量是在 0.3.8 中添加的，在以前的版本中将无效。 |

## 其他

| 配置项 | 类型   | 默认值 | 仅读 | 规则 | 作用                                                         |
| ------ | ------ | ------ | ---- | ---- | ------------------------------------------------------------ |
| myriad | 布尔型 | 0      | 否   | 否   | 未使用过的变量。 它可能与多年前称为"Myriad Islands"的旧 GTA 圣安地列斯模组兼容，可能早于 2008 年。 |
| nosign | 字符串 |        | 是   | 否   | 未使用过的变量。                                             |

## 注意

- 标记为“只读”的值（如 `/rcon varlist` 所示）在运行时无法更改。 通过将所有其他值传递给 SendRconCommand，可以（临时）更改它们。
- 标记为“规则”的值（如`/rcon varlist` 所示）显示在服务器详细信息的“规则”部分。
- 脚本不需要在游戏模式或过滤脚本文件夹中。server.cfg 中的信息是一个路径，因此可以使用“..”。
