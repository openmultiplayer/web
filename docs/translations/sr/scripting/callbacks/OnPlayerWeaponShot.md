---
title: OnPlayerWeaponShot
description: Овај повратни позив се позива када играч испали метак из оружја.
tags: ["player"]
---

## Опис

Овај повратни позив се позива када играч испали метак из оружја. Подржана су само оружја са муницијом. Подржано је само пуцање из возила из перспективе путника (не из перспективе возача и не из sea sparrow / hunter метака).

| Име                     | Опис                                                                           |
|-------------------------|--------------------------------------------------------------------------------|
| playerid                | ID играча који је испалио метак.                                               |
| WEAPON:weaponid         | ID [оружја](../resources/weaponids) из ког је играч испалио.                   |
| BULLET_HIT_TYPE:hittype | [Тип](../resources/bullethittypes) објекта који је метак погодио.              |
| hitid                   | ID играча, возила или објекта који је погодио метак.                           |
| Float:fX                | X координата на којој је метак погодио.                                        |
| Float:fY                | Y координата на којој је метак погодио.                                        |
| Float:fZ                | Z координата на којој је метак погодио.                                        |

## Враћа

**0** - Спречава да метак нанесе штету.

**1** - Дозволи да метак нанесе штету.

Увек се позива први у филтерскриптама, тако да враћање 0 такође блокира друге скрипте да га виде.

## Пример

```c
public OnPlayerWeaponShot(playerid, WEAPON:weaponid, BULLET_HIT_TYPE:hittype, hitid, Float:fX, Float:fY, Float:fZ)
{
    new string[144];
    format(string, sizeof(string), "Weapon %i fired. hittype: %i   hitid: %i   pos: %f, %f, %f", weaponid, hittype, hitid, fX, fY, fZ);
    SendClientMessage(playerid, -1, string);
    return 1;
}
```

## Белешке

:::tip

Овај повратни позив се позива само када је компензција за кашњење омогућена. Ако је hittype:

- `BULLET_HIT_TYPE_NONE`: параметри fX, fY и fZ су нормалне координате, вратиће 0.0 за координате ако ништа није погођено (нпр. удаљени објекат који метак не може да достигне);
- Остало: fX, fY и fZ су оффсети релативно на hitid.

:::

:::tip

[GetPlayerLastShotVectors](../functions/GetPlayerLastShotVectors) се може користити у овом повратном позиву за детаљније информације о вектору метка.

:::

:::warning

Познати bug-ови:

- Не позива се ако сте пуцали из возила као возач или ако гледате иза са омогућеним циљем (пукање у ваздух).
- Позива се као `BULLET_HIT_TYPE_VEHICLE` са исправним `hitid` (возило играча који је погођен) ако пуцате на играча који је у возилу. Неће бити позван као `BULLET_HIT_TYPE_PLAYER` уопште.
- Делимично исправљено у SA-MP 0.3.7: Ако злонамерни корисник пошаље лажне податке о оружју, други клијенти играча могу се замрзнути или срушити. Да бисте се борили против овога, проверите да ли пријављени weaponid може стварно испалити метке.

:::

## Повезане повратне функције

Следеће повратне функције могу бити корисне, јер су на један или други начин повезане са овим позивом.

- [OnPlayerGiveDamage](OnPlayerGiveDamage): Позива се када играч нанесе штету.

## Повезане функције

Следеће функције могу бити корисне, јер су на један или други начин повезане са овим позивом.

- [GetPlayerLastShotVectors](../functions/GetPlayerLastShotVectors): Враћа вектор последњег метка који је играч испалио.

## Повезани ресурси

- [Типови погађања метка](../resources/bullethittypes)
