"use strict";(self.webpackChunkomp_web=self.webpackChunkomp_web||[]).push([["77049"],{42265:function(e,s,r){r.d(s,{Z:()=>t});var a=r(85893);r(67294);let t=()=>(0,a.jsxs)("section",{className:"loading-banner",children:[(0,a.jsx)("div",{className:"loading-banner-spinner"}),(0,a.jsx)("h2",{className:"loading-banner-heading",children:"Following the damn train..."})]})},47680:function(e,s,r){r.d(s,{Z:()=>i});var a=r(85893),t=r(67294);let n=({text:e})=>{let[s,r]=(0,t.useState)(!1);return(0,a.jsxs)("div",{className:"copy-badge-container",children:[(0,a.jsx)("span",{className:"copy-badge-text",children:e}),(0,a.jsx)("button",{className:`copy-badge-button ${s?"copied":""}`,onClick:()=>{navigator.clipboard.writeText(e),r(!0),setTimeout(()=>r(!1),2e3)},children:s?"COPIED":"COPY"})]})},i=({server:e})=>(0,a.jsxs)("div",{className:"server-row-card",children:[(0,a.jsxs)("div",{className:"server-header",children:[(0,a.jsx)("a",{href:"/servers/"+e.ip,className:"server-link",children:(0,a.jsx)("h2",{className:"server-heading",children:e.hn})}),(0,a.jsxs)("div",{className:"server-badges",children:[e.pr&&(0,a.jsx)("img",{src:"/images/assets/partners.png",alt:"partner server",title:"Has partnership!",className:"server-badge-image"}),e.omp&&(0,a.jsx)("img",{src:"/images/assets/logo-light-trans.svg",alt:"open.mp server",title:"open.mp server",className:"server-badge-image"})]})]}),(0,a.jsxs)("div",{className:"server-info",children:[(0,a.jsxs)("div",{className:"server-details",children:[(0,a.jsx)("span",{className:"server-game-mode",children:e.gm}),(0,a.jsxs)("div",{className:"server-players",children:[(0,a.jsxs)("div",{className:"server-player-count",children:[(0,a.jsx)("span",{children:e.pc}),"/",(0,a.jsx)("span",{children:e.pm})]}),"players"]})]}),(0,a.jsx)(n,{text:e.ip})]})]})},49670:function(e,s,r){r.d(s,{C:()=>l,I:()=>i});var a=r(85893),t=r(67294);let n=new class{listeners=[];addListener(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(s=>s!==e)}}emit(e){this.listeners.forEach(s=>s(e))}},i=()=>{let[e,s]=(0,t.useState)([]);return(0,t.useEffect)(()=>{let e=n.addListener(e=>{s(s=>[e,...s]),setTimeout(()=>{s(s=>s.filter(s=>s.id!==e.id))},1e5)});return()=>e()},[]),(0,a.jsx)("div",{className:"toast-container",children:e.map(e=>(0,a.jsxs)("div",{className:`toast ${"success"===e.type?"toast-success":"toast-error"}`,children:[(0,a.jsxs)("div",{className:"toast-header",children:[(0,a.jsx)("h4",{className:"toast-title",children:e.title}),(0,a.jsx)("button",{onClick:()=>s(s=>s.filter(s=>s.id!==e.id)),className:"toast-close","aria-label":"Close toast",children:"\xd7"})]}),(0,a.jsx)("p",{className:"toast-message",children:e.message})]},e.id))})},l=({message:e,title:s,type:r="success"})=>{let a={id:Math.random().toString(36).substr(2,9),message:e,title:s,type:r};n.emit(a)}},29391:function(e,s,r){r.d(s,{A:()=>a});let a="https://api.open.mp"},62960:function(e,s,r){r.r(s),r.d(s,{default:()=>C});var a=r(85893),t=r(17555),n=r(74865),i=r.n(n),l=r(67294),c=r(18898),o=r(42265),d=r(47680),h=r(49670),m=r(29391);let v=async e=>{try{let s=await fetch(`${m.A}/servers/${e}`);return await s.json()}catch(e){return}},p=({to:e})=>(0,a.jsx)("a",{href:e,className:"button server-info-back-link",children:"\u2190 Back to Servers"}),x=({address:e})=>(0,a.jsx)("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"server-info-link",children:(0,a.jsxs)("button",{className:"server-info-quick-join-button",children:["Quick Join",(0,a.jsx)("span",{className:"server-info-arrow",children:"\u2192"})]})}),u=({data:e})=>(0,a.jsx)("article",{className:"server-info-wrapper",children:(0,a.jsx)("div",{className:"server-info-container",children:(0,a.jsxs)("div",{className:"server-info-box",children:[(0,a.jsxs)("div",{className:"server-info-header",children:[(0,a.jsx)("span",{className:"server-info-game-mode",children:e.core.gm}),(0,a.jsx)("a",{href:`samp://${e.dm??e.ip}`,target:"_blank",rel:"noopener noreferrer",className:"server-info-ip-address",children:e.dm??e.ip})]}),(0,a.jsx)("h1",{className:"server-info-name",children:e.core.hn}),(0,a.jsx)("p",{className:"server-info-description",children:e.description||"This server has no description"}),(0,a.jsxs)("div",{className:"row server-info-content-wrapper",children:[(0,a.jsxs)("div",{className:"server-info-stats-section",children:[(0,a.jsxs)("div",{className:"server-info-stat-item",children:[(0,a.jsx)("span",{className:"server-info-stat-label",children:"Players Online"}),(0,a.jsxs)("span",{className:"server-info-stat-value",children:[e.core.pc,"/",e.core.pm]})]}),(0,a.jsxs)("div",{className:"server-info-stat-item",children:[(0,a.jsx)("span",{className:"server-info-stat-label",children:"Mod Version"}),(0,a.jsx)("span",{className:"server-info-stat-value",children:e.core.vn})]}),(0,a.jsxs)("div",{className:"server-info-stat-item",children:[(0,a.jsx)("span",{className:"server-info-stat-label",children:"Language"}),(0,a.jsx)("span",{className:"server-info-stat-value",children:e.core.la})]}),(0,a.jsx)(x,{address:`samp://${e.dm??e.ip}`})]}),e.ru&&(0,a.jsx)("div",{className:"server-info-rules-section",children:(0,a.jsxs)("table",{className:"server-info-rules-table",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"Rule"}),(0,a.jsx)("th",{children:"Value"})]})}),(0,a.jsx)("tbody",{children:Object.entries(e.ru).map(([e,s])=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e}),(0,a.jsx)("td",{children:"weburl"===e?(0,a.jsx)("a",{href:`https://${s}`,target:"_blank",rel:"noreferrer",children:s}):s})]},e))})]})})]}),(0,a.jsx)("div",{className:"server-info-divider"}),(0,a.jsx)("div",{className:"server-info-footer",children:(0,a.jsxs)("time",{className:"server-info-last-updated",children:["Last updated"," ",N(new Date(e.lastUpdated),new Date)," ago"]})})]})})}),j=({ip:e})=>{let[s,r]=(0,l.useState)(!0),[t,n]=(0,l.useState)(void 0);return((0,l.useEffect)(()=>{v(e).then(e=>{r(!1),n(e)})},[]),!t||s)?(0,a.jsx)(o.Z,{}):(0,a.jsx)(u,{data:t})},f=({ip:e})=>e?(0,a.jsx)(t.Z,{title:e,description:"Server Information for "+e,children:(0,a.jsx)("section",{className:"server-info-section",children:(0,a.jsxs)("div",{className:"server-info-stack",children:[(0,a.jsx)(p,{to:"/servers"}),(0,a.jsx)(j,{ip:e})]})})}):(0,a.jsx)(o.Z,{}),N=(e,s=new Date)=>{let r=e instanceof Date?e:new Date(e),a=Math.floor(Math.floor(Math.abs((s instanceof Date?s:new Date(s)).getTime()-r.getTime())/1e3)/60),t=Math.floor(a/60),n=Math.floor(t/24),i=Math.floor(n/30),l=Math.floor(n/365),c=(e,s)=>1===e?`1 ${s}`:`${e} ${s}s`;if(l>0)return c(l,"year");if(i>0)return c(i,"month");if(n>0)return c(n,"day");if(t>0)return c(t,"hour");if(a>0)return c(a,"minute");else return"less than a minute"},b=`${m.A}/servers/`,g=async()=>{try{let e=await fetch(b);return await e.json()}catch(e){return[]}},y=({stats:{players:e,servers:s}})=>(0,a.jsx)("div",{className:"servers-center",children:(0,a.jsxs)("p",{className:"servers-stats",children:[(0,a.jsx)("strong",{children:e})," players on ",(0,a.jsx)("strong",{children:s})," servers with an average of ",(0,a.jsx)("strong",{children:(e/s).toFixed(1)})," ","players per server."]})}),w=({onAdd:e})=>{let[s,r]=(0,l.useState)(""),t=async r=>{try{r.preventDefault(),i().start();let a=await fetch(b,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:s})});if(i().inc(),200===a.status){let s=await a.json();e(s),(0,h.C)({message:`${s.core.hn} is added to our pending list. If it's not available after maximum 48 hours, you can contact us on Discord!`,title:"Server Submitted!",type:"success"})}else{let e=await a.json();(0,h.C)({message:`Status ${a.statusText}: ${e?.error}`,title:"Submission failed!",type:"error"})}}catch(e){(0,h.C)({message:"An error occurred while submitting the server",title:"Error",type:"error"})}finally{i().done()}};return(0,a.jsx)("form",{action:b,target:"_self",method:"post",onSubmit:t,className:"servers-form",children:(0,a.jsxs)("div",{className:"servers-input-group",children:[(0,a.jsx)("input",{type:"text",name:"address",placeholder:"IP/Domain",value:s,onChange:e=>r(e.target.value),className:"servers-input"}),(0,a.jsx)("button",{type:"submit",className:"button button--primary button--md2",children:"Add"})]})})},k=({isOpen:e,onClose:s,children:r})=>e?(0,a.jsxs)("div",{className:"servers-modal-overlay",children:[(0,a.jsx)("div",{className:"servers-modal-backdrop",onClick:s}),(0,a.jsx)("div",{className:"servers-modal-content",children:r})]}):null,S=({data:e})=>{let[s,r]=(0,l.useState)(""),[t,n]=(0,l.useState)(!0),[i,o]=(0,l.useState)(!1),[h,m]=(0,l.useState)(!1),[v,p]=(0,l.useState)("relevance"),[x,u]=(0,l.useState)(!1),j=(0,l.useMemo)(()=>((e,s)=>{let r=[...e];if(s.search){let e=s.search.toLowerCase();r=r.filter(s=>s.ip.toLowerCase().includes(e)||s.hn.toLowerCase().includes(e)||s.gm.toLowerCase().includes(e))}return s.showEmpty||(r=r.filter(e=>e.pc>0)),s.showPartnersOnly&&(r=r.filter(e=>!0===e.pr)),s.showOmpOnly&&(r=r.filter(e=>!0===e.omp)),"pc"===s.sort&&r.sort((e,s)=>s.pc-e.pc),r})(e,{search:s,showEmpty:t,showPartnersOnly:i,showOmpOnly:h,sort:v}),[e,s,t,i,h,v]),f=Math.floor(7.462686567164179);return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("form",{className:"servers-list-form",children:[(0,a.jsxs)("div",{className:"servers-controls",children:[(0,a.jsxs)("select",{value:v,onChange:e=>p(e.target.value),className:"servers-select",children:[(0,a.jsx)("option",{value:"relevance",children:"Relevance"}),(0,a.jsx)("option",{value:"pc",children:"Players"})]}),(0,a.jsx)("input",{type:"text",placeholder:"Search by IP or Name",name:"search",id:"search",value:s,onChange:e=>r(e.target.value),className:"servers-search"}),(0,a.jsx)("button",{type:"button",onClick:()=>u(!0),className:"button button--primary button--md2",children:"Add server"})]}),(0,a.jsxs)("div",{className:"servers-checkboxes",children:[(0,a.jsxs)("label",{className:"servers-checkbox-label",children:[(0,a.jsx)("input",{type:"checkbox",checked:t,onChange:e=>n(e.target.checked),className:"servers-checkbox"}),"Show empty servers"]}),(0,a.jsxs)("label",{className:"servers-checkbox-label",children:[(0,a.jsx)("input",{type:"checkbox",checked:h,onChange:e=>m(e.target.checked),className:"servers-checkbox"}),"Show only open.mp servers"]}),(0,a.jsxs)("label",{className:"servers-checkbox-label",children:[(0,a.jsx)("input",{type:"checkbox",checked:i,onChange:e=>o(e.target.checked),className:"servers-checkbox"}),"Show only partners"]})]})]}),(0,a.jsx)(y,{stats:{players:e.map(e=>e.pc).reduce((e,s)=>e+s,0),servers:e.length}}),(0,a.jsx)(c.t7,{height:(j.length+1)*134,width:"100%",itemSize:134,itemCount:j.length,overscanCount:f,children:({index:e,style:s})=>{let r=j[e];return(0,a.jsx)("div",{style:s,children:(0,a.jsx)(d.Z,{server:r},r.ip)})}}),(0,a.jsxs)(k,{isOpen:x,onClose:()=>u(!1),children:[(0,a.jsxs)("div",{className:"servers-modal-header",children:[(0,a.jsx)("h2",{className:"servers-modal-title",children:"Add a server"}),(0,a.jsx)("button",{onClick:()=>u(!1),className:"servers-modal-close",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"servers-modal-body",children:[(0,a.jsx)("label",{className:"servers-label",children:"IP or Domain"}),(0,a.jsx)(w,{onAdd:e=>{u(!1)}}),(0,a.jsxs)("p",{className:"servers-helper-text",children:["IP must be in format ",(0,a.jsx)("strong",{children:"ip:port"})]})]}),(0,a.jsx)("div",{className:"servers-modal-footer",children:(0,a.jsx)("button",{onClick:()=>u(!1),className:"button button--primary button--md2",children:"Close"})})]})]})},C=()=>{if("undefined"!=typeof window&&window.location&&window.location.pathname&&window.location.pathname.includes(":")){let e=window.location.pathname.split("/servers/")[1];return(0,a.jsx)(f,{ip:e})}let[e,s]=(0,l.useState)(!0),[r,n]=(0,l.useState)([]);return(0,l.useEffect)(()=>{g().then(e=>{s(!1),n(e)})},[]),(0,a.jsxs)("div",{children:[(0,a.jsx)(t.Z,{title:"Servers",description:"List of San Andreas servers using open.mp or SA-MP",children:(0,a.jsx)("section",{className:"servers-container",children:e?(0,a.jsx)(o.Z,{}):(0,a.jsx)(S,{data:r})})}),(0,a.jsx)(h.I,{})]})}}}]);