"use strict";(self.webpackChunkomp_web=self.webpackChunkomp_web||[]).push([["29049"],{24235:function(e,n,a){a.r(n),a.d(n,{frontMatter:()=>c,toc:()=>l,default:()=>u,metadata:()=>r,assets:()=>d,contentTitle:()=>o});var r=JSON.parse('{"id":"scripting/language/Initialisers","title":"Palavras-chave: inicializadores","description":"const","source":"@site/i18n/pt-BR/docusaurus-plugin-content-docs/current/scripting/language/Initialisers.md","sourceDirName":"scripting/language","slug":"/scripting/language/Initialisers","permalink":"/pt-BR/docs/scripting/language/Initialisers","draft":false,"unlisted":false,"editUrl":"https://github.com/openmultiplayer/web/edit/master/frontend/i18n/pt-BR/docusaurus-plugin-content-docs/current/scripting/language/Initialisers.md","tags":[],"version":"current","frontMatter":{"title":"Palavras-chave: inicializadores","sidebar_label":"Palavras-chave: inicializadores"},"sidebar":"docsSidebar","previous":{"title":"Palavras-chave: diretivas","permalink":"/pt-BR/docs/scripting/language/Directives"},"next":{"title":"Palavras-chave: operadores","permalink":"/pt-BR/docs/scripting/language/Operators"}}'),s=a(85893),i=a(50065);let c={title:"Palavras-chave: inicializadores",sidebar_label:"Palavras-chave: inicializadores"},o=void 0,d={},l=[{value:"<code>const</code>",id:"const",level:2},{value:"<code>enum</code>",id:"enum",level:2},{value:"<code>forward</code>",id:"forward",level:2},{value:"<code>native</code>",id:"native",level:2},{value:"<code>new</code>",id:"new",level:2},{value:"<code>operator</code>",id:"operator",level:2},{value:"<code>public</code>",id:"public",level:2},{value:"<code>static</code>",id:"static",level:2},{value:"<code>stock</code>",id:"stock",level:2}];function t(e){let n={code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"const",children:(0,s.jsx)(n.code,{children:"const"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"new const\n    MY_CONSTANT[] = {1, 2, 3};\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"const"})," n\xe3o \xe9 muito usado, mas serve para declarar vari\xe1veis que n\xe3o podem ser alteradas em tempo de execu\xe7\xe3o. Em fun\xe7\xf5es, par\xe2metros de array marcados como ",(0,s.jsx)(n.code,{children:"const"})," podem ser otimizados, e voc\xea pode criar algo parecido com um ",(0,s.jsx)(n.code,{children:"#define"}),", s\xf3 que baseado em arrays. Como ",(0,s.jsx)(n.code,{children:"const"})," \xe9 um modificador, ele deve acompanhar ",(0,s.jsx)(n.code,{children:"new"})," ou outro declarador de vari\xe1vel. Se tentar modificar uma vari\xe1vel constante, o compilador reclamar\xe1."]}),"\n",(0,s.jsx)(n.h2,{id:"enum",children:(0,s.jsx)(n.code,{children:"enum"})}),"\n",(0,s.jsxs)(n.p,{children:["Enums s\xe3o \xfateis para agrupar dados relacionados, substituir longas listas de ",(0,s.jsx)(n.code,{children:"#define"}),"s e criar novas tags. Tamb\xe9m facilitam o controle de \xedndices de arrays."]}),"\n",(0,s.jsx)(n.p,{children:"Defini\xe7\xe3o mais comum:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"enum E_MY_ARRAY\n{\n    E_MY_ARRAY_MONEY,\n    E_MY_ARRAY_GUN\n}\n\nnew\n    gPlayerData[MAX_PLAYERS][E_MY_ARRAY];\n\npublic OnPlayerConnect(playerid)\n{\n    gPlayerData[playerid][E_MY_ARRAY_MONEY] = 0;\n    gPlayerData[playerid][E_MY_ARRAY_GUN] = 5;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Isso cria dois slots por jogador. Sem enum, ficaria:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"new\n    gPlayerData[MAX_PLAYERS][2];\n\npublic OnPlayerConnect(playerid)\n{\n    gPlayerData[playerid][0] = 0;\n    gPlayerData[playerid][1] = 5;\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Funciona, mas \xe9 menos leg\xedvel. Se quiser inserir um slot entre 0 e 1, teria de renumerar tudo. Com enum basta adicionar o novo campo:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"enum E_MY_ARRAY\n{\n    E_MY_ARRAY_MONEY,\n    E_MY_ARRAY_AMMO,\n    E_MY_ARRAY_GUN\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Ao recompilar, o compilador ajusta todos os \xedndices."}),"\n",(0,s.jsx)(n.p,{children:"A forma completa de um enum \xe9:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"enum NAME (modificador)\n{\n    NAME_ENTRY_1 = valor,\n    ...\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Se voc\xea n\xe3o definir um modificador, o padr\xe3o \xe9 ",(0,s.jsx)(n.code,{children:"+= 1"}),". Ou seja, cada item vale o item anterior + 1. Exemplo:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"enum E_EXAMPLE\n{\n    E_EXAMPLE_0,\n    E_EXAMPLE_1,\n    E_EXAMPLE_2\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Aqui temos 0, 1, 2 e o valor do enum (",(0,s.jsx)(n.code,{children:"E_EXAMPLE"}),") \xe9 3. Mudando o modificador para ",(0,s.jsx)(n.code,{children:"+= 5"})," os valores passam a ser 0, 5, 10 e 15. Declarar um array com ",(0,s.jsx)(n.code,{children:"gEnumArray[E_EXAMPLE]"})," reserv\xe1 15 c\xe9lulas, mas os \xedndices simb\xf3licos atingem apenas 0, 5 e 10."]}),"\n",(0,s.jsxs)(n.p,{children:["Tamb\xe9m \xe9 poss\xedvel usar outro modificador, como ",(0,s.jsx)(n.code,{children:"*= 2"}),". Nesse caso, se n\xe3o definir o primeiro valor manualmente, todos continuam 0. Para corrigir, basta atribuir um valor inicial:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"enum E_EXAMPLE (*= 2)\n{\n    E_EXAMPLE_0 = 1,\n    E_EXAMPLE_1,\n    E_EXAMPLE_2\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Resultado: 1, 2, 4 e 8. Voc\xea pode definir quantos valores quiser:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"enum E_EXAMPLE (*= 2)\n{\n    E_EXAMPLE_0,\n    E_EXAMPLE_1 = 1,\n    E_EXAMPLE_2\n} // 0, 1, 2, 4\n"})}),"\n",(0,s.jsx)(n.p,{children:"Arrays tamb\xe9m s\xe3o suportados:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"enum E_EXAMPLE\n{\n    E_EXAMPLE_0[10],\n    E_EXAMPLE_1,\n    E_EXAMPLE_2\n} // produz 0, 10, 11 e 12\n"})}),"\n",(0,s.jsx)(n.p,{children:"Itens podem ter tags. No exemplo inicial:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"enum E_MY_ARRAY\n{\n    E_MY_ARRAY_MONEY,\n    E_MY_ARRAY_AMMO,\n    Float:E_MY_ARRAY_HEALTH,\n    E_MY_ARRAY_GUN\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Assim evitamos ",(0,s.jsx)(n.code,{children:"tag mismatch"})," ao armazenar floats."]}),"\n",(0,s.jsx)(n.p,{children:"Enums tamb\xe9m podem servir como tags:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"enum E_MY_TAG (<<= 1)\n{\n    E_MY_TAG_NONE,\n    E_MY_TAG_VAL_1 = 1,\n    E_MY_TAG_VAL_2,\n    E_MY_TAG_VAL_3,\n    E_MY_TAG_VAL_4\n}\n\nnew\n    E_MY_TAG:gMyTagVar = E_MY_TAG_VAL_2 | E_MY_TAG_VAL_3;\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"gMyTagVar"})," ter\xe1 valor 6 e tag personalizada. Atribuir um n\xfamero puro gera aviso:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"gMyTagVar = 7;          // warning\ngMyTagVar = E_MY_TAG:7; // v\xe1lido\n"})}),"\n",(0,s.jsx)(n.p,{children:"Muito \xfatil para flags ou dados combinados:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"enum E_MY_TAG (<<= 1)\n{\n    E_MY_TAG_NONE,\n    E_MY_TAG_MASK = 0xFF,\n    E_MY_TAG_VAL_1 = 0x100,\n    E_MY_TAG_VAL_2,\n    E_MY_TAG_VAL_3,\n    E_MY_TAG_VAL_4\n}\n\nnew\n    E_MY_TAG:gMyTagVar = E_MY_TAG_VAL_2 | E_MY_TAG_VAL_3 | (E_MY_TAG:7 & E_MY_TAG_MASK);\n"})}),"\n",(0,s.jsx)(n.p,{children:"Valor final: 0x0607 (1543)."}),"\n",(0,s.jsxs)(n.p,{children:["Enums tamb\xe9m podem substituir blocos de ",(0,s.jsx)(n.code,{children:"#define"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"enum\n{\n    TEAM_NONE,\n    TEAM_COP,\n    TEAM_ROBBER,\n    TEAM_CIV,\n    TEAM_CLERK,\n    TEAM_DRIVER\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Os valores continuam 0\u20135 e o uso \xe9 id\xeantico. Voc\xea pode ainda transform\xe1-los em bitmasks para permitir m\xfaltiplos times:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"enum (<<= 1)\n{\n    TEAM_NONE,\n    TEAM_COP = 1,\n    TEAM_ROBBER,\n    TEAM_CIV,\n    TEAM_CLERK,\n    TEAM_DRIVER,\n    TEAM_ADMIN\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Opera\xe7\xf5es b\xe1sicas:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Adicionar: ",(0,s.jsx)(n.code,{children:"gPlayerTeam[playerid] |= TEAM_COP"})]}),"\n",(0,s.jsxs)(n.li,{children:["Remover: ",(0,s.jsx)(n.code,{children:"gPlayerTeam[playerid] &= ~TEAM_COP"})]}),"\n",(0,s.jsxs)(n.li,{children:["Verificar: ",(0,s.jsx)(n.code,{children:"if (gPlayerTeam[playerid] & TEAM_COP)"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"forward",children:(0,s.jsx)(n.code,{children:"forward"})}),"\n",(0,s.jsxs)(n.p,{children:["Informa ao compilador que uma fun\xe7\xe3o ser\xe1 declarada depois. Obrigat\xf3rio para todas as ",(0,s.jsx)(n.code,{children:"public"}),", mas \xfatil em outros casos, como fun\xe7\xf5es que retornam tags."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"forward MyPublicFunction(playerid, const string[]);\n\npublic MyPublicFunction(playerid, const string[])\n{\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Sem o ",(0,s.jsx)(n.code,{children:"forward"}),", o compilador precisa \u201Creprocessar\u201D quando encontra uma fun\xe7\xe3o que retorna, por exemplo, ",(0,s.jsx)(n.code,{children:"Float:"})," antes da defini\xe7\xe3o. Outra alternativa \xe9 declarar a fun\xe7\xe3o antes do uso, mas o ",(0,s.jsx)(n.code,{children:"forward"})," evita reorganizar o arquivo."]}),"\n",(0,s.jsx)(n.h2,{id:"native",children:(0,s.jsx)(n.code,{children:"native"})}),"\n",(0,s.jsx)(n.p,{children:"Nativas s\xe3o fun\xe7\xf5es implementadas fora do script (no servidor ou em plugins). Voc\xea s\xf3 pode declar\xe1-las se j\xe1 existir uma implementa\xe7\xe3o; por\xe9m, pode criar \u201Cfalsas\u201D nativas para listar fun\xe7\xf5es no painel do Pawno."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"native printf(const format[], {Float,_}:...);\n"})}),"\n",(0,s.jsx)(n.p,{children:"Para exibir uma fun\xe7\xe3o personalizada na lista sem declar\xe1-la de fato:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"/*\nnative MyFunction(playerid);\n*/\n"})}),"\n",(0,s.jsx)(n.p,{children:"O Pawno n\xe3o interpreta coment\xe1rios e adiciona o s\xedmbolo na lista, enquanto o compilador ignora a linha."}),"\n",(0,s.jsx)(n.p,{children:"Tamb\xe9m \xe9 poss\xedvel renomear ou encapsular nativas:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:'native my_print(const string[]) = print;\n\nprint(const string[])\n{\n    my_print("Someone called print()");\n    my_print(string);\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Agora toda chamada a ",(0,s.jsx)(n.code,{children:"print"})," passa pelo wrapper."]}),"\n",(0,s.jsx)(n.h2,{id:"new",children:(0,s.jsx)(n.code,{children:"new"})}),"\n",(0,s.jsx)(n.p,{children:"Declara vari\xe1veis; por padr\xe3o come\xe7am em 0."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"new\n    myVar = 5;\n"})}),"\n",(0,s.jsxs)(n.p,{children:["O escopo depende das chaves onde \xe9 declarado. Vari\xe1veis globais (",(0,s.jsx)(n.code,{children:"new"})," fora de fun\xe7\xf5es) podem ser usadas em qualquer ponto ap\xf3s a declara\xe7\xe3o. Se o arquivo incluir outros, eles tamb\xe9m ter\xe3o acesso, a menos que voc\xea use ",(0,s.jsx)(n.code,{children:"static"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"operator",children:(0,s.jsx)(n.code,{children:"operator"})}),"\n",(0,s.jsx)(n.p,{children:"Permite sobrecarregar operadores para tags personalizadas. Exemplo para armazenar n\xfameros em big endian:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:"stock BigEndian:operator=(value)\n{\n    return BigEndian:(((value >>> 24) & 0x000000FF) |\n                      ((value >>> 8)  & 0x0000FF00) |\n                      ((value << 8)   & 0x00FF0000) |\n                      ((value << 24)  & 0xFF000000));\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["Operadores suportados: ",(0,s.jsx)(n.code,{children:"+"}),", ",(0,s.jsx)(n.code,{children:"-"}),", ",(0,s.jsx)(n.code,{children:"*"}),", ",(0,s.jsx)(n.code,{children:"/"}),", ",(0,s.jsx)(n.code,{children:"%"}),", ",(0,s.jsx)(n.code,{children:"++"}),", ",(0,s.jsx)(n.code,{children:"--"}),", ",(0,s.jsx)(n.code,{children:"=="}),", ",(0,s.jsx)(n.code,{children:"!="}),", ",(0,s.jsx)(n.code,{children:"<"}),", ",(0,s.jsx)(n.code,{children:">"}),", ",(0,s.jsx)(n.code,{children:"<="}),", ",(0,s.jsx)(n.code,{children:">="}),", ",(0,s.jsx)(n.code,{children:"!"})," e ",(0,s.jsx)(n.code,{children:"="}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Eles podem executar qualquer l\xf3gica, inclusive ignorar o comportamento padr\xe3o."}),"\n",(0,s.jsx)(n.h2,{id:"public",children:(0,s.jsx)(n.code,{children:"public"})}),"\n",(0,s.jsxs)(n.p,{children:["Transforma fun\xe7\xf5es (ou vari\xe1veis) em s\xedmbolos acess\xedveis pelo servidor. Todas as callbacks do SA",":MP"," s\xe3o ",(0,s.jsx)(n.code,{children:"public"}),". O nome textual da fun\xe7\xe3o \xe9 armazenado no AMX, o que permite cham\xe1-la por ",(0,s.jsx)(n.code,{children:"CallLocalFunction"}),", ",(0,s.jsx)(n.code,{children:"SetTimerEx"}),", etc. Para isso \xe9 obrigat\xf3rio declarar um ",(0,s.jsx)(n.code,{children:"forward"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:'forward MyPublicFunc();\n\nmain()\n{\n    CallLocalFunction("MyPublicFunc", "");\n}\n\npublic MyPublicFunc()\n{\n    printf("Hello");\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Fun\xe7\xf5es p\xfablicas tamb\xe9m podem ser chamadas normalmente dentro do script (",(0,s.jsx)(n.code,{children:"MyPublicFunc();"}),"), o que \xe9 bem mais r\xe1pido do que invoques por string."]}),"\n",(0,s.jsx)(n.h2,{id:"static",children:(0,s.jsx)(n.code,{children:"static"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"static"})," aplicado globalmente cria vari\xe1veis vis\xedveis apenas no arquivo (ou ",(0,s.jsx)(n.code,{children:"#section"}),") onde foram declaradas. Diferente de ",(0,s.jsx)(n.code,{children:"new"}),", a visibilidade n\xe3o se estende a arquivos inclu\xeddos."]}),"\n",(0,s.jsxs)(n.p,{children:["Localmente, ",(0,s.jsx)(n.code,{children:"static"})," mant\xe9m o valor entre chamadas:"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:'MyFunc()\n{\n    static\n        counter = 0;\n    printf("%d", counter);\n    counter++;\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["A primeira chamada imprime 0, a segunda 1 e assim por diante. Com ",(0,s.jsx)(n.code,{children:"new"}),", o valor seria reiniciado em cada execu\xe7\xe3o. Tamb\xe9m \xe9 poss\xedvel declarar fun\xe7\xf5es ",(0,s.jsx)(n.code,{children:"static"})," para \u201Cprivatiz\xe1-las\u201D."]}),"\n",(0,s.jsx)(n.h2,{id:"stock",children:(0,s.jsx)(n.code,{children:"stock"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"stock"})," serve para declarar fun\xe7\xf5es ou vari\xe1veis opcionais, sem gerar avisos de \u201Cunused\u201D. Se o s\xedmbolo for usado, o compilador o inclui; caso contr\xe1rio, ele \xe9 descartado."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-c",children:'stock Func1()\n{\n    printf("Hello");\n}\n\nstock Func2()\n{\n    printf("Hi");\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:["\xdatil para bibliotecas, onde voc\xea n\xe3o sabe quais fun\xe7\xf5es o usu\xe1rio vai chamar. Diferentemente de ",(0,s.jsx)(n.code,{children:"#pragma unused"}),", o c\xf3digo nem chega a ser emitido se n\xe3o houver uso."]})]})}function u(e={}){let{wrapper:n}={...(0,i.a)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(t,{...e})}):t(e)}},50065:function(e,n,a){a.d(n,{Z:()=>o,a:()=>c});var r=a(67294);let s={},i=r.createContext(s);function c(e){let n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);