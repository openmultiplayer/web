"use strict";(self.webpackChunkomp_web=self.webpackChunkomp_web||[]).push([["92966"],{86684:function(e,a,t){t.r(a),t.d(a,{frontMatter:()=>r,toc:()=>o,default:()=>h,metadata:()=>n,assets:()=>d,contentTitle:()=>s});var n=JSON.parse('{"id":"scripting/callbacks/OnPlayerTakeDamage","title":"OnPlayerTakeDamage","description":"This callback is called when a player takes damage.","source":"@site/i18n/th/docusaurus-plugin-content-docs/current/scripting/callbacks/OnPlayerTakeDamage.md","sourceDirName":"scripting/callbacks","slug":"/scripting/callbacks/OnPlayerTakeDamage","permalink":"/th/docs/scripting/callbacks/OnPlayerTakeDamage","draft":false,"unlisted":false,"editUrl":"https://github.com/openmultiplayer/web/edit/master/frontend/docs/scripting/callbacks/OnPlayerTakeDamage.md","tags":[{"inline":true,"label":"player","permalink":"/th/docs/tags/player"}],"version":"current","frontMatter":{"title":"OnPlayerTakeDamage","sidebar_label":"OnPlayerTakeDamage","description":"This callback is called when a player takes damage.","tags":["player"]},"sidebar":"docsSidebar","previous":{"title":"OnPlayerStreamOut","permalink":"/th/docs/scripting/callbacks/OnPlayerStreamOut"},"next":{"title":"OnPlayerText","permalink":"/th/docs/scripting/callbacks/OnPlayerText"}}'),l=t(85893),i=t(50065);let r={title:"OnPlayerTakeDamage",sidebar_label:"OnPlayerTakeDamage",description:"This callback is called when a player takes damage.",tags:["player"]},s=void 0,d={},o=[{value:"\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22",id:"\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22",level:2},{value:"\u0E2A\u0E48\u0E07\u0E04\u0E37\u0E19",id:"\u0E2A\u0E48\u0E07\u0E04\u0E37\u0E19",level:2},{value:"\u0E15\u0E31\u0E27\u0E2D\u0E22\u0E48\u0E32\u0E07",id:"\u0E15\u0E31\u0E27\u0E2D\u0E22\u0E48\u0E32\u0E07",level:2},{value:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",id:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",level:2}];function c(e){let a={admonition:"admonition",code:"code",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,i.a)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(a.admonition,{type:"warning",children:(0,l.jsx)(a.p,{children:"Callback \u0E19\u0E35\u0E49\u0E16\u0E39\u0E01\u0E40\u0E1E\u0E34\u0E48\u0E21\u0E43\u0E19 SA-MP 0.3d \u0E41\u0E25\u0E30\u0E08\u0E30\u0E44\u0E21\u0E48\u0E17\u0E33\u0E07\u0E32\u0E19\u0E43\u0E19\u0E40\u0E27\u0E2D\u0E23\u0E4C\u0E0A\u0E31\u0E48\u0E19\u0E01\u0E48\u0E2D\u0E19\u0E2B\u0E19\u0E49\u0E32\u0E19\u0E35\u0E49!"})}),"\n",(0,l.jsx)(a.h2,{id:"\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22",children:"\u0E04\u0E33\u0E2D\u0E18\u0E34\u0E1A\u0E32\u0E22"}),"\n",(0,l.jsx)(a.p,{children:"This callback is called when a player takes damage."}),"\n",(0,l.jsxs)(a.table,{children:[(0,l.jsx)(a.thead,{children:(0,l.jsxs)(a.tr,{children:[(0,l.jsx)(a.th,{children:"Name"}),(0,l.jsx)(a.th,{children:"Description"})]})}),(0,l.jsxs)(a.tbody,{children:[(0,l.jsxs)(a.tr,{children:[(0,l.jsx)(a.td,{children:"playerid"}),(0,l.jsx)(a.td,{children:"The ID of the player that took damage."})]}),(0,l.jsxs)(a.tr,{children:[(0,l.jsx)(a.td,{children:"issuerid"}),(0,l.jsx)(a.td,{children:"The ID of the player that caused the damage. INVALID_PLAYER_ID if self-inflicted."})]}),(0,l.jsxs)(a.tr,{children:[(0,l.jsxs)(a.td,{children:["Float",":amount"]}),(0,l.jsx)(a.td,{children:"The amount of damage the player took (health and armour combined)."})]}),(0,l.jsxs)(a.tr,{children:[(0,l.jsxs)(a.td,{children:["WEAPON",":weaponid"]}),(0,l.jsx)(a.td,{children:"The ID of the weapon/reason for the damage."})]}),(0,l.jsxs)(a.tr,{children:[(0,l.jsx)(a.td,{children:"bodypart"}),(0,l.jsx)(a.td,{children:"The body part that was hit."})]})]})]}),"\n",(0,l.jsx)(a.h2,{id:"\u0E2A\u0E48\u0E07\u0E04\u0E37\u0E19",children:"\u0E2A\u0E48\u0E07\u0E04\u0E37\u0E19"}),"\n",(0,l.jsx)(a.p,{children:"1 - Callback will not be called in other filterscripts."}),"\n",(0,l.jsx)(a.p,{children:"0 - Allows this callback to be called in other filterscripts."}),"\n",(0,l.jsx)(a.p,{children:"It is always called first in filterscripts so returning 1 there blocks other filterscripts from seeing it."}),"\n",(0,l.jsx)(a.h2,{id:"\u0E15\u0E31\u0E27\u0E2D\u0E22\u0E48\u0E32\u0E07",children:"\u0E15\u0E31\u0E27\u0E2D\u0E22\u0E48\u0E32\u0E07"}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-c",children:'public OnPlayerTakeDamage(playerid, issuerid, Float:amount, WEAPON:weaponid, bodypart)\n{\n    if (issuerid\xa0!= INVALID_PLAYER_ID) // If not self-inflicted\n    {\n        new\n            infoString[128],\n            weaponName[24],\n            victimName[MAX_PLAYER_NAME],\n            attackerName[MAX_PLAYER_NAME];\n\n        GetPlayerName(playerid, victimName, sizeof (victimName));\n        GetPlayerName(issuerid, attackerName, sizeof (attackerName));\n\n        GetWeaponName(weaponid, weaponName, sizeof (weaponName));\n\n        format(infoString, sizeof(infoString), "%s has made %.0f damage to %s, weapon: %s, bodypart: %d", attackerName, amount, victimName, weaponName, bodypart);\n        SendClientMessageToAll(-1, infoString);\n    }\n    return 1;\n}\n'})}),"\n",(0,l.jsx)(a.pre,{children:(0,l.jsx)(a.code,{className:"language-c",children:"public OnPlayerTakeDamage(playerid, issuerid, Float:amount, WEAPON:weaponid, bodypart)\n{\n    if (issuerid\xa0!= INVALID_PLAYER_ID && weaponid == 34 && bodypart == 9)\n    {\n        // One shot to the head to kill with sniper rifle\n        SetPlayerHealth(playerid, 0.0);\n    }\n    return 1;\n}\n"})}),"\n",(0,l.jsx)(a.h2,{id:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01",children:"\u0E1A\u0E31\u0E19\u0E17\u0E36\u0E01"}),"\n",(0,l.jsx)(a.admonition,{type:"tip",children:(0,l.jsx)(a.p,{children:"The weaponid will return 37 (flame thrower) from any fire sources (e.g. molotov, 18). The weaponid will return 51 from any weapon that creates an explosion (e.g. RPG, grenade) playerid is the only one who can call the callback. The amount is always the maximum damage the weaponid can do, even when the health left is less than that maximum damage. So when a player has 100.0 health and gets shot with a Desert Eagle which has a damage value of 46.2, it takes 3 shots to kill that player. All 3 shots will show an amount of 46.2, even though when the last shot hits, the player only has 7.6 health left."})}),"\n",(0,l.jsx)(a.admonition,{type:"warning",children:(0,l.jsx)(a.p,{children:"GetPlayerHealth and GetPlayerArmour will return the old amounts of the player before this callback. Always check if issuerid is valid before using it as an array index."})})]})}function h(e={}){let{wrapper:a}={...(0,i.a)(),...e.components};return a?(0,l.jsx)(a,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},50065:function(e,a,t){t.d(a,{Z:()=>s,a:()=>r});var n=t(67294);let l={},i=n.createContext(l);function r(e){let a=n.useContext(i);return n.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function s(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:r(e.components),n.createElement(i.Provider,{value:a},e.children)}}}]);