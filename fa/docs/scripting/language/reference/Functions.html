<!doctype html><html lang=fa dir=rtl class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-scripting/language/reference/Functions" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>توابع | open.mp</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://open.mp/fa/images/assets/wordmark-coloured-bg.png><meta data-rh=true name=twitter:image content=https://open.mp/fa/images/assets/wordmark-coloured-bg.png><meta data-rh=true property=og:url content=https://open.mp/fa/docs/scripting/language/reference/Functions><meta data-rh=true property=og:locale content=fa><meta data-rh=true property=og:locale:alternate content=en><meta data-rh=true property=og:locale:alternate content=es><meta data-rh=true property=og:locale:alternate content=ru><meta data-rh=true property=og:locale:alternate content=ar><meta data-rh=true property=og:locale:alternate content=bs><meta data-rh=true property=og:locale:alternate content=de><meta data-rh=true property=og:locale:alternate content=fil><meta data-rh=true property=og:locale:alternate content=fr><meta data-rh=true property=og:locale:alternate content=hu><meta data-rh=true property=og:locale:alternate content=id><meta data-rh=true property=og:locale:alternate content=it><meta data-rh=true property=og:locale:alternate content=nl><meta data-rh=true property=og:locale:alternate content=pl><meta data-rh=true property=og:locale:alternate content=pt_BR><meta data-rh=true property=og:locale:alternate content=ro><meta data-rh=true property=og:locale:alternate content=sl><meta data-rh=true property=og:locale:alternate content=sr><meta data-rh=true property=og:locale:alternate content=ta><meta data-rh=true property=og:locale:alternate content=th><meta data-rh=true property=og:locale:alternate content=tr><meta data-rh=true property=og:locale:alternate content=vi><meta data-rh=true property=og:locale:alternate content=zh_CN><meta data-rh=true property=og:locale:alternate content=zh_TW><meta data-rh=true name=docusaurus_locale content=fa><meta data-rh=true name=docsearch:language content=fa><meta data-rh=true name=docusaurus_version content=current><meta data-rh=true name=docusaurus_tag content=docs-default-current><meta data-rh=true name=docsearch:version content=current><meta data-rh=true name=docsearch:docusaurus_tag content=docs-default-current><meta data-rh=true property=og:title content="توابع | open.mp"><meta data-rh=true name=description content=---><meta data-rh=true property=og:description content=---><link data-rh=true rel=icon href=/fa/favicon.ico><link data-rh=true rel=canonical href=https://open.mp/fa/docs/scripting/language/reference/Functions><link data-rh=true rel=alternate href=https://open.mp/docs/scripting/language/reference/Functions hreflang=en><link data-rh=true rel=alternate href=https://open.mp/es/docs/scripting/language/reference/Functions hreflang=es><link data-rh=true rel=alternate href=https://open.mp/ru/docs/scripting/language/reference/Functions hreflang=ru><link data-rh=true rel=alternate href=https://open.mp/ar/docs/scripting/language/reference/Functions hreflang=ar><link data-rh=true rel=alternate href=https://open.mp/bs/docs/scripting/language/reference/Functions hreflang=bs><link data-rh=true rel=alternate href=https://open.mp/de/docs/scripting/language/reference/Functions hreflang=de><link data-rh=true rel=alternate href=https://open.mp/fil/docs/scripting/language/reference/Functions hreflang=fil><link data-rh=true rel=alternate href=https://open.mp/fr/docs/scripting/language/reference/Functions hreflang=fr><link data-rh=true rel=alternate href=https://open.mp/fa/docs/scripting/language/reference/Functions hreflang=fa><link data-rh=true rel=alternate href=https://open.mp/hu/docs/scripting/language/reference/Functions hreflang=hu><link data-rh=true rel=alternate href=https://open.mp/id/docs/scripting/language/reference/Functions hreflang=id><link data-rh=true rel=alternate href=https://open.mp/it/docs/scripting/language/reference/Functions hreflang=it><link data-rh=true rel=alternate href=https://open.mp/nl/docs/scripting/language/reference/Functions hreflang=nl><link data-rh=true rel=alternate href=https://open.mp/pl/docs/scripting/language/reference/Functions hreflang=pl><link data-rh=true rel=alternate href=https://open.mp/pt-BR/docs/scripting/language/reference/Functions hreflang=pt-BR><link data-rh=true rel=alternate href=https://open.mp/ro/docs/scripting/language/reference/Functions hreflang=ro><link data-rh=true rel=alternate href=https://open.mp/sl/docs/scripting/language/reference/Functions hreflang=sl><link data-rh=true rel=alternate href=https://open.mp/sr/docs/scripting/language/reference/Functions hreflang=sr><link data-rh=true rel=alternate href=https://open.mp/ta/docs/scripting/language/reference/Functions hreflang=ta><link data-rh=true rel=alternate href=https://open.mp/th/docs/scripting/language/reference/Functions hreflang=th><link data-rh=true rel=alternate href=https://open.mp/tr/docs/scripting/language/reference/Functions hreflang=tr><link data-rh=true rel=alternate href=https://open.mp/vi/docs/scripting/language/reference/Functions hreflang=vi><link data-rh=true rel=alternate href=https://open.mp/zh-CN/docs/scripting/language/reference/Functions hreflang=zh-CN><link data-rh=true rel=alternate href=https://open.mp/zh-TW/docs/scripting/language/reference/Functions hreflang=zh-TW><link data-rh=true rel=alternate href=https://open.mp/docs/scripting/language/reference/Functions hreflang=x-default><link data-rh=true rel=preconnect href=https://AOKXGK39Z7-dsn.algolia.net crossorigin=anonymous><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","item":"https://open.mp/fa/docs/scripting/language/reference/Functions","name":"Functions","position":1}]}</script><link rel=alternate type=application/rss+xml href=/fa/blog/rss.xml title="open.mp RSS Feed"><link rel=alternate type=application/atom+xml href=/fa/blog/atom.xml title="open.mp Atom Feed"><link rel=search type=application/opensearchdescription+xml title=open.mp href=/fa/opensearch.xml><link rel=stylesheet href=/fa/assets/css/styles.ba427f7f.css><script src=/fa/assets/js/runtime~main.14034a03.js defer></script><script src=/fa/assets/js/main.bb639fd9.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/fa/images/assets/logo-light-trans.svg><link rel=preload as=image href=/fa/images/assets/logo.svg><div role=region aria-label="پرش به مطلب اصلی"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>پرش به مطلب اصلی</a></div><nav aria-label="صفحه اصلی" class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="باز و بست منو" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/fa/><div class=navbar__logo><img src=/fa/images/assets/logo-light-trans.svg alt="open.mp logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/fa/images/assets/logo-light-trans.svg alt="open.mp logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Open Multiplayer</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/fa/docs>مستندات</a><a class="navbar__item navbar__link" href=/fa/blog>وبلاگ</a><a href=https://forum.open.mp/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">انجمن‌ها</a><a class="navbar__item navbar__link" href=/fa/servers>سرورها</a><a class="navbar__item navbar__link" href=/fa/partners>شرکاء</a><a href=https://opencollective.com/openmultiplayer target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">حمایت مالی<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>فارسی</a><ul class=dropdown__menu><li><a href=/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=en>English</a><li><a href=/es/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=es>Español</a><li><a href=/ru/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=ru>Русский</a><li><a href=/ar/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=ar>العربية</a><li><a href=/bs/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=bs>Bosanski</a><li><a href=/de/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=de>Deutsch</a><li><a href=/fil/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=fil>Filipino</a><li><a href=/fr/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=fr>Français</a><li><a href=/fa/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=fa>فارسی</a><li><a href=/hu/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=hu>Magyar</a><li><a href=/id/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=id>Indonesia</a><li><a href=/it/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=it>Italiano</a><li><a href=/nl/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=nl>Nederlands</a><li><a href=/pl/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=pl>Polski</a><li><a href=/pt-BR/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=pt-BR>Português (Brasil)</a><li><a href=/ro/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=ro>Română</a><li><a href=/sl/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=sl>Slovenščina</a><li><a href=/sr/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=sr>Српски</a><li><a href=/ta/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=ta>தமிழ்</a><li><a href=/th/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=th>ไทย</a><li><a href=/tr/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=tr>Türkçe</a><li><a href=/vi/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=vi>Tiếng Việt</a><li><a href=/zh-CN/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=zh-CN>简体中文</a><li><a href=/zh-TW/docs/scripting/language/reference/Functions target=_self rel="noopener noreferrer" class=dropdown__link lang=zh-TW>繁體中文</a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="بین حالت تاریک و روشن سوئیچ کنید (الان system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="جستجو (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>جستجو</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class=docsWrapper_hBAB><button aria-label="بازگشت به بالا" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type=button></button><div class=docRoot_UBD9><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class=sidebarViewport_aRkj><div class=sidebar_njMd><nav aria-label="نوار کناری مستندات" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/fa/docs>معرفی</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true href=/fa/docs/scripting/callbacks/OnActorStreamIn>Scripting</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/fa/docs/scripting/callbacks/OnActorStreamIn>Callbacks</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/fa/docs/scripting/functions/AddCharModel>Functions</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/fa/docs/scripting/language/reference/Contents>Language</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-3 menu__list-item"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role=button aria-expanded=true tabindex=0 href=/fa/docs/scripting/language/reference/Contents>Reference</a></div><ul class=menu__list><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/Contents>Contents</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/Foreword>Foreword</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/A-tutorial-introduction>A-tutorial-introduction</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/Data-and-declarations>Data-and-declarations</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class="menu__link menu__link--active" aria-current=page tabindex=0 href=/fa/docs/scripting/language/reference/Functions>Functions</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/The-preprocessor>The-preprocessor</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/General-syntax>General-syntax</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/Operators-and-expressions>Operators-and-expressions</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/Statements>Statements</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/Directives>Directives</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/Proposed-function-library>Proposed-function-library</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/Pitfalls-differences-from-C>Pitfalls-differences-from-C</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/Assorted-tips>Assorted-tips</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-4 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/reference/Appendices>Appendices</a></ul><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/ControlStructures>ساختارهای کنترل</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/Directives>کلمات کلیدی: دستورالعمل‌ها</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/Initialisers>کلمات کلیدی: مقداردهان‌ها</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/Operators>کلمات کلیدی: عملگرها</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/Statements>کلمات کلیدی: دستورات</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/Style>راهنمای سبک Pawn</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/Tags>اسکریپت‌نویسی: تگ‌ها</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class=menu__link tabindex=0 href=/fa/docs/scripting/language/Variables>اصول: متغیرها</a></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false tabindex=0 href=/fa/docs/scripting/resources/anglemodes>Resources</a></div></ul><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/fa/docs/server/CommonServerIssues>Server</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/fa/docs/client/ClientCommands>Client</a></div><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/fa/docs/tutorials/AdvancedStructures>Tutorials</a></div><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/fa/docs/awesome>منابع عالی</a><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class=menu__link href=/fa/docs/changelog>گزارش تغییرات</a><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class=menu__list-item-collapsible><a class="menu__link menu__link--sublist menu__link--sublist-caret" role=button aria-expanded=false href=/fa/docs/meta/Contributing>meta</a></div></ul></nav></div></div></aside><main class=docMainContainer_TBSr><div class="container padding-top--md padding-bottom--lg"><div class=row><div class="col docItemCol_VOVn"><div class=docItemContainer_Djhp><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="نشانگر صفحات"><ul class=breadcrumbs><li class=breadcrumbs__item><a aria-label="صفحه اصلی" class=breadcrumbs__link href=/fa/><svg viewBox="0 0 24 24" class=breadcrumbHomeIcon_YNFT><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill=currentColor /></svg></a><li class=breadcrumbs__item><span class=breadcrumbs__link>Scripting</span><li class=breadcrumbs__item><span class=breadcrumbs__link>Language</span><li class=breadcrumbs__item><span class=breadcrumbs__link>Reference</span><li class="breadcrumbs__item breadcrumbs__item--active"><span class=breadcrumbs__link>Functions</span></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type=button class="clean-btn tocCollapsibleButton_TO0P">مطالب این صفحه</button></div><div class="theme-doc-markdown markdown"><header><h1>توابع</h1></header>
<hr>
<p>اعلان یک تابع نام تابع و پارامترهای رسمی‌اش رو (بین پرانتز) مشخص می‌کنه. یک تابع همچنین ممکنه یک مقدار برگردونه. اعلان تابع باید در سطح global ظاهر بشه (یعنی خارج از هر تابع دیگه‌ای) و به صورت global قابل دسترسی هست.</p>
<p>اگر یک semicolon بعد از اعلان تابع بیاد (به جای یک statement)، اعلان یک forward declaration از تابع رو نشون می‌ده.</p>
<p>statement return نتیجه تابع رو تنظیم می‌کنه. مثلاً، تابع sum (که پایین می‌بینی) نتیجه‌اش مقدار هر دو آرگومنتش جمع شده با هم هست. expression return برای یک تابع اختیاری هست، ولی نمی‌تونی از مقدار یک تابعی که مقداری برنمی‌گردونه استفاده کنی.</p>
<p>فهرست: تابع sum</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>sum</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> a </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> b</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>آرگومنت‌های یک تابع متغیرهای محلی (به صورت ضمنی اعلان شده) برای اون تابع هستن. فراخوانی تابع مقادیر آرگومنت‌ها رو تعیین می‌کنه.</p>
<p>مثال دیگه‌ای از تعریف کامل تابع leapyear (که برای سال کبیسه true و برای سال غیرکبیسه false برمی‌گردونه):</p>
<p>فهرست: تابع leapyear</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>leapyear</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">y</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> y </span><span class="token operator" style=color:#393A34>%</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"> y </span><span class="token operator" style=color:#393A34>%</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>100</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>!=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>||</span><span class="token plain"> y </span><span class="token operator" style=color:#393A34>%</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>400</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>عملگرهای منطقی و حسابی که در مثال leapyear استفاده شدن به ترتیب در صفحات 108 و 104 پوشش داده شدن.</p>
<p>معمولاً یک تابع شامل اعلان متغیرهای محلی هست و از یک compound statement تشکیل شده. در مثال زیر، به statement assert توجه کن که از مقادیر منفی برای exponent محافظت می‌کنه.</p>
<p>فهرست: تابع power (به توان رساندن)</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>power</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">x</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> y</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/* returns x raised to the power of y */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    assert y </span><span class="token operator" style=color:#393A34>>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new r </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">new i </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> y</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i</span><span class="token operator" style=color:#393A34>++</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        r </span><span class="token operator" style=color:#393A34>*=</span><span class="token plain"> x</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> r</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>یک تابع ممکنه چندین statement return داشته باشه —معمولاً این کار رو می‌کنن تا سریع از یک تابع خارج بشن وقتی parameter error داره یا وقتی معلوم می‌شه که تابع کاری برای انجام نداره. اگر یک تابع آرایه برگردونه، همه statement های return باید آرایه‌ای با همون اندازه و همون ابعاد مشخص کنن.</p>
<hr>
<p><code>روش ترجیحی برای اعلان forward function ها در صفحه 82 هست</code></p>
<p><code>statement "assert": 112</code></p>
<hr>
<p>• آرگومنت‌های تابع (call-by-value در مقابل call-by-reference)</p>
<p>تابع "faculty" در برنامه بعدی یک پارامتر داره که توی یک حلقه ازش استفاده می‌کنه تا faculty اون عدد رو محاسبه کنه. چیزی که شایان توجه هست اینه که تابع آرگومنتش رو تغییر می‌ده.</p>
<p>فهرست: faculty.p</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* Calculation of the faculty of a value */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>main</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    print </span><span class="token string" style=color:#e3116c>"Enter a value: "</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new v </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>getvalue</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new f </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>faculty</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">v</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    printf </span><span class="token string" style=color:#e3116c>"The faculty of %d is %d\n"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> v</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> f</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>faculty</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">n</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    assert n </span><span class="token operator" style=color:#393A34>>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new result </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>while</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">n </span><span class="token operator" style=color:#393A34>></span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        result </span><span class="token operator" style=color:#393A34>*=</span><span class="token plain"> n</span><span class="token operator" style=color:#393A34>--</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> result</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>هر مقدار (مثبتی) که "n" در ورودی حلقه while در تابع faculty داشت، "n" در انتهای حلقه صفر خواهد بود. در مورد تابع faculty، پارامتر "by value" پاس داده می‌شه، پس تغییر "n" محلی تابع faculty هست. به عبارت دیگه، تابع main مقدار "v" رو به عنوان ورودی به تابع faculty پاس می‌ده، ولی بعد از برگشت faculty، "v" هنوز همون مقداری رو داره که قبل از فراخوانی تابع داشت.</p>
<p>آرگومنت‌هایی که یک cell رو اشغال می‌کنن می‌تونن by value یا by reference پاس داده بشن. پیش‌فرض "pass by value" هست. برای ساخت یک آرگومنت تابع که by reference پاس داده می‌شه، کاراکتر & رو قبل از نام آرگومنت بذار.</p>
<p>مثال:</p>
<p>فهرست: تابع swap</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>swap</span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>&</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&</span><span class="token plain">b</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new temp </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> b</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    b </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> a</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    a </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> temp</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>برای پاس دادن یک آرایه به تابع، یک جفت bracket به نام آرگومنت اضافه کن. می‌تونی به صورت اختیاری اندازه آرایه رو مشخص کنی؛ این کار error checking parser رو بهبود می‌ده.</p>
<p>مثال:</p>
<p>فهرست: تابع addvector</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>addvector</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> size</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">new i </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> size</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i</span><span class="token operator" style=color:#393A34>++</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        a</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+=</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>آرایه‌ها همیشه by reference پاس داده می‌شن. به عنوان نکته جانبی، آرایه b در مثال بالا در بدنه تابع تغییر نمی‌کنه. آرگومنت تابع به عنوان const اعلان شده تا این موضوع رو صریح کنه. علاوه بر بهبود error checking، این کار به pawn parser اجازه می‌ده کد کارآمدتری تولید کنه.</p>
<p>برای پاس دادن یک آرایه از literal ها به تابع، از همون syntax که برای array initializer ها استفاده می‌شه استفاده کن: یک literal string یا سری از array index های محصور در braces (صفحه 99 رو ببین؛ ellipsis برای progressive initializer ها نمی‌تونه استفاده بشه). آرایه‌های literal فقط می‌تونن یک بعد داشته باشن.</p>
<p>snippet زیر addvector رو صدا می‌زنه تا پنج رو به هر element آرایه "vect" اضافه کنه:</p>
<p>فهرست: استفاده از addvector</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">new vect</span><span class="token punctuation" style=color:#393A34>[</span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>addvector</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">vect</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token number" style=color:#36acaa>5</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* vect[] now holds the values 6, 7 and 8 */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>فراخوانی تابع printf با string "Hello world\n" در اولین برنامه همه‌جا حاضر مثال دیگه‌ای از پاس دادن یک literal array به تابع هست.</p>
<hr>
<p><code>مثال دیگه تابع JulianToDate در صفحه 13 هست</code></p>
<p><code>متغیرهای ثابت: 64</code></p>
<p><code>برنامه "Hello world": 5</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-فراخوانی-توابع>• فراخوانی توابع<a href=#-فراخوانی-توابع class=hash-link aria-label="لینک مستقیم به • فراخوانی توابع" title="لینک مستقیم به • فراخوانی توابع">​</a></h3>
<p>وقتی نام یک تابع رو با پارامترهاش در یک statement یا expression قرار می‌دی، تابع در اون statement/expression اجرا می‌شه. statement ای که به تابع اشاره می‌کنه "caller" هست و خود تابع، در اون نقطه، "callee" هست: اونی که صدا زده می‌شه.</p>
<p>syntax استاندارد برای فراخوانی یک تابع اینه که نام تابع رو بنویسی، بعدش یک لیست با همه پارامترهای صریحاً پاس شده بین پرانتز. اگر هیچ پارامتری پاس نشده، یا اگر تابع هیچ پارامتری نداره، جفت پرانتز بعد از نام تابع هنوز هم حضور دارن. مثلاً، برای تست کردن تابع power، برنامه زیر اینطوری صداش می‌زنه:</p>
<p>فهرست: برنامه مثال برای تابع power</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>main</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    print </span><span class="token string" style=color:#e3116c>"Please give the base value and the power to raise it to:"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new base </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>getvalue</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new power </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>getvalue</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new result </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>power</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">base</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> power</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    printf </span><span class="token string" style=color:#e3116c>"%d raised to the power %d is %d"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> base</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> power</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> result</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>یک تابع ممکنه به صورت اختیاری یک مقدار برگردونه. توابع sum، leapyear و power همگی یک مقدار برمی‌گردونن، ولی تابع swap نمی‌گردونه. حتی اگر یک تابع مقداری برگردونه، caller ممکنه نادیده‌اش بگیره.</p>
<p>برای موقعیتی که caller مقدار برگشتی تابع رو نادیده می‌گیره، یک syntax جایگزین برای فراخوانی تابع وجود داره، که در مثال برنامه قبلی هم نشون داده شده که تابع power رو فراخوانی می‌کنه. پرانتزهای دور همه آرگومنت‌های تابع اختیاری هستن اگر caller از مقدار برگشتی استفاده نکنه.</p>
<p>در آخرین statement، برنامه مثال می‌خونه</p>
<p><code>printf "%d raised to the power %d is %d", base, power, result</code></p>
<p>به جای</p>
<p><code>printf("%d raised to the power %d is %d", base, power, result)</code></p>
<p>که همون کار رو می‌کنه.</p>
<p>syntax بدون پرانتز دور لیست پارامتر "procedure call" syntax نامیده می‌شه. فقط می‌تونی ازش استفاده کنی اگر:</p>
<ul>
<li>
<p>caller نتیجه تابع رو به یک متغیر assign نکنه و توی یک expression استفاده نکنه، یا به عنوان "test expression" یک if statement مثلاً؛</p>
</li>
<li>
<p>پارامتر اول با یک پرانتز باز شروع نشه؛</p>
</li>
<li>
<p>پارامتر اول در همون خط نام تابع باشه، مگر اینکه از named parameter ها استفاده کنی (بخش بعدی رو ببین).</p>
</li>
</ul>
<p>همونطور که ممکنه مشاهده کنی، procedure call syntax برای مواردی اعمال می‌شه که فراخوانی تابع بیشتر مثل یک statement رفتار می‌کنه، مثل فراخوانی‌های print و printf در مثال قبلی. syntax هدفش اینه که چنین statement هایی کمتر مرموز و دوستانه‌تر برای خوندن ظاهر بشن، ولی نه اینکه استفاده از syntax اختیاری هست.</p>
<p>به عنوان نکته جانبی، همه پرانتزها در برنامه مثالی که در این بخش ارائه شده ضروری هستن: مقادیر برگشتی فراخوانی‌های getvalue در دو متغیر ذخیره می‌شن، و بنابراین یک جفت پرانتز خالی باید بعد از نام تابع بیاد. تابع getvalue پارامترهای اختیاری داره، ولی هیچ‌کدوم در این برنامه مثال پاس نشدن.</p>
<hr>
<p><code>تابع power: 70</code></p>
<p><code>توابع sum & leapyear: 70</code></p>
<p><code>تابع swap: 71</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-named-parameter-ها-در-مقابل-positional-parameter-ها>• Named parameter ها در مقابل positional parameter ها<a href=#-named-parameter-ها-در-مقابل-positional-parameter-ها class=hash-link aria-label="لینک مستقیم به • Named parameter ها در مقابل positional parameter ها" title="لینک مستقیم به • Named parameter ها در مقابل positional parameter ها">​</a></h3>
<p>در مثال‌های قبلی، ترتیب پارامترهای فراخوانی تابع مهم بود، چون هر پارامتر به آرگومنت تابع با همون موقعیت ترتیبی کپی می‌شه. مثلاً، با تابع weekday (که از الگوریتم Zeller's congruence استفاده می‌کنه) که پایین تعریف شده، weekday(12,31,1999) رو صدا می‌زنی تا روز هفته آخرین روز قرن قبل رو بگیری.</p>
<p>فهرست: تابع weekday</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>weekday</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">month</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> day</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> year</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/* returns the day of the week: 0=Saturday, 1=Sunday, etc. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">month </span><span class="token operator" style=color:#393A34>&lt;=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        month </span><span class="token operator" style=color:#393A34>+=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>12</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>--</span><span class="token plain">year</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new j </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> year </span><span class="token operator" style=color:#393A34>%</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>100</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new e </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> year </span><span class="token operator" style=color:#393A34>/</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>100</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">day </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">month</span><span class="token operator" style=color:#393A34>+</span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token operator" style=color:#393A34>*</span><span class="token number" style=color:#36acaa>26</span><span class="token operator" style=color:#393A34>/</span><span class="token number" style=color:#36acaa>10</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> j </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> j</span><span class="token operator" style=color:#393A34>/</span><span class="token number" style=color:#36acaa>4</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> e</span><span class="token operator" style=color:#393A34>/</span><span class="token number" style=color:#36acaa>4</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>-</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token operator" style=color:#393A34>*</span><span class="token plain">e</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>%</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>7</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>فرمت‌های تاریخ بر اساس فرهنگ و ملت متفاوت هستن. در حالی که فرمت month/day/year در ایالات متحده آمریکا رایج هست، کشورهای اروپایی اغلب از فرمت day/month/year استفاده می‌کنن، و انتشارات فنی گاهی روی فرمت year/month/day (ISO/IEC 8824) استاندارد می‌شن. به عبارت دیگه، هیچ ترتیبی از آرگومنت‌ها در تابع weekday "منطقی" یا "متعارف" نیست. در این صورت، روش جایگزین برای پاس دادن پارامترها به تابع استفاده از "named parameter ها" هست، مثل مثال‌های بعدی (هر سه فراخوانی تابع معادل هستن):</p>
<p>فهرست: استفاده از weekday —positional parameter ها</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">new wkday1 </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>weekday</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">month </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>12</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">day </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>31</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">year </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1999</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">new wkday2 </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>weekday</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">day </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>31</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">month </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>12</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">year </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1999</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">new wkday3 </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>weekday</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">year </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1999</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">month </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>12</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">day </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>31</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>با named parameter ها، یک نقطه (".") قبل از نام آرگومنت تابع می‌آد. آرگومنت تابع می‌تونه به هر expression ای که برای آرگومنت معتبر هست تنظیم بشه. علامت مساوی ("=") در مورد named parameter نشون‌دهنده assignment نیست؛ بلکه expression ای که بعد از علامت مساوی می‌آد رو به یکی از آرگومنت‌های تابع لینک می‌کنه.</p>
<p>می‌تونی positional parameter ها و named parameter ها رو در فراخوانی تابع ترکیب کنی با این محدودیت که همه positional parameter ها باید قبل از هر named parameter بیان.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-مقادیر-پیشفرض-آرگومنتهای-تابع>• مقادیر پیش‌فرض آرگومنت‌های تابع<a href=#-مقادیر-پیشفرض-آرگومنتهای-تابع class=hash-link aria-label="لینک مستقیم به • مقادیر پیش‌فرض آرگومنت‌های تابع" title="لینک مستقیم به • مقادیر پیش‌فرض آرگومنت‌های تابع">​</a></h3>
<p>یک آرگومنت تابع ممکنه یک مقدار پیش‌فرض داشته باشه. مقدار پیش‌فرض برای یک آرگومنت تابع باید یک ثابت باشه. برای مشخص کردن یک مقدار پیش‌فرض، علامت مساوی ("=") و مقدار رو به نام آرگومنت اضافه کن.</p>
<p>وقتی فراخوانی تابع یک argument placeholder به جای یک آرگومنت معتبر مشخص می‌کنه، مقدار پیش‌فرض اعمال می‌شه. argument placeholder کاراکتر underscore ("_") هست. argument placeholder فقط برای آرگومنت‌های تابعی که مقدار پیش‌فرض دارن معتبر هست.</p>
<p>راست‌ترین argument placeholder ها ممکنه به سادگی از لیست آرگومنت تابع حذف بشن. مثلاً، اگر تابع increment اینطوری تعریف بشه:</p>
<p>فهرست: تابع increment —مقادیر پیش‌فرض</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>increment</span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>&</span><span class="token plain">value</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> incr</span><span class="token operator" style=color:#393A34>=</span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> value </span><span class="token operator" style=color:#393A34>+=</span><span class="token plain"> incr</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>فراخوانی‌های تابع زیر همگی معادل هستن:</p>
<p>فهرست: استفاده از increment</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>increment</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>increment</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> _</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>increment</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>مقادیر آرگومنت پیش‌فرض برای آرگومنت‌های passed-by-reference مفیدن تا آرگومنت ورودی رو اختیاری کنن. مثلاً، اگر تابع divmod طراحی شده باشه که هم quotient و هم remainder یک عملیات تقسیم رو از طریق آرگومنت‌هاش برگردونه، مقادیر پیش‌فرض این آرگومنت‌ها رو اختیاری می‌کنن:</p>
<p>فهرست: تابع divmod —مقادیر پیش‌فرض برای reference parameter ها</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>divmod</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&</span><span class="token plain">quotient</span><span class="token operator" style=color:#393A34>=</span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&</span><span class="token plain">remainder</span><span class="token operator" style=color:#393A34>=</span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    quotient </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> a </span><span class="token operator" style=color:#393A34>/</span><span class="token plain"> b</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    remainder </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> a </span><span class="token operator" style=color:#393A34>%</span><span class="token plain"> b</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>با تعریف قبلی تابع divmod، فراخوانی‌های تابع زیر حالا همگی معتبر هستن:</p>
<p>فهرست: استفاده از divmod</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">new p</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> q</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>divmod</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>10</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> p</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> q</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>divmod</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>10</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> p</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> _</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>divmod</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>10</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> _</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> q</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>divmod</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>10</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> p</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">divmod </span><span class="token number" style=color:#36acaa>10</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> p</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> q</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>آرگومنت‌های پیش‌فرض برای آرگومنت‌های آرایه اغلب برای تنظیم یک string یا prompt پیش‌فرض به تابعی که یک آرگومنت string دریافت می‌کنه راحت هستن. مثلاً:</p>
<p>فهرست: تابع print error</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>print_error</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> message</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> title</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"Error: "</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    print title</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    print message</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    print </span><span class="token string" style=color:#e3116c>"\n"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>مثال بعدی field های یک آرایه رو به آرایه دیگه اضافه می‌کنه، و به صورت پیش‌فرض سه element اول آرایه مقصد رو یکی افزایش می‌ده:</p>
<p>فهرست: تابع addvector، بازنگری شده</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>addvector</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>}</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> size </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">new i </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> size</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i</span><span class="token operator" style=color:#393A34>++</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    a</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+=</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<hr>
<p><code>توابع Public از مقادیر آرگومنت پیش‌فرض پشتیبانی نمی‌کنن؛ صفحه 83 رو ببین</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-عملگر-sizeof-و-آرگومنتهای-پیشفرض-تابع>• عملگر sizeof و آرگومنت‌های پیش‌فرض تابع<a href=#-عملگر-sizeof-و-آرگومنتهای-پیشفرض-تابع class=hash-link aria-label="لینک مستقیم به • عملگر sizeof و آرگومنت‌های پیش‌فرض تابع" title="لینک مستقیم به • عملگر sizeof و آرگومنت‌های پیش‌فرض تابع">​</a></h3>
<p>یک مقدار پیش‌فرض یک آرگومنت تابع باید یک ثابت باشه، و مقدارش در نقطه اعلان تابع تعیین می‌شه. استفاده از عملگر "sizeof" برای تنظیم مقدار پیش‌فرض یک آرگومنت تابع یک مورد خاص هست: محاسبه مقدار sizeof expression تا نقطه فراخوانی تابع به تأخیر می‌افته و اندازه آرگومنت واقعی رو می‌گیره نه اون آرگومنت رسمی. وقتی تابع چندین بار در یک برنامه با آرگومنت‌های مختلف استفاده می‌شه، نتیجه "sizeof" expression احتمالاً در هر فراخوانی متفاوت هست —یعنی "مقدار پیش‌فرض" آرگومنت تابع ممکنه تغییر کنه.</p>
<p>پایین یک برنامه مثال هست که ده عدد تصادفی در محدوده 0–51 بدون تکرار می‌کشه. مثالی برای کاربرد کشیدن اعداد تصادفی بدون تکرار در بازی‌های کارت هست —اون ده عدد می‌تونن نمایانگر کارت‌ها برای دو "دست" در یک بازی پوکر باشن. فضایل الگوریتم استفاده شده در این برنامه، که توسط Robert W. Floyd اختراع شده، اینه که کارآمد و بی‌طرف هست —به شرطی که تولیدکننده عدد شبه-تصادفی هم بی‌طرف باشه.</p>
<p>فهرست: randlist.p</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>main</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new HandOfCards</span><span class="token punctuation" style=color:#393A34>[</span><span class="token number" style=color:#36acaa>10</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>FillRandom</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">HandOfCards</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>52</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    print </span><span class="token string" style=color:#e3116c>"A draw of 10 numbers from a range of 0 to 51 \</span><br></span><span class=token-line style=color:#393A34><span class="token string" style=color:#e3116c>        (inclusive) without duplicates:\n"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">new i </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>sizeof</span><span class="token plain"> HandOfCards</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i</span><span class="token operator" style=color:#393A34>++</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        printf </span><span class="token string" style=color:#e3116c>"%d "</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> HandOfCards</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>FillRandom</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Series</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Range</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Number </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>sizeof</span><span class="token plain"> Series</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    assert Range </span><span class="token operator" style=color:#393A34>>=</span><span class="token plain"> Number          </span><span class="token comment" style=color:#999988;font-style:italic>/* cannot select 50 values</span><br></span><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>                                     * without duplicates in the</span><br></span><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>                                     * range 0..40, for example */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new Index </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">new Seq </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Range </span><span class="token operator" style=color:#393A34>-</span><span class="token plain"> Number</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> Seq </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> Range</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> Seq</span><span class="token operator" style=color:#393A34>++</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        new Val </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>random</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Seq </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        new Pos </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>InSeries</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Series</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Val</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Index</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Pos </span><span class="token operator" style=color:#393A34>>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            Series</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">Index</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Series</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">Pos</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            Series</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">Pos</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Seq</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>else</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            Series</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">Index</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> Val</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        Index</span><span class="token operator" style=color:#393A34>++</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>InSeries</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Series</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Value</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Top </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>sizeof</span><span class="token plain"> Series</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">new i </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> Top</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i</span><span class="token operator" style=color:#393A34>++</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Series</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">i</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> Value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> i</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>-</span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>تابع main آرایه HandOfCards رو با اندازه ده cell اعلان می‌کنه و بعد تابع FillRandom رو با این هدف فراخوانی می‌کنه که ده عدد تصادفی مثبت زیر 52 بکشه. ولی توجه کن که تنها دو پارامتری که main به فراخوانی FillRandom پاس می‌ده آرایه HandsOfCards هست، جایی که اعداد تصادفی باید ذخیره بشن، و حد بالایی "52". تعداد اعداد تصادفی برای کشیدن ("10") به صورت ضمنی به FillRandom پاس داده می‌شه.</p>
<p>تعریف تابع FillRandom زیر main برای سومین پارامترش "Number = sizeof Series" مشخص می‌کنه، که "Series" به اولین پارامتر تابع اشاره می‌کنه. به دلیل مورد خاص "sizeof default value"، مقدار پیش‌فرض آرگومنت Number اندازه آرگومنت رسمی Series نیست، بلکه اندازه آرگومنت واقعی در نقطه فراخوانی تابع هست: HandOfCards.</p>
<p>توجه کن که داخل تابع FillRandom، پرسیدن "sizeof" آرگومنت تابع Series هنوز هم صفر ارزیابی می‌شه، چون آرایه Series با طول نامشخص اعلان شده (صفحه 109 رو برای رفتار sizeof ببین). استفاده از sizeof به عنوان مقدار پیش‌فرض برای یک آرگومنت تابع یک مورد خاص هست. اگر پارامتر رسمی Series با اندازه صریح اعلان می‌شد، مثل Series[10]، اضافه کردن یک آرگومنت Number با اندازه آرایه آرگومنت واقعی اضافی می‌بود، چون parser بعد اجبار می‌کرد که هم آرگومنت‌های رسمی و هم واقعی همون اندازه و ابعاد رو داشته باشن.</p>
<hr>
<p><code>عملگر "sizeof": 109</code></p>
<p><code>"random" یک تابع core پیشنهادی هست، صفحه 124 رو ببین</code></p>
<p><code>اعلان آرایه‌ها: 64</code></p>
<p><code>نام‌های Tag: 68</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-آرگومنتها-با-نامهای-tag>• آرگومنت‌ها با نام‌های tag<a href=#-آرگومنتها-با-نامهای-tag class=hash-link aria-label="لینک مستقیم به • آرگومنت‌ها با نام‌های tag" title="لینک مستقیم به • آرگومنت‌ها با نام‌های tag">​</a></h3>
<p>یک tag به صورت اختیاری قبل از یک آرگومنت تابع می‌آد. استفاده از tag ها error checking زمان compile script رو بهبود می‌ده و به عنوان "مستندسازی ضمنی" تابع عمل می‌کنه. مثلاً، تابعی که جذر یک مقدار ورودی رو در دقت fixed point محاسبه می‌کنه ممکنه نیاز داشته باشه که پارامتر ورودی یک مقدار fixed point باشه و نتیجه هم fixed point باشه. تابع زیر از ماژول fixed point extension استفاده می‌کنه، و یک الگوریتم تقریبی معروف به "bisection" برای محاسبه جذر. به استفاده از tag override ها روی literal های عددی و نتایج expression توجه کن.</p>
<p>فهرست: تابع sqroot —tag های قوی</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>sqroot</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> low </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> high </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> value</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>while</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">high </span><span class="token operator" style=color:#393A34>-</span><span class="token plain"> low </span><span class="token operator" style=color:#393A34>></span><span class="token plain"> Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        new Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> mid </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">low </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> high</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>>></span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>fmul</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">mid</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> mid</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            low </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> mid</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>else</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">            high </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> mid</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> low</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>با تعریف بالا، pawn parser یک تشخیص صادر می‌کنه اگر کسی تابع sqroot رو با پارامتری با tag متفاوت از "Fixed:" فراخوانی کنه، یا وقتی سعی کنه نتیجه تابع رو در متغیری با tag "غیر-Fixed:" ذخیره کنه.</p>
<p>الگوریتم bisection به binary search مرتبط هست، در این معنا که مداوماً interval ای که نتیجه باید توش باشه رو نصف می‌کنه. یک الگوریتم "successive substitution" مثل Newton-Raphson، که شیب منحنی تابع رو در نظر می‌گیره، نتایج دقیق‌تری رو سریع‌تر به دست می‌آره، ولی به قیمت اینکه بیان یک معیار توقف سخت‌تر هست. الگوریتم‌های پیشرفته برای محاسبه جذر الگوریتم‌های bisection و Newton-Raphson رو ترکیب می‌کنن.</p>
<p>در مورد یک آرایه، index های آرایه هم می‌تونن tag شده باشن. مثلاً، تابعی که تقاطع دو مستطیل رو ایجاد می‌کنه ممکنه اینطوری نوشته بشه:</p>
<p>فهرست: تابع intersection</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>intersection</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">dest</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">rectangle</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> src1</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">rectangle</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> src2</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">rectangle</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">src1</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">right</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>></span><span class="token plain"> src2</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">left</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"> src1</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">left</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> src2</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">right</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"> src1</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">bottom</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>></span><span class="token plain"> src2</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">top</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&&</span><span class="token plain"> src1</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">top</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> src2</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">bottom</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>/* there is an intersection, calculate it using the "min" and</span><br></span><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>         *"max" functions from the "core" library, see page 124. */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        dest</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">left</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>max</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">src1</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">left</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> src2</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">left</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        dest</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">right</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>min</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">src1</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">right</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> src2</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">right</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        dest</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">top</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>max</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">src1</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">top</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> src2</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">top</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        dest</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">bottom</span><span class="token punctuation" style=color:#393A34>]</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>min</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">src1</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">bottom</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> src2</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">bottom</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> true</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>else</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token comment" style=color:#999988;font-style:italic>/* "src1" and "src2" do not intersect */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        dest </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> false</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<hr>
<p><code>محاسبات Fixed point: 90؛ همچنین یادداشت کاربردی "Fixed Point Support Library" رو ببین</code></p>
<p><code>برای tag "rectangle"، صفحه 68 رو ببین</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-آرگومنتهای-متغیر>• آرگومنت‌های متغیر<a href=#-آرگومنتهای-متغیر class=hash-link aria-label="لینک مستقیم به • آرگومنت‌های متغیر" title="لینک مستقیم به • آرگومنت‌های متغیر">​</a></h3>
<p>تابعی که تعداد متغیری از آرگومنت‌ها می‌گیره، از عملگر "ellipsis" ("...") در header تابع برای نشون دادن موقعیت اولین آرگومنت متغیر استفاده می‌کنه. تابع می‌تونه با توابع از پیش تعریف شده numargs، getarg و setarg به آرگومنت‌ها دسترسی داشته باشه (صفحه 124 رو ببین).</p>
<p>تابع sum مجموع همه پارامترهاش رو برمی‌گردونه. از یک لیست پارامتر با طول متغیر استفاده می‌کنه.</p>
<p>فهرست: تابع sum، بازنگری شده</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>sum</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>.</span><span class="token punctuation" style=color:#393A34>.</span><span class="token punctuation" style=color:#393A34>.</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new result </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>for</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">new i </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> i </span><span class="token operator" style=color:#393A34>&lt;</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>numargs</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>++</span><span class="token plain">i</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        result </span><span class="token operator" style=color:#393A34>+=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>getarg</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">i</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> result</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>این تابع می‌تونه اینطوری استفاده بشه:</p>
<p>فهرست: استفاده از تابع sum</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">new v </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>sum</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>یک tag ممکنه قبل از ellipsis بیاد تا اجبار کنه که همه پارامترهای بعدی همون tag رو داشته باشن، ولی در غیر این صورت هیچ error checking ای با لیست آرگومنت متغیر وجود نداره و این ویژگی باید با احتیاط استفاده بشه.</p>
<p>توابع getarg و setarg فرض می‌کنن که آرگومنت "by reference" پاس داده شده. وقتی getarg رو روی پارامترهای تابع معمولی (به جای آرگومنت‌های متغیر) استفاده می‌کنی باید مراقب باشی، چون نه compiler و نه abstract machine نمی‌تونن این رو چک کنن. پارامترهای واقعی که به عنوان بخشی از "variable argument list" پاس داده می‌شن همیشه by reference پاس داده می‌شن.</p>
<hr>
<p><code>نام‌های Tag: 68</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-قوانین-coercion>• قوانین coercion<a href=#-قوانین-coercion class=hash-link aria-label="لینک مستقیم به • قوانین coercion" title="لینک مستقیم به • قوانین coercion">​</a></h3>
<p>اگر آرگومنت تابع، طبق تعریف تابع (یا اعلانش)، یک "value parameter" باشه، caller می‌تونه به عنوان پارامتر به تابع پاس بده:</p>
<ul>
<li>
<p>یک مقدار، که by value پاس داده می‌شه؛</p>
</li>
<li>
<p>یک reference، که مقدار dereference شده‌اش پاس داده می‌شه؛</p>
</li>
<li>
<p>یک element آرایه (indexed)، که یک مقدار هست.</p>
</li>
</ul>
<p>اگر آرگومنت تابع یک reference باشه، caller می‌تونه به تابع پاس بده:</p>
<ul>
<li>
<p>یک مقدار، که آدرسش پاس داده می‌شه؛</p>
</li>
<li>
<p>یک reference، که by value پاس داده می‌شه چون نوعی داره که تابع انتظارش رو داره؛</p>
</li>
<li>
<p>یک element آرایه (indexed)، که یک مقدار هست.</p>
</li>
</ul>
<p>اگر آرگومنت تابع یک آرایه باشه، caller می‌تونه به تابع پاس بده:</p>
<ul>
<li>
<p>یک آرایه با همون ابعاد، که آدرس شروعش پاس داده می‌شه؛</p>
</li>
<li>
<p>یک element آرایه (indexed)، که در این صورت آدرس element پاس داده می‌شه.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-بازگشت-recursion>• بازگشت (Recursion)<a href=#-بازگشت-recursion class=hash-link aria-label="لینک مستقیم به • بازگشت (Recursion)" title="لینک مستقیم به • بازگشت (Recursion)">​</a></h3>
<p>یک تابع مثال faculty در اوایل این فصل از یک حلقه ساده استفاده کرد. یک تابع مثال که عددی از سری Fibonacci محاسبه می‌کرد هم از یک حلقه و یک متغیر اضافی برای انجام کار استفاده کرد. این دو تابع محبوب‌ترین روتین‌ها برای نشون دادن توابع بازگشتی هستن، پس با پیاده‌سازی اینها به عنوان procedure های تکراری، ممکنه تمایل پیدا کنی فکر کنی که pawn از recursion پشتیبانی نمی‌کنه.</p>
<p>خب، pawn از recursion پشتیبانی می‌کنه، ولی محاسبه faculty ها و اعداد Fibonacci اتفاقاً مثال‌های خوبی از زمانی هستن که نباید از recursion استفاده کرد. Faculty با حلقه راحت‌تر از recursion قابل فهم هست. حل اعداد Fibonacci با recursion واقعاً مسئله رو ساده می‌کنه، ولی به قیمت اینکه فوق‌العاده ناکارآمد هست: Fibonacci بازگشتی همون مقادیر رو بارها و بارها محاسبه می‌کنه.</p>
<p>برنامه زیر پیاده‌سازی بازی معروف "Towers of Hanoi" در یک تابع بازگشتی هست:</p>
<p>فهرست: hanoi.p</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token comment" style=color:#999988;font-style:italic>/* The Towers of Hanoi, a game solved through recursion */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>main</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    print </span><span class="token string" style=color:#e3116c>"How many disks: "</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new disks </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>getvalue</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    move </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> disks</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>move</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">from</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> to</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> spare</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> numdisks</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">numdisks </span><span class="token operator" style=color:#393A34>></span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        move from</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> spare</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> to</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> numdisks</span><span class="token operator" style=color:#393A34>-</span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    printf </span><span class="token string" style=color:#e3116c>"Move disk from pillar %d to pillar %d\n"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> from</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> to</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">numdisks </span><span class="token operator" style=color:#393A34>></span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        move spare</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> to</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> from</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> numdisks</span><span class="token operator" style=color:#393A34>-</span><span class="token number" style=color:#36acaa>1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<hr>
<p><code>"faculty": 71</code></p>
<p><code>"fibonacci": 11</code></p>
<p><code>یک راه‌حل تکراری جذاب برای Towers of Hanoi وجود داره.</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-اعلانهای-forward>• اعلان‌های Forward<a href=#-اعلانهای-forward class=hash-link aria-label="لینک مستقیم به • اعلان‌های Forward" title="لینک مستقیم به • اعلان‌های Forward">​</a></h3>
<p>برای توابع استاندارد، "reference implementation" فعلی pawn compiler نیاز نداره که توابع قبل از اولین استفاده‌شون اعلان بشن.∗ عملگرهای تعریف شده توسط کاربر توابع خاصی هستن، و برخلاف توابع استاندارد باید قبل از استفاده اعلان بشن. در بسیاری موارد راحته که پیاده‌سازی یک عملگر تعریف شده توسط کاربر رو در یک include file بذاری، تا پیاده‌سازی و اعلان قبل از هر فراخوانی/invocation بیاد. گاهی، ممکنه لازم (یا راحت) باشه که اول یک عملگر تعریف شده توسط کاربر رو اعلان کنی و جای دیگه پیاده‌سازیش کنی. یک استفاده خاص از این تکنیک پیاده‌سازی عملگرهای تعریف شده توسط کاربر "ممنوع" هست.</p>
<p>برای ایجاد یک forward declaration، کلمه کلیدی forward رو قبل از نام تابع و لیست پارامترش بذار. برای سازگاری با نسخه‌های اولیه pawn، و برای شباهت با C/C++، روش جایگزین برای forward declare کردن یک تابع اینه که header تابع رو تایپ کنی و با semicolon خاتمه بدی (که بعد از پرانتز بسته لیست پارامتر می‌آد).</p>
<p>تعریف کامل تابع، با بدنه غیرخالی، جای دیگه‌ای در source file پیاده‌سازی می‌شه (به جز عملگرهای تعریف شده توسط کاربر ممنوع).</p>
<p>State classifier ها در forward declaration ها نادیده گرفته می‌شن.</p>
<hr>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id=-پیادهسازیهای-دیگه-زبان-pawn-اگر-وجود-داشته-باشن-ممکنه-از-parser-های-single-pass-استفاده-کنن-که-نیاز-دارن-توابع-قبل-از-استفاده-تعریف-بشن>∗ پیاده‌سازی‌های دیگه زبان Pawn (اگر وجود داشته باشن) ممکنه از parser های "single pass" استفاده کنن، که نیاز دارن توابع قبل از استفاده تعریف بشن.<a href=#-پیادهسازیهای-دیگه-زبان-pawn-اگر-وجود-داشته-باشن-ممکنه-از-parser-های-single-pass-استفاده-کنن-که-نیاز-دارن-توابع-قبل-از-استفاده-تعریف-بشن class=hash-link aria-label='لینک مستقیم به ∗ پیاده‌سازی‌های دیگه زبان Pawn (اگر وجود داشته باشن) ممکنه از parser های "single pass" استفاده کنن، که نیاز دارن توابع قبل از استفاده تعریف بشن.' title='لینک مستقیم به ∗ پیاده‌سازی‌های دیگه زبان Pawn (اگر وجود داشته باشن) ممکنه از parser های "single pass" استفاده کنن، که نیاز دارن توابع قبل از استفاده تعریف بشن.'>​</a></h6>
<hr>
<p><code>عملگرهای تعریف شده توسط کاربر ممنوع: 92</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-state-classifier-ها>• State classifier ها<a href=#-state-classifier-ها class=hash-link aria-label="لینک مستقیم به • State classifier ها" title="لینک مستقیم به • State classifier ها">​</a></h3>
<p>همه توابع به جز توابع native ممکنه به صورت اختیاری یک attribute state داشته باشن. این شامل لیستی از نام‌های state (و automata) بین angle bracket ها پشت header تابع هست. نام‌ها با کاما جدا می‌شن. وقتی state بخشی از یک automaton غیرپیش‌فرض هست، نام automaton و یک جداکننده colon باید قبل از state بیاد؛ مثلاً، "parser<!-- -->:slash<!-- -->" نمایانگر state slash از automaton parser هست.</p>
<p>اگر یک تابع state ها داشته باشه، باید چندین "پیاده‌سازی" از تابع در source code وجود داشته باشه. همه توابع باید همون header تابع رو داشته باشن (به جز لیست state classifier).</p>
<p>به عنوان syntax خاص، وقتی هیچ نامی بین angle bracket ها نیست، تابع به همه state هایی که به پیاده‌سازی‌های دیگه تابع نسبت داده نشدن لینک می‌شه. تابعی که "همه state هایی که جای دیگه handle نشدن" رو handle می‌کنه تابع fall-back نامیده می‌شه.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-توابع-public-تابع-main>• توابع Public، تابع main<a href=#-توابع-public-تابع-main class=hash-link aria-label="لینک مستقیم به • توابع Public، تابع main" title="لینک مستقیم به • توابع Public، تابع main">​</a></h3>
<p>یک برنامه مستقل باید تابع main داشته باشه. این تابع نقطه شروع برنامه هست. تابع main نمی‌تونه آرگومنت داشته باشه.</p>
<p>یک کتابخانه تابع نیازی به داشتن تابع main نداره، ولی باید یا یک تابع main، یا حداقل یک تابع public داشته باشه. تابع main نقطه ورود اصلی به برنامه compile شده هست؛ توابع public نقاط ورود جایگزین به برنامه هستن. virtual machine می‌تونه اجرا رو با یکی از توابع public شروع کنه. یک کتابخانه تابع ممکنه یک تابع main داشته باشه تا initialization یک‌باره در startup انجام بده.</p>
<p>برای public کردن یک تابع، کلمه کلیدی public رو قبل از نام تابع بذار. مثلاً، یک text editor ممکنه تابع public "onkey" رو برای هر کلیدی که کاربر تایپ کرده فراخوانی کنه، تا کاربر بتونه keystroke ها رو تغییر بده (یا رد کنه). تابع onkey زیر هر کاراکتر "~" (کد 126 در character set ISO Latin-1) رو با کد "hard space" در جدول کاراکتر ANSI جایگزین می‌کنه:</p>
<p>فهرست: تابع onkey</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">public </span><span class="token function" style=color:#d73a49>onkey</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">keycode</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">key</span><span class="token operator" style=color:#393A34>==</span><span class="token char">'~'</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>160</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>/* replace ~ by hard space (code 160 in Latin-1) */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>else</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> key </span><span class="token comment" style=color:#999988;font-style:italic>/* leave other keys unaltered */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<hr>
<p><code>مثال: 40</code></p>
<hr>
<p>توابعی که نامشون با نماد "@" شروع می‌شه هم public هستن. پس روش جایگزین برای نوشتن تابع public onkey اینه:</p>
<p>فهرست: تابع @onkey</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">@</span><span class="token function" style=color:#d73a49>onkey</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">keycode</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> key</span><span class="token operator" style=color:#393A34>==</span><span class="token char">'~'</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>?</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>160</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> key</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>کاراکتر "@"، وقتی استفاده می‌شه، بخشی از نام تابع می‌شه؛ یعنی، در مثال آخر، تابع "@onkey" نامیده می‌شه. host application روی نام‌های توابع public ای که یک script ممکنه پیاده‌سازی کنه تصمیم می‌گیره.</p>
<p>آرگومنت‌های یک تابع public نمی‌تونن مقادیر پیش‌فرض داشته باشن. یک تابع public رابط host application رو به pawn script وصل می‌کنه. بنابراین، آرگومنت‌هایی که به تابع public پاس داده می‌شن از host application منشأ می‌گیرن، و host application نمی‌تونه بدونه که script writer چه "مقادیر پیش‌فرضی" برای آرگومنت‌های تابع گذاشته —که به همین دلیل pawn parser استفاده از مقادیر پیش‌فرض برای آرگومنت‌های توابع public رو به عنوان خطا علامت‌گذاری می‌کنه. مسئله مقادیر پیش‌فرض در آرگومنت‌های تابع public فقط در صورتی پیش می‌آد که بخوای توابع public رو از خود script فراخوانی کنی.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-توابع-static>• توابع Static<a href=#-توابع-static class=hash-link aria-label="لینک مستقیم به • توابع Static" title="لینک مستقیم به • توابع Static">​</a></h3>
<p>وقتی نام تابع با کلمه کلیدی static prefix می‌شه، scope تابع به فایلی که تابع توش قرار داره محدود می‌شه.</p>
<p>attribute static می‌تونه با attribute "stock" ترکیب بشه.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-توابع-stock>• توابع Stock<a href=#-توابع-stock class=hash-link aria-label="لینک مستقیم به • توابع Stock" title="لینک مستقیم به • توابع Stock">​</a></h3>
<p>یک تابع "stock" تابعی هست که pawn parser باید وقتی استفاده می‌شه "plug into" برنامه کنه، و ممکنه وقتی استفاده نمی‌شه به سادگی (بدون هشدار) از برنامه "حذفش" کنه. توابع stock به compiler یا interpreter اجازه می‌دن memory footprint و اندازه فایل یک برنامه pawn (compile شده) رو بهینه کنن: هر تابع stock ای که بهش اشاره نشده، کاملاً skip می‌شه —انگار که از source file کم باشه.</p>
<p>یک استفاده معمول از توابع stock، بنابراین، در ایجاد مجموعه‌ای از توابع "کتابخانه" هست. مجموعه‌ای از توابع عمومی، همگی به عنوان "stock" علامت‌گذاری شده ممکنه در یک include file جداگانه قرار بگیرن، که بعد در هر pawn script include می‌شه. فقط توابع کتابخانه‌ای که واقعاً استفاده می‌شن "link" می‌شن.</p>
<p>برای اعلان یک تابع stock، کلمه کلیدی stock رو قبل از نام تابع بذار. توابع public و native نمی‌تونن "stock" اعلان بشن.</p>
<p>وقتی یک تابع stock توابع دیگه رو فراخوانی می‌کنه، معمولاً practice خوبی هست که اون توابع دیگه رو هم به عنوان "stock" اعلان کنی —به جز توابع native. به طور مشابه، هر متغیر global ای که توسط یک تابع stock استفاده می‌شه باید در اکثر موارد هم "stock" تعریف بشه. حذف توابع (stock) استفاده نشده می‌تونه یک واکنش زنجیره‌ای ایجاد کنه که توابع و متغیرهای global دیگه هم دیگه دسترسی نداشته باشن. اون توابع بعد هم حذف می‌شن، و به این ترتیب واکنش زنجیره‌ای ادامه پیدا می‌کنه تا فقط توابعی که استفاده می‌شن، مستقیم یا غیرمستقیم، باقی بمونن.</p>
<hr>
<p><code>مقادیر پیش‌فرض آرگومنت‌های تابع: 75</code></p>
<p><code>متغیرهای Public می‌تونن "stock" اعلان بشن</code></p>
<p><code>متغیرهای Stock: 63</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-توابع-native>• توابع Native<a href=#-توابع-native class=hash-link aria-label="لینک مستقیم به • توابع Native" title="لینک مستقیم به • توابع Native">​</a></h3>
<p>یک برنامه pawn می‌تونه توابع مخصوص application رو از طریق یک "native function" فراخوانی کنه. تابع native باید در برنامه pawn به وسیله یک function prototype اعلان بشه. نام تابع باید با کلمه کلیدی native شروع بشه.</p>
<p>مثال‌ها:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">native </span><span class="token function" style=color:#d73a49>getparam</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> size</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">native </span><span class="token function" style=color:#d73a49>multiply_matrix</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> size</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">native </span><span class="token function" style=color:#d73a49>openfile</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> name</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>نام‌های "getparam"، "multiply_matrix" و "openfile" نام‌های داخلی توابع native هستن؛ اینها نام‌هایی هستن که توابع در برنامه pawn باهاشون شناخته می‌شن. به صورت اختیاری، می‌تونی یک نام خارجی هم برای تابع native تنظیم کنی، که نام تابع همونطور که "host application" می‌شناسه‌اش هست. برای این کار، یک علامت مساوی به function prototype اضافه کن و بعدش نام خارجی. مثلاً:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">native </span><span class="token function" style=color:#d73a49>getparam</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> size</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> host_getparam</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">native </span><span class="token function" style=color:#d73a49>multiply_matrix</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>[</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> size</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> mtx_mul</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>وقتی یک تابع native آرایه برمی‌گردونه، ابعاد و اندازه آرایه باید صریحاً اعلان بشه. مشخصات آرایه بین نام تابع و لیست پارامتر قرار می‌گیره. مثلاً:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>enum</span><span class="token plain"> </span><span class="token class-name">rect</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> left</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> top</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> right</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> bottom </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">native intersect</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">rect</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">src1</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">rect</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> src2</span><span class="token punctuation" style=color:#393A34>[</span><span class="token plain">rect</span><span class="token punctuation" style=color:#393A34>]</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>مگر اینکه صریحاً مشخص بشه، نام خارجی برابر با نام داخلی یک تابع native هست. یک استفاده معمول برای نام‌های خارجی صریح تنظیم یک نام نمادین برای یک عملگر تعریف شده توسط کاربر که به عنوان تابع native پیاده‌سازی شده هست.</p>
<p>"Implementor's Guide" رو برای پیاده‌سازی توابع native در C/C++ (در سمت "host application") ببین.</p>
<p>توابع Native نمی‌تونن state specifier داشته باشن.</p>
<hr>
<p><code>مثالی از یک عملگر تعریف شده توسط کاربر native در صفحه 89 هست</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-عملگرهای-تعریف-شده-توسط-کاربر>• عملگرهای تعریف شده توسط کاربر<a href=#-عملگرهای-تعریف-شده-توسط-کاربر class=hash-link aria-label="لینک مستقیم به • عملگرهای تعریف شده توسط کاربر" title="لینک مستقیم به • عملگرهای تعریف شده توسط کاربر">​</a></h3>
<p>تنها نوع داده pawn یک "cell" هست، معمولاً یک عدد 32-bit یا bit pattern.</p>
<p>Tags: 68 معنی یک مقدار در یک cell به application خاص بستگی داره —لازم نیست همیشه یک مقدار integer signed باشه. pawn اجازه می‌ده یک "معنی" به یک cell با مکانیزم "tag"ش attach کنی.</p>
<p>بر اساس tag ها، pawn همچنین اجازه می‌ده عملگرها رو برای cell هایی با هدف خاص دوباره تعریف کنی. مثال زیر یک tag "ones" و یک عملگر برای جمع کردن دو مقدار "ones" با هم تعریف می‌کنه (مثال همچنین عملگرهایی برای تفریق و نفی پیاده‌سازی می‌کنه). مثال از الگوریتم checksum چندین پروتکل در مجموعه پروتکل TCP/IP الهام گرفته: محاسبات one's complement رو با اضافه کردن carry bit یک arithmetic overflow به least significant bit مقدار شبیه‌سازی می‌کنه.</p>
<p>فهرست: ones.p</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">forward ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>+</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> a</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">forward ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>-</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> a</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">forward ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>-</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> a</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>main</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> chksum </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0xffffffff</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    print </span><span class="token string" style=color:#e3116c>"Input values in hexadecimal, zero to exit\n"</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> value</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>do</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        print </span><span class="token string" style=color:#e3116c>">> "</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        value </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>getvalue</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>.</span><span class="token plain">base</span><span class="token operator" style=color:#393A34>=</span><span class="token number" style=color:#36acaa>16</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        chksum </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> chksum </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> value</span><br></span><span class=token-line style=color:#393A34><span class="token plain">        printf </span><span class="token string" style=color:#e3116c>"Checksum = %x\n"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> chksum</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>while</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">value</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">stock ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>+</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> a</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> mask </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0xffff</span><span class="token plain">                 </span><span class="token comment" style=color:#999988;font-style:italic>/* word mask */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>const</span><span class="token plain"> ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> shift </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>16</span><span class="token plain">                    </span><span class="token comment" style=color:#999988;font-style:italic>/* word shift */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/* add low words and high words separately */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> r1 </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a </span><span class="token operator" style=color:#393A34>&</span><span class="token plain"> mask</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">b </span><span class="token operator" style=color:#393A34>&</span><span class="token plain"> mask</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> r2 </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a </span><span class="token operator" style=color:#393A34>>></span><span class="token operator" style=color:#393A34>></span><span class="token plain"> shift</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">b </span><span class="token operator" style=color:#393A34>>></span><span class="token operator" style=color:#393A34>></span><span class="token plain"> shift</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> carry</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    restart</span><span class="token operator" style=color:#393A34>:</span><span class="token plain">                                        </span><span class="token comment" style=color:#999988;font-style:italic>/* code label (goto target) */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/* add carry of the new low word to the high word, then</span><br></span><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>    * strip it from the low word */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    carry </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">r1 </span><span class="token operator" style=color:#393A34>>></span><span class="token operator" style=color:#393A34>></span><span class="token plain"> shift</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    r2 </span><span class="token operator" style=color:#393A34>+=</span><span class="token plain"> carry</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    r1 </span><span class="token operator" style=color:#393A34>&=</span><span class="token plain"> mask</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/* add the carry from the new high word back to the low</span><br></span><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>    * word, then strip it from the high word */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    carry </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">r2 </span><span class="token operator" style=color:#393A34>>></span><span class="token operator" style=color:#393A34>></span><span class="token plain"> shift</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    r1 </span><span class="token operator" style=color:#393A34>+=</span><span class="token plain"> carry</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    r2 </span><span class="token operator" style=color:#393A34>&=</span><span class="token plain"> mask</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>/* a carry from the high word injected back into the low</span><br></span><span class=token-line style=color:#393A34><span class="token comment" style=color:#999988;font-style:italic>    * word may cause the new low to overflow, so restart in that case */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">carry</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>goto</span><span class="token plain"> restart</span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">r2 </span><span class="token operator" style=color:#393A34>&lt;&lt;</span><span class="token plain"> shift</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>|</span><span class="token plain"> r1</span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">stock ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>-</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> a</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0xffffffff</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>?</span><span class="token plain"> a </span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>~</span><span class="token plain">a</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">stock ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>-</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> a</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> a </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>-</span><span class="token plain">b</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>خط قابل توجه در مثال خط "chksum = chksum + value" در حلقه در تابع main هست. چون هر دو متغیر chksum و value tag ones دارن، عملگر "+" به عملگر تعریف شده توسط کاربر اشاره می‌کنه (به جای عملگر پیش‌فرض "+"). عملگرهای تعریف شده توسط کاربر صرفاً یک راحتی نمادین هستن. همون اثر با فراخوانی صریح توابع به دست می‌آد.</p>
<p>تعریف یک عملگر شبیه تعریف یک تابع هست، با این تفاوت که نام عملگر از کلمه کلیدی "operator" و خود کاراکتر عملگر تشکیل شده. در مثال بالا، هم عملگر unary "-" و هم binary "-" دوباره تعریف شدن. یک تابع عملگر برای یک عملگر binary باید دو آرگومنت داشته باشه، یکی برای عملگر unary باید یک آرگومنت داشته باشه. توجه کن که عملگر binary "-" دو مقدار رو بعد از معکوس کردن علامت operand دوم با هم جمع می‌کنه. عملگر تفریق بنابراین هم به عملگرهای تعریف شده توسط کاربر "negation" (unary "-") و هم addition اشاره می‌کنه.</p>
<p>یک عملگر دوباره تعریف شده باید به محدودیت‌های زیر پایبند باشه:</p>
<ul>
<li>
<p>یک عملگر تعریف شده توسط کاربر باید قبل از استفاده اعلان بشه (این برخلاف توابع "معمولی" هست): یا پیاده‌سازی عملگر تعریف شده توسط کاربر رو بالای توابعی که ازش استفاده می‌کنن بذار، یا یک forward declaration نزدیک بالای فایل اضافه کن.</p>
</li>
<li>
<p>فقط عملگرهای زیر می‌تونن دوباره تعریف بشن: +, -, *, /, %, ++, --, ==, !=, <code>&lt;</code>, <code>></code> , <code>&lt;=</code>, <code>>=</code>, ! و =. یعنی، مجموعه‌های عملگرهای حسابی و رابطه‌ای می‌تونن overload بشن، ولی عملگرهای bitwise و منطقی نمی‌تونن. عملگرهای = و ! مورد خاصی هستن.</p>
</li>
<li>
<p>نمی‌تونی عملگرهای جدید اختراع کنی؛ نمی‌تونی مثلاً operator "#" تعریف کنی.</p>
</li>
<li>
<p>سطح precedence و associativity عملگرها، و همچنین "arity"شون همونطور که تعریف شدن باقی می‌مونن. نمی‌تونی مثلاً یک عملگر unary "+" بسازی.</p>
</li>
<li>
<p>tag برگشتی عملگرهای رابطه‌ای و عملگر "!" باید "bool:" باشه.</p>
</li>
<li>
<p>tag برگشتی عملگرهای حسابی انتخاب خودت هست، ولی نمی‌تونی عملگری رو دوباره تعریف کنی که با عملگر دیگه‌ای یکسان باشه به جز tag برگشتی‌اش. مثلاً، نمی‌تونی هم <code>alpha: operator+(alpha: a, alpha: b)</code> و هم <code>beta: operator+(alpha: a, alpha: b)</code> داشته باشی (عملگر assignment استثنای این قانون هست.)</p>
</li>
<li>
<p>PAWN قبلاً عملگرهایی رو برای کار روی cell های بدون tag تعریف کرده، نمی‌تونی عملگرها رو فقط با آرگومنت‌هایی بدون tag دوباره تعریف کنی.</p>
</li>
<li>
<p>آرگومنت‌های تابع عملگر باید non-array هایی باشن که by value پاس داده می‌شن. نمی‌تونی عملگری بسازی که روی آرایه‌ها کار کنه.</p>
</li>
</ul>
<p>در مثال داده شده بالا، هر دو آرگومنت عملگرهای binary همون tag رو دارن. این ضروری نیست؛ می‌تونی، مثلاً، یک عملگر binary "+" تعریف کنی که یک مقدار integer به یک عدد "ones:" اضافه کنه.</p>
<p>در اصل، عملکرد pawn parser اینه که tag(s) operand(s) ای که عملگر روشون کار می‌کنه رو جستجو کنه و ببینه آیا عملگر تعریف شده توسط کاربری برای ترکیب عملگر و tag(s) وجود داره یا نه. ولی، parser موقعیت‌های خاص رو تشخیص می‌ده و ویژگی‌های زیر رو ارائه می‌ده:</p>
<p>Parser عملگرهایی مثل "+=" رو به عنوان دنباله‌ای از "+" و "=" تشخیص می‌ده و اگر در دسترس باشه یک عملگر تعریف شده توسط کاربر "+" و/یا یک عملگر تعریف شده توسط کاربر "=" رو فراخوانی می‌کنه. در برنامه مثال، خط "chksum = chksum + value" ممکن بود به "chksum += value" خلاصه بشه.</p>
<p>Parser عملگرهای جابه‌جایی ("+", "*", "==", و "!=") رو تشخیص می‌ده و operand های یک عملگر جابه‌جایی رو عوض می‌کنه اگر این کار تطبیق با یک عملگر تعریف شده توسط کاربر ایجاد کنه. مثلاً، معمولاً نیازی نیست هم</p>
<p><code>ones:operator+(ones:a, b)</code></p>
<p>و هم</p>
<p><code>ones:operator+(a, ones:b)</code></p>
<p>رو پیاده‌سازی کنی (پیاده‌سازی هر دو تابع معتبر هست، و در صورتی مفیده که عملگر تعریف شده توسط کاربر نباید جابه‌جایی باشه).</p>
<ul>
<li>
<p>عملگرهای Prefix و postfix به صورت خودکار handle می‌شن. فقط نیاز داری یک user operator برای عملگرهای "++" و "--" برای یک tag تعریف کنی.</p>
</li>
<li>
<p>Parser عملگر "!" رو به صورت ضمنی در مورد تستی بدون مقایسه صریح فراخوانی می‌کنه. مثلاً، در statement "if (var) ..." وقتی "var" tag "ones:" داره، عملگر تعریف شده توسط کاربر "!" برای var فراخوانی می‌شه. عملگر "!" بنابراین به عنوان عملگر "test for zero" هم عمل می‌کنه. (در محاسبات one's complement، هم bit pattern های "all-ones" و هم "all-zeros" صفر رو نمایش می‌دن.)</p>
</li>
<li>
<p>عملگر assignment تعریف شده توسط کاربر به صورت ضمنی برای آرگومنت تابعی که "by value" پاس داده می‌شه فراخوانی می‌شه وقتی نام‌های tag آرگومنت‌های رسمی و واقعی با نام‌های tag سمت چپ و راست عملگر مطابقت داشته باشن. به عبارت دیگه، pawn parser شبیه‌سازی می‌کنه که "pass by value" از طریق assignment اتفاق می‌افته. عملگر تعریف شده توسط کاربر برای آرگومنت‌های تابعی که "by reference" پاس داده می‌شن فراخوانی نمی‌شه.</p>
</li>
<li>
<p>اگر می‌خوای یک عملیات رو ممنوع کنی، می‌تونی عملگر رو "forward declare" کنی بدون اینکه هیچ‌وقت تعریفش کنی (صفحه 82 رو ببین). این کار وقتی عملگر تعریف شده توسط کاربر invoke می‌شه یک خطا flag می‌کنه. مثلاً، برای ممنوع کردن عملگر "%" (باقی‌مانده بعد از تقسیم) روی مقادیر floating point، می‌تونی خط: <code>forward Float: operator%(Float: a, Float: b)</code> رو اضافه کنی</p>
</li>
</ul>
<p>عملگرهای تعریف شده توسط کاربر می‌تونن به صورت اختیاری "stock" یا "native" اعلان بشن. در مورد یک تابع عملگر native، تعریف باید یک نام خارجی شامل بشه. مثلاً (وقتی، در سمت host، تابع native float_add نامیده می‌شه):</p>
<p>فهرست: تابع native operator+</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">native Float</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>+</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Float</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Float</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> float_add</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>عملگر assignment تعریف شده توسط کاربر مورد خاصی هست، چون عملگری هست که side effect داره. اگرچه عملگر ظاهر یک عملگر binary رو داره، "نتیجه expression"ش مقدار سمت راست هست —عملگر assignment یک عملگر "null" می‌بود اگر side-effect نداشت. در pawn یک عملگر assignment تعریف شده توسط کاربر اینطوری اعلان می‌شه:</p>
<p>فهرست: تابع operator=</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>=</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> ones</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a </span><span class="token operator" style=color:#393A34>>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>?</span><span class="token plain"> a </span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>~</span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>-</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>عملگر تعریف شده توسط کاربر "=" در این تعریف مثل یک عملگر unary به نظر می‌رسه، ولی با این حال مورد خاصی هست. برخلاف عملگرهای دیگه، tag مقدار برگشتی برای عملگر تعریف شده توسط کاربر مهم هست: pawn parser از tag های آرگومنت و مقدار برگشتی برای پیدا کردن یک عملگر تعریف شده توسط کاربر مطابق استفاده می‌کنه.</p>
<p>تابع مثال بالا یک کاربرد معمول برای یک عملگر assignment تعریف شده توسط کاربر هست: برای coerce/convert خودکار یک مقدار بدون tag به یک مقدار با tag، و به صورت اختیاری تغییر نمایش حافظه مقدار در فرآیند. به طور خاص، statement "new ones<!-- -->:A<!-- --> = -5" باعث می‌شه عملگر تعریف شده توسط کاربر اجرا بشه، و برای ثابت -5 عملگر "~(- -5)"، یا ~5، یا −6 برمی‌گردونه.∗</p>
<hr>
<p><code>Tags: 68</code></p>
<p><code>اعلان Forward: 82</code></p>
<p><code>"Call by value" در مقابل "call by reference": 71</code></p>
<p><code>توابع Native: 85</code></p>
<p><code>Literal های Rational: 98</code></p>
<p><code>#pragma rational: 121</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-محاسبات-floating-point-و-fixed-point>• محاسبات Floating point و fixed point<a href=#-محاسبات-floating-point-و-fixed-point class=hash-link aria-label="لینک مستقیم به • محاسبات Floating point و fixed point" title="لینک مستقیم به • محاسبات Floating point و fixed point">​</a></h3>
<p>pawn فقط پشتیبانی ذاتی برای محاسبات integer داره (دامنه: "اعداد کامل"، هم مثبت و هم منفی). پشتیبانی برای محاسبات floating point یا fixed point باید از طریق توابع (native) پیاده‌سازی بشه. عملگرهای کاربر، بعد، اجازه نمادگذاری طبیعی‌تری از expression ها با اعداد fixed یا floating point رو می‌دن.</p>
<p>pawn parser پشتیبانی برای مقادیر literal با بخش کسری داره، که اونها رو "اعداد rational" می‌نامه. پشتیبانی برای literal های rational باید صریحاً با یک #pragma فعال بشه. #pragma نشون می‌ده که اعداد rational چطور باید ذخیره بشن —floating point یا fixed point. برای مقادیر rational fixed point، #pragma همچنین دقت رو در decimal ها مشخص می‌کنه. دو مثال برای #pragma:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token macro property directive-hash" style=color:#36acaa>#</span><span class="token macro property directive keyword" style=color:#00009f>pragma</span><span class="token macro property" style=color:#36acaa> </span><span class="token macro property expression" style=color:#36acaa>rational Float </span><span class="token macro property comment" style=color:#999988;font-style:italic>/* floating point format */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token macro property directive-hash" style=color:#36acaa>#</span><span class="token macro property directive keyword" style=color:#00009f>pragma</span><span class="token macro property" style=color:#36acaa> </span><span class="token macro property expression" style=color:#36acaa>rational </span><span class="token macro property expression function" style=color:#d73a49>Fixed</span><span class="token macro property expression punctuation" style=color:#393A34>(</span><span class="token macro property expression number" style=color:#36acaa>3</span><span class="token macro property expression punctuation" style=color:#393A34>)</span><span class="token macro property expression" style=color:#36acaa> </span><span class="token macro property comment" style=color:#999988;font-style:italic>/* fixed point, with 3 decimals */</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<hr>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id=-cpu-های-مدرن-از-محاسبات-integer-twos-complement-استفاده-میکنن-برای-مقادیر-مثبت-نمایش-bitwise-یک-مقدار-در-ones-complement-و-twos-complement-یکسان-هست-ولی-نمایشها-برای-مقادیر-منفی-متفاوت-هستن-مثلاً-همون-bit-pattern-که-در-ones-complement-یعنی--5-در-twos-complement--6-هست>∗ CPU های مدرن از محاسبات integer two's complement استفاده می‌کنن. برای مقادیر مثبت، نمایش bitwise یک مقدار در one's complement و two's complement یکسان هست، ولی نمایش‌ها برای مقادیر منفی متفاوت هستن. مثلاً، همون bit pattern که در one's complement یعنی -5 در two's complement -6 هست.<a href=#-cpu-های-مدرن-از-محاسبات-integer-twos-complement-استفاده-میکنن-برای-مقادیر-مثبت-نمایش-bitwise-یک-مقدار-در-ones-complement-و-twos-complement-یکسان-هست-ولی-نمایشها-برای-مقادیر-منفی-متفاوت-هستن-مثلاً-همون-bit-pattern-که-در-ones-complement-یعنی--5-در-twos-complement--6-هست class=hash-link aria-label="لینک مستقیم به ∗ CPU های مدرن از محاسبات integer two's complement استفاده می‌کنن. برای مقادیر مثبت، نمایش bitwise یک مقدار در one's complement و two's complement یکسان هست، ولی نمایش‌ها برای مقادیر منفی متفاوت هستن. مثلاً، همون bit pattern که در one's complement یعنی -5 در two's complement -6 هست." title="لینک مستقیم به ∗ CPU های مدرن از محاسبات integer two's complement استفاده می‌کنن. برای مقادیر مثبت، نمایش bitwise یک مقدار در one's complement و two's complement یکسان هست، ولی نمایش‌ها برای مقادیر منفی متفاوت هستن. مثلاً، همون bit pattern که در one's complement یعنی -5 در two's complement -6 هست.">​</a></h6>
<hr>
<p>چون یک مقدار fixed point هنوز باید در یک cell جا بشه، تعداد decimal ها تأثیر مستقیمی روی محدوده یک مقدار fixed point داره. برای یک مقدار fixed point با 3 decimal، محدوده −2, 147, 482 . . . + 2, 147, 482 خواهد بود.</p>
<p>فرمت برای یک عدد rational فقط یک بار برای کل برنامه pawn می‌تونه مشخص بشه. در یک پیاده‌سازی معمولاً یا پشتیبانی floating point یا پشتیبانی fixed point انتخاب می‌شه. همونطور که بالا گفته شد، برای پیاده‌سازی واقعی محاسبات floating point یا fixed point، pawn نیاز به کمک توابع (native) و عملگرهای تعریف شده توسط کاربر داره. جای خوبی برای قرار دادن #pragma برای پشتیبانی عدد rational در include file ای هست که توابع و عملگرها رو هم تعریف می‌کنه.</p>
<p>include file † برای محاسبات fixed point شامل تعریف‌هایی مثل اینه:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">native Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>*</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> fmul</span><br></span><span class=token-line style=color:#393A34><span class="token plain">native Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>/</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> fdiv</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>عملگرهای تعریف شده توسط کاربر برای ضرب و تقسیم دو عدد fixed point مستقیماً به توابع native fmul و fdiv alias شدن. host application باید، بعد، این توابع native رو فراهم کنه.</p>
<p>یک عملگر native تعریف شده توسط کاربر دیگه برای تبدیل خودکار یک integer به fixed point راحته، اگر به متغیری با tag "Fixed:" assign بشه:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">native Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>=</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">oper</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> fixed</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>با این تعریف، می‌تونی "new Fixed: fract = 3" بگی و مقدار وقتی در متغیر fract ذخیره می‌شه به 3.000 تبدیل می‌شه. همونطور که در بخش عملگرهای تعریف شده توسط کاربر توضیح داده شد، عملگر assignment برای آرگومنت‌های تابعی که by value پاس داده می‌شن هم اجرا می‌شه. در expression "new Fixed: root = sqroot(16)" (پیاده‌سازی تابع sqroot رو در صفحه 79 ببین)، عملگر assignment تعریف شده توسط کاربر روی آرگومنت 16 فراخوانی می‌شه.</p>
<p>برای جمع کردن دو مقدار fixed point با هم، عملگر پیش‌فرض "+" کافی هست، و همینطور برای تفریق. اضافه کردن یک عدد معمولی (integer) به یک عدد fixed point متفاوت هست: مقدار معمولی باید قبل از اضافه کردن scale بشه. بنابراین، include file عملگرهایی برای این منظور هم پیاده‌سازی می‌کنه:</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id=-یادداشت-کاربردی-fixed-point-support-library-رو-برای-جایی-که-include-file-رو-بگیری-ببین>† یادداشت کاربردی "Fixed Point Support Library" رو برای جایی که include file رو بگیری ببین.<a href=#-یادداشت-کاربردی-fixed-point-support-library-رو-برای-جایی-که-include-file-رو-بگیری-ببین class=hash-link aria-label='لینک مستقیم به † یادداشت کاربردی "Fixed Point Support Library" رو برای جایی که include file رو بگیری ببین.' title='لینک مستقیم به † یادداشت کاربردی "Fixed Point Support Library" رو برای جایی که include file رو بگیری ببین.'>​</a></h6>
<p>فهرست: عملگرهای جمعی، جابه‌جایی و غیرجابه‌جایی</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">stock Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>+</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> val2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> val1 </span><span class="token operator" style=color:#393A34>+</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>fixed</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">val2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">stock Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>-</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> val2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> val1 </span><span class="token operator" style=color:#393A34>-</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>fixed</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">val2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">stock Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>-</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">val1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>fixed</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">val1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>-</span><span class="token plain"> val2</span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>عملگر "+" جابه‌جایی هست، پس یک پیاده‌سازی هر دو مورد رو handle می‌کنه. برای عملگر "-"، هر دو مورد باید جداگانه پیاده‌سازی بشن.</p>
<p>در نهایت، include file استفاده از عملگر modulus ("%") روی مقادیر fixed point رو ممنوع می‌کنه: modulus فقط برای مقادیر integer قابل اعمال هست:</p>
<p>فهرست: عملگرهای ممنوع روی مقادیر fixed point</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">forward Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>%</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">forward Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>%</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> val2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">forward Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> operator</span><span class="token operator" style=color:#393A34>%</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">val1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> Fixed</span><span class="token operator" style=color:#393A34>:</span><span class="token plain"> val2</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span></code></pre></div></div>
<p>به دلیل حضور اعلان (forward) عملگر، pawn parser سعی می‌کنه از عملگر تعریف شده توسط کاربر به جای عملگر پیش‌فرض "%" استفاده کنه. با پیاده‌سازی نکردن عملگر، parser بعداً یک پیام خطا صادر می‌کنه.</p>
<p><code>عملگرهای تعریف شده توسط کاربر: 86</code></p>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-call-by-value-و-call-by-reference>• Call by Value و Call by Reference<a href=#-call-by-value-و-call-by-reference class=hash-link aria-label="لینک مستقیم به • Call by Value و Call by Reference" title="لینک مستقیم به • Call by Value و Call by Reference">​</a></h3>
<p>در Pawn، آرگومنت‌های تابع می‌تونن به دو روش پاس داده بشن: by value و by reference.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=call-by-value>Call by value<a href=#call-by-value class=hash-link aria-label="لینک مستقیم به Call by value" title="لینک مستقیم به Call by value">​</a></h4>
<p>در این روش، مقدار متغیر به تابع پاس داده می‌شه. یک کپی از متغیر ایجاد می‌شه و تابع روی کپی کار می‌کنه، نه متغیر اصلی. هر تغییری که داخل تابع روی متغیر انجام بشه روی متغیر اصلی تأثیر نمی‌ذاره.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token function" style=color:#d73a49>swap</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	new c </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> a</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	a </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	b </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>main</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	new x </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>10</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> y </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>20</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><span class="token function" style=color:#d73a49>printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"The value of x is %d and value of y is %d, before calling 'swap'."</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> x</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> y</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><span class="token function" style=color:#d73a49>swap</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">x</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> y</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><span class="token function" style=color:#d73a49>printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"The value of x is %d and value of y is %d, after calling 'swap'."</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> x</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> y</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p>خروجی</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">The value of x is 10 and value of y is 20, before calling 'swap'.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">The value of x is 10 and value of y is 20, after calling 'swap'.</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=call-by-reference>Call by reference<a href=#call-by-reference class=hash-link aria-label="لینک مستقیم به Call by reference" title="لینک مستقیم به Call by reference">​</a></h4>
<p>در این روش، آدرس متغیر به تابع پاس داده می‌شه. تابع روی متغیر اصلی کار می‌کنه و هر تغییری که داخل تابع روی متغیر انجام بشه در متغیر اصلی منعکس می‌شه.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token function" style=color:#d73a49>swap</span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>&</span><span class="token plain">a</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>&</span><span class="token plain">b</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	new c </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> a</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	a </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> b</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	b </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> c</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>main</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	new x </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>10</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> y </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>20</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><span class="token function" style=color:#d73a49>printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"The value of x is %d and value of y is %d, before calling 'swap'."</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> x</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> y</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><span class="token function" style=color:#d73a49>swap</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">x</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> y</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><span class="token function" style=color:#d73a49>printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"The value of x is %d and value of y is %d, after calling 'swap'."</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> x</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> y</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p>خروجی</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">The value of x is 10 and value of y is 20, before calling 'swap'.</span><br></span><span class=token-line style=color:#393A34><span class="token plain">The value of x is 20 and value of y is 10, after calling 'swap'.</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=-recursion--بازگشت-تابع>• Recursion / بازگشت تابع<a href=#-recursion--بازگشت-تابع class=hash-link aria-label="لینک مستقیم به • Recursion / بازگشت تابع" title="لینک مستقیم به • Recursion / بازگشت تابع">​</a></h3>
<p>Recursion در برنامه‌نویسی به فرآیند فراخوانی یک تابع توسط خودش برای حل یک مسئله اشاره می‌کنه. این یک مفهوم بنیادی هست که برای حل مسائلی که می‌تونن به نمونه‌های کوچک‌تر همون مسئله تقسیم بشن استفاده می‌شه. Recursion از دو جزء اصلی تشکیل شده: base case ها و recursive case ها.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=base-case>Base Case:<a href=#base-case class=hash-link aria-label="لینک مستقیم به Base Case:" title="لینک مستقیم به Base Case:">​</a></h5>
<p>هر تابع بازگشتی باید یک یا چند base case داشته باشه. base case شرایطی هست که تحتش تابع از فراخوانی خودش دست می‌کشه و مستقیماً یک نتیجه برمی‌گردونه. بدون base case ها، recursion بی‌نهایت ادامه پیدا می‌کرد و باعث stack overflow می‌شد. بخش Stack/Heap رو بخون تا بیشتر بدونی.</p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id=recursive-case>Recursive Case:<a href=#recursive-case class=hash-link aria-label="لینک مستقیم به Recursive Case:" title="لینک مستقیم به Recursive Case:">​</a></h5>
<p>recursive case جایی هست که تابع خودش رو برای حل نمونه کوچک‌تری از مسئله فراخوانی می‌کنه. هر فراخوانی بازگشتی باید مسئله رو به base case نزدیک‌تر کنه.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=مثال>مثال<a href=#مثال class=hash-link aria-label="لینک مستقیم به مثال" title="لینک مستقیم به مثال">​</a></h4>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">stock </span><span class="token function" style=color:#d73a49>factorial</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">n</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Base case: factorial of 0 is 1</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">n </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Recursive case: n! = n * (n - 1)!</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>else</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">        </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> n </span><span class="token operator" style=color:#393A34>*</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>factorial</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">n </span><span class="token operator" style=color:#393A34>-</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>main</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new num </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new result </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>factorial</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">num</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Factorial of %d is %d"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> num</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> result</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// Output: Factorial of 3 is 6</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=نمایش-خروجی>نمایش خروجی<a href=#نمایش-خروجی class=hash-link aria-label="لینک مستقیم به نمایش خروجی" title="لینک مستقیم به نمایش خروجی">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">main() \\ main function from where execution of program starts</span><br></span><span class=token-line style=color:#393A34><span class="token plain">new num = 3; \\ creates a num variable</span><br></span><span class=token-line style=color:#393A34><span class="token plain">new result = factorial(num); \\ create a result variable and calls the factorial() with passing value of num, factorial(5)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">factorial(3) \\ factorial initiate</span><br></span><span class=token-line style=color:#393A34><span class="token plain">   if(3 == 0) \\ checks the condition which is false</span><br></span><span class=token-line style=color:#393A34><span class="token plain">   else{ 3 * factorial(3-1) } \\ 3 * and calls the factorial(2)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">      factorial(2) \\ factorial initiate again</span><br></span><span class=token-line style=color:#393A34><span class="token plain">         if(2 == 0) \\ checks the condition which is false</span><br></span><span class=token-line style=color:#393A34><span class="token plain">         else{ 2 * factorial(2-1) } \\ 3 * 2 * and calls the factorial(1)</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            factorial(1) \\ factorial initiate again</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            if(1 == 0) \\ checks the condition which is false</span><br></span><span class=token-line style=color:#393A34><span class="token plain">            else{ 1 * factorial(1-1) } \\ 3 * 2 * 1 and calls the factorial(0)</span><br></span><span class=token-line style=color:#393A34><span class="token plain"> 	       factorial(0) \\ factorial initiate again</span><br></span><span class=token-line style=color:#393A34><span class="token plain">               if(0 == 0) return 1 \\ checks the conition which is true and return 1</span><br></span><span class=token-line style=color:#393A34><span class="token plain">		\\ at the final call 3 * 2 * 1 * 1</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id=حافظه-stack>حافظه Stack<a href=#حافظه-stack class=hash-link aria-label="لینک مستقیم به حافظه Stack" title="لینک مستقیم به حافظه Stack">​</a></h3>
<p>stack ناحیه‌ای از حافظه هست که برای ذخیره متغیرهای محلی، اطلاعات فراخوانی تابع، و داده‌های control flow استفاده می‌شه. به روش Last-In-First-Out (LIFO) کار می‌کنه، یعنی آخرین آیتمی که روی stack push شده اولین چیزی هست که pop می‌شه.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=مثال-stack-overflow>مثال (Stack Overflow)<a href=#مثال-stack-overflow class=hash-link aria-label="لینک مستقیم به مثال (Stack Overflow)" title="لینک مستقیم به مثال (Stack Overflow)">​</a></h4>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token macro property directive-hash" style=color:#36acaa>#</span><span class="token macro property directive keyword" style=color:#00009f>pragma</span><span class="token macro property" style=color:#36acaa> </span><span class="token macro property expression" style=color:#36acaa>dynamic </span><span class="token macro property expression number" style=color:#36acaa>35</span><span class="token macro property expression" style=color:#36acaa> </span><span class="token macro property comment" style=color:#999988;font-style:italic>// (35 * 4 bytes, a cell size) #pragma dynamic [cells] helps to modify the size of stack, read docs/scripting/language/Directives to know more about #pragma</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>main</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><span class="token function" style=color:#d73a49>grow_stack</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token function" style=color:#d73a49>grow_stacK</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">n</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"> </span><span class="token comment" style=color:#999988;font-style:italic>// recursive function</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><span class="token function" style=color:#d73a49>printf</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"N: %d"</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> n</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">	</span><span class="token function" style=color:#d73a49>grow_stacK</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">n</span><span class="token operator" style=color:#393A34>+</span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id=خروجی>خروجی<a href=#خروجی class=hash-link aria-label="لینک مستقیم به خروجی" title="لینک مستقیم به خروجی">​</a></h4>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-text codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">N: 1</span><br></span><span class=token-line style=color:#393A34><span class="token plain">N: 2</span><br></span><span class=token-line style=color:#393A34><span class="token plain">N: 3</span><br></span><span class=token-line style=color:#393A34><span class="token plain">.. .</span><br></span><span class=token-line style=color:#393A34><span class="token plain">Stack/heap collision (insufficient stack size)</span><br></span></code></pre></div></div>
<p><img decoding=async loading=lazy src=https://i.imgur.com/ZaIVUkJ.png alt=Stack class=img_ev3q></p>
<p><a href=/fa/docs/scripting/language/reference/00-Contents>برگشت به فهرست</a></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class=col><a href=https://github.com/openmultiplayer/web/edit/master/frontend/i18n/fa/docusaurus-plugin-content-docs/current/scripting/language/reference/04-Functions.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>ویرایش مطالب این صفحه</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="صفحات مستندات"><a class="pagination-nav__link pagination-nav__link--prev" href=/fa/docs/scripting/language/reference/Data-and-declarations><div class=pagination-nav__sublabel>قبلی</div><div class=pagination-nav__label>Data-and-declarations</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/fa/docs/scripting/language/reference/The-preprocessor><div class=pagination-nav__sublabel>بعدی</div><div class=pagination-nav__label>The-preprocessor</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href=#-فراخوانی-توابع class="table-of-contents__link toc-highlight">• فراخوانی توابع</a><li><a href=#-named-parameter-ها-در-مقابل-positional-parameter-ها class="table-of-contents__link toc-highlight">• Named parameter ها در مقابل positional parameter ها</a><li><a href=#-مقادیر-پیشفرض-آرگومنتهای-تابع class="table-of-contents__link toc-highlight">• مقادیر پیش‌فرض آرگومنت‌های تابع</a><li><a href=#-عملگر-sizeof-و-آرگومنتهای-پیشفرض-تابع class="table-of-contents__link toc-highlight">• عملگر sizeof و آرگومنت‌های پیش‌فرض تابع</a><li><a href=#-آرگومنتها-با-نامهای-tag class="table-of-contents__link toc-highlight">• آرگومنت‌ها با نام‌های tag</a><li><a href=#-آرگومنتهای-متغیر class="table-of-contents__link toc-highlight">• آرگومنت‌های متغیر</a><li><a href=#-قوانین-coercion class="table-of-contents__link toc-highlight">• قوانین coercion</a><li><a href=#-بازگشت-recursion class="table-of-contents__link toc-highlight">• بازگشت (Recursion)</a><li><a href=#-اعلانهای-forward class="table-of-contents__link toc-highlight">• اعلان‌های Forward</a><li><a href=#-state-classifier-ها class="table-of-contents__link toc-highlight">• State classifier ها</a><li><a href=#-توابع-public-تابع-main class="table-of-contents__link toc-highlight">• توابع Public، تابع main</a><li><a href=#-توابع-static class="table-of-contents__link toc-highlight">• توابع Static</a><li><a href=#-توابع-stock class="table-of-contents__link toc-highlight">• توابع Stock</a><li><a href=#-توابع-native class="table-of-contents__link toc-highlight">• توابع Native</a><li><a href=#-عملگرهای-تعریف-شده-توسط-کاربر class="table-of-contents__link toc-highlight">• عملگرهای تعریف شده توسط کاربر</a><li><a href=#-محاسبات-floating-point-و-fixed-point class="table-of-contents__link toc-highlight">• محاسبات Floating point و fixed point</a><li><a href=#-call-by-value-و-call-by-reference class="table-of-contents__link toc-highlight">• Call by Value و Call by Reference</a><li><a href=#-recursion--بازگشت-تابع class="table-of-contents__link toc-highlight">• Recursion / بازگشت تابع</a><li><a href=#حافظه-stack class="table-of-contents__link toc-highlight">حافظه Stack</a></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>مستندات</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/fa/docs>معرفی</a><li class=footer__item><a class=footer__link-item href=/fa/docs>مهاجرت به open.mp</a><li class=footer__item><a class=footer__link-item href=/fa/docs/server/config.json>config.json</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>جامعه</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://discord.gg/samp target=_blank rel="noopener noreferrer" class=footer__link-item>دیسکورد<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/openmultiplayer/open.mp target=_blank rel="noopener noreferrer" class=footer__link-item>گیت‌هاب<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://opencollective.com/openmultiplayer target=_blank rel="noopener noreferrer" class=footer__link-item>حمایت مالی<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://youtube.com/openmultiplayer target=_blank rel="noopener noreferrer" class=footer__link-item>یوتیوب<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://x.com/openmultiplayer target=_blank rel="noopener noreferrer" class=footer__link-item>ایکس<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>بیشتر</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/fa/servers>سرورها</a><li class=footer__item><a class=footer__link-item href=/fa/blog>وبلاگ</a><li class=footer__item><a class=footer__link-item href=/fa/animations>انیمیشن‌ها</a><li class=footer__item><a class=footer__link-item href=/fa/uid>تولیدکننده UID</a><li class=footer__item><a href=https://sa-mp.mp/ target=_blank rel="noopener noreferrer" class=footer__link-item>SA-MP<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/fa/images/assets/logo.svg alt="open.mp logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src=/fa/images/assets/logo.svg alt="open.mp logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class=footer__copyright>حق نشر © 2025 open.mp. ساخته شده با Docusaurus.</div></div></div></footer></div>