<!doctype html><html lang=bs dir=ltr class="blog-wrapper blog-post-page plugin-blog plugin-id-default" data-has-hydrated=false><meta charset=UTF-8><meta name=generator content="Docusaurus v3.8.1"><title data-rh=true>Testing in open.mp | open.mp</title><meta data-rh=true name=viewport content="width=device-width, initial-scale=1.0"><meta data-rh=true name=twitter:card content=summary_large_image><meta data-rh=true property=og:image content=https://open.mp/bs/images/assets/wordmark-coloured-bg.png><meta data-rh=true name=twitter:image content=https://open.mp/bs/images/assets/wordmark-coloured-bg.png><meta data-rh=true property=og:url content=https://open.mp/bs/blog/debugging><meta data-rh=true property=og:locale content=bs><meta data-rh=true property=og:locale:alternate content=en><meta data-rh=true property=og:locale:alternate content=es><meta data-rh=true property=og:locale:alternate content=ru><meta data-rh=true property=og:locale:alternate content=ar><meta data-rh=true property=og:locale:alternate content=de><meta data-rh=true property=og:locale:alternate content=fil><meta data-rh=true property=og:locale:alternate content=fr><meta data-rh=true property=og:locale:alternate content=fa><meta data-rh=true property=og:locale:alternate content=hu><meta data-rh=true property=og:locale:alternate content=id><meta data-rh=true property=og:locale:alternate content=it><meta data-rh=true property=og:locale:alternate content=nl><meta data-rh=true property=og:locale:alternate content=pl><meta data-rh=true property=og:locale:alternate content=pt_BR><meta data-rh=true property=og:locale:alternate content=ro><meta data-rh=true property=og:locale:alternate content=sl><meta data-rh=true property=og:locale:alternate content=sr><meta data-rh=true property=og:locale:alternate content=ta><meta data-rh=true property=og:locale:alternate content=th><meta data-rh=true property=og:locale:alternate content=tr><meta data-rh=true property=og:locale:alternate content=vi><meta data-rh=true property=og:locale:alternate content=zh_CN><meta data-rh=true property=og:locale:alternate content=zh_TW><meta data-rh=true name=docusaurus_locale content=bs><meta data-rh=true name=docusaurus_tag content=default><meta data-rh=true name=docsearch:language content=bs><meta data-rh=true name=docsearch:docusaurus_tag content=default><meta data-rh=true property=og:title content="Testing in open.mp | open.mp"><meta data-rh=true name=description content='Testing in SA:MP has always been challenging, but open.mp introduces new tools to make it easier and more efficient. With an open-source codebase, enhanced debugging tools, and a powerful new "mock" library for simulating player interactions, testing is now more automated and reliable than ever.'><meta data-rh=true property=og:description content='Testing in SA:MP has always been challenging, but open.mp introduces new tools to make it easier and more efficient. With an open-source codebase, enhanced debugging tools, and a powerful new "mock" library for simulating player interactions, testing is now more automated and reliable than ever.'><meta data-rh=true property=og:type content=article><meta data-rh=true property=article:published_time content=2020-04-06T00:00:00.000Z><link data-rh=true rel=icon href=/bs/favicon.ico><link data-rh=true rel=canonical href=https://open.mp/bs/blog/debugging><link data-rh=true rel=alternate href=https://open.mp/blog/debugging hreflang=en><link data-rh=true rel=alternate href=https://open.mp/es/blog/debugging hreflang=es><link data-rh=true rel=alternate href=https://open.mp/ru/blog/debugging hreflang=ru><link data-rh=true rel=alternate href=https://open.mp/ar/blog/debugging hreflang=ar><link data-rh=true rel=alternate href=https://open.mp/bs/blog/debugging hreflang=bs><link data-rh=true rel=alternate href=https://open.mp/de/blog/debugging hreflang=de><link data-rh=true rel=alternate href=https://open.mp/fil/blog/debugging hreflang=fil><link data-rh=true rel=alternate href=https://open.mp/fr/blog/debugging hreflang=fr><link data-rh=true rel=alternate href=https://open.mp/fa/blog/debugging hreflang=fa><link data-rh=true rel=alternate href=https://open.mp/hu/blog/debugging hreflang=hu><link data-rh=true rel=alternate href=https://open.mp/id/blog/debugging hreflang=id><link data-rh=true rel=alternate href=https://open.mp/it/blog/debugging hreflang=it><link data-rh=true rel=alternate href=https://open.mp/nl/blog/debugging hreflang=nl><link data-rh=true rel=alternate href=https://open.mp/pl/blog/debugging hreflang=pl><link data-rh=true rel=alternate href=https://open.mp/pt-BR/blog/debugging hreflang=pt-BR><link data-rh=true rel=alternate href=https://open.mp/ro/blog/debugging hreflang=ro><link data-rh=true rel=alternate href=https://open.mp/sl/blog/debugging hreflang=sl><link data-rh=true rel=alternate href=https://open.mp/sr/blog/debugging hreflang=sr><link data-rh=true rel=alternate href=https://open.mp/ta/blog/debugging hreflang=ta><link data-rh=true rel=alternate href=https://open.mp/th/blog/debugging hreflang=th><link data-rh=true rel=alternate href=https://open.mp/tr/blog/debugging hreflang=tr><link data-rh=true rel=alternate href=https://open.mp/vi/blog/debugging hreflang=vi><link data-rh=true rel=alternate href=https://open.mp/zh-CN/blog/debugging hreflang=zh-CN><link data-rh=true rel=alternate href=https://open.mp/zh-TW/blog/debugging hreflang=zh-TW><link data-rh=true rel=alternate href=https://open.mp/blog/debugging hreflang=x-default><link data-rh=true rel=preconnect href=https://AOKXGK39Z7-dsn.algolia.net crossorigin=anonymous><script data-rh=true type=application/ld+json>{"@context":"https://schema.org","@id":"https://open.mp/bs/blog/debugging","@type":"BlogPosting","author":{"@type":"Person","name":"Y_Less"},"datePublished":"2020-04-06T00:00:00.000Z","description":"Testing in SA:MP has always been challenging, but open.mp introduces new tools to make it easier and more efficient. With an open-source codebase, enhanced debugging tools, and a powerful new \"mock\" library for simulating player interactions, testing is now more automated and reliable than ever.","headline":"Testing in open.mp","isPartOf":{"@id":"https://open.mp/bs/blog","@type":"Blog","name":"Blog"},"keywords":[],"mainEntityOfPage":"https://open.mp/bs/blog/debugging","name":"Testing in open.mp","url":"https://open.mp/bs/blog/debugging"}</script><link rel=alternate type=application/rss+xml href=/bs/blog/rss.xml title="open.mp RSS Feed"><link rel=alternate type=application/atom+xml href=/bs/blog/atom.xml title="open.mp Atom Feed"><link rel=search type=application/opensearchdescription+xml title=open.mp href=/bs/opensearch.xml><link rel=stylesheet href=/bs/assets/css/styles.c6f5d753.css><script src=/bs/assets/js/runtime~main.e66e72ed.js defer></script><script src=/bs/assets/js/main.8ca5beed.js defer></script><body class=navigation-with-keyboard><svg xmlns=http://www.w3.org/2000/svg style="display: none;"><defs>
<symbol id=theme-svg-external-link viewBox="0 0 24 24"><path fill=currentColor d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light",e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{for(var[t,e]of new URLSearchParams(window.location.search).entries())if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id=__docusaurus><link rel=preload as=image href=/bs/images/assets/logo-light-trans.svg><link rel=preload as=image href=/bs/images/assets/logo.svg><div role=region aria-label="Skip to main content"><a class=skipToContent_fXgn href=#__docusaurus_skipToContent_fallback>Skip to main content</a></div><nav aria-label=Main class="theme-layout-navbar navbar navbar--fixed-top"><div class=navbar__inner><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded=false class="navbar__toggle clean-btn" type=button><svg width=30 height=30 viewBox="0 0 30 30" aria-hidden=true><path stroke=currentColor stroke-linecap=round stroke-miterlimit=10 stroke-width=2 d="M4 7h22M4 15h22M4 23h22"/></svg></button><a class=navbar__brand href=/bs/><div class=navbar__logo><img src=/bs/images/assets/logo-light-trans.svg alt="open.mp logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src=/bs/images/assets/logo-light-trans.svg alt="open.mp logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Open Multiplayer</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href=/bs/docs/scripting/callbacks/OnActorStreamIn>Docs</a><a aria-current=page class="navbar__item navbar__link navbar__link--active" href=/bs/blog>Blog</a><a href=https://forum.open.mp/ target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Forums</a><a class="navbar__item navbar__link" href=/bs/servers>Servers</a><a class="navbar__item navbar__link" href=/bs/partners>Partners</a><a href=https://opencollective.com/openmultiplayer target=_blank rel="noopener noreferrer" class="navbar__item navbar__link">Donate<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href=# aria-haspopup=true aria-expanded=false role=button class=navbar__link><svg viewBox="0 0 24 24" width=20 height=20 aria-hidden=true class=iconLanguage_nlXk><path fill=currentColor d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/></svg>Bosanski</a><ul class=dropdown__menu><li><a href=/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=en>English</a><li><a href=/es/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=es>Espa√±ol</a><li><a href=/ru/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=ru>–†—É—Å—Å–∫–∏–π</a><li><a href=/ar/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=ar>ÿßŸÑÿπÿ±ÿ®Ÿäÿ©</a><li><a href=/bs/blog/debugging target=_self rel="noopener noreferrer" class="dropdown__link dropdown__link--active" lang=bs>Bosanski</a><li><a href=/de/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=de>Deutsch</a><li><a href=/fil/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=fil>Filipino</a><li><a href=/fr/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=fr>Fran√ßais</a><li><a href=/fa/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=fa>ŸÅÿßÿ±ÿ≥€å</a><li><a href=/hu/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=hu>Magyar</a><li><a href=/id/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=id>Indonesia</a><li><a href=/it/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=it>Italiano</a><li><a href=/nl/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=nl>Nederlands</a><li><a href=/pl/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=pl>Polski</a><li><a href=/pt-BR/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=pt-BR>Portugu√™s (Brasil)</a><li><a href=/ro/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=ro>Rom√¢nƒÉ</a><li><a href=/sl/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=sl>Sloven≈°ƒçina</a><li><a href=/sr/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=sr>–°—Ä–ø—Å–∫–∏</a><li><a href=/ta/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=ta>‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</a><li><a href=/th/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=th>‡πÑ‡∏ó‡∏¢</a><li><a href=/tr/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=tr>T√ºrk√ße</a><li><a href=/vi/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=vi>Ti·∫øng Vi·ªát</a><li><a href=/zh-CN/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=zh-CN>ÁÆÄ‰Ωì‰∏≠Êñá</a><li><a href=/zh-TW/blog/debugging target=_self rel="noopener noreferrer" class=dropdown__link lang=zh-TW>ÁπÅÈ´î‰∏≠Êñá</a></ul></div><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type=button disabled title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill=currentColor d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill=currentColor d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"/></svg><svg viewBox="0 0 24 24" width=24 height=24 aria-hidden=true class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill=currentColor d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"/></svg></button></div><div class=navbarSearchContainer_Bca1><button type=button class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class=DocSearch-Button-Container><svg width=20 height=20 class=DocSearch-Search-Icon viewBox="0 0 20 20" aria-hidden=true><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke=currentColor fill=none fill-rule=evenodd stroke-linecap=round stroke-linejoin=round /></svg><span class=DocSearch-Button-Placeholder>Search</span></span><span class=DocSearch-Button-Keys></span></button></div></div></div><div role=presentation class=navbar-sidebar__backdrop></div></nav><div id=__docusaurus_skipToContent_fallback class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="container margin-vert--lg"><div class=row><aside class="col col--3"><nav class="sidebar_re4s thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_pO2u margin-bottom--md">Recent posts</div><div role=group><h3 class=yearGroupHeading_rMGB>2024</h3><ul class="sidebarItemList_Yudw clean-list"><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/bs/blog/porting>Porting to open.mp</a></ul></div><div role=group><h3 class=yearGroupHeading_rMGB>2023</h3><ul class="sidebarItemList_Yudw clean-list"><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/bs/blog/release-candidate-1>Release Candidate 1</a></ul></div><div role=group><h3 class=yearGroupHeading_rMGB>2022</h3><ul class="sidebarItemList_Yudw clean-list"><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/bs/blog/server-beta-9>SA-MP 0.3.DL compatibility plus other added features and bug fixes - SERVER BETA RELEASE 9</a><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/bs/blog/update-2022>2022 Update - cross-play and beta testing (Happy New Year üéâ)</a></ul></div><div role=group><h3 class=yearGroupHeading_rMGB>2021</h3><ul class="sidebarItemList_Yudw clean-list"><li class=sidebarItem__DBe><a class=sidebarItemLink_mo7H href=/bs/blog/how-to-join-the-team>How can I join the team?</a></ul></div></nav></aside><main class="col col--7"><article class=""><header><h1 class=title_f1Hy>Testing in open.mp</h1><div class="container_mt6G margin-vert--md"><time datetime=2020-04-06T00:00:00.000Z>6. april 2020.</time> ¬∑ <!-- -->7 min read</div><div class="margin-top--md margin-bottom--sm row"><div class="col col--12 authorCol_Hf19"><div class="avatar margin-bottom--sm"><div class="avatar__intro authorDetails_lV9A"><div class=avatar__name><span class=authorName_yefp>Y_Less</span></div><div class=authorSocials_rSDt></div></div></div></div></div></header><div id=__blog-post-container class=markdown><p>Testing in SA<!-- -->:MP<!-- --> has always been challenging, but open.mp introduces new tools to make it easier and more efficient. With an open-source codebase, enhanced debugging tools, and a powerful new "mock" library for simulating player interactions, testing is now more automated and reliable than ever.</p>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class=admonitionHeading_Gvgb><span class=admonitionIcon_Rf37><svg viewBox="0 0 16 16"><path fill-rule=evenodd d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"/></svg></span>warning</div><div class=admonitionContent_BuS1><p>The content of the following post is out of date and has no reference to the current state of open.mp. The post is published here for archival purposes.</div></div>
<p>Testing in SA<!-- -->:MP<!-- --> is not very easy. For the most part it is just connecting to the server and placing prints everywhere. Libraries such as y_testing make writing unit tests much easier, but only for fairly "pure" code - that is, code that runs on the server without much player interaction. You can test a surprising amount of behaviour like this, but it is still limited and doesn't help narrow down issues when they do crop up.</p>
<p>So how does open.mp address this? Well to begin with, the code is open-source, so you have the full range of existing debugging tools such as GDB and Visual Studio available to you for stepping through and inspecting code. We also have plans to add similar tools for pawn scripts themselves.</p>
<p>But the biggest addition is the "mock" library. Very simply, this allows you to create fake players that act exactly like real players, but without any connected client. So any actions performed on them by a script can be read and analysed by another script. Let's take the most simple example possible for a first demonstration - showing a player a checkpoint, and confirming it was sent. With y_testing you do the action and then have to actually ask the player if it happened, which is slow, not repeatable, and just tedious:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">PTEST__ </span><span class="token function" style=color:#d73a49>SetPlayerCheckpoint</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">playerid</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>SetPlayerCheckpoint</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">playerid</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASK</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Do you see a checkpoint in the middle of the world?"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p>Using a library like "Pawn.RakNet" can remove the question, by automating the checking of outgoing packets, but still requires a connected player so can't be automated and repeated:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token keyword" style=color:#00009f>static</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    gCheckpointPlayer</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Float</span><span class="token operator" style=color:#393A34>:</span><span class="token plain">gX</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Float</span><span class="token operator" style=color:#393A34>:</span><span class="token plain">gY</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Float</span><span class="token operator" style=color:#393A34>:</span><span class="token plain">gZ</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    Float</span><span class="token operator" style=color:#393A34>:</span><span class="token plain">gS</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">PTEST__ </span><span class="token function" style=color:#d73a49>SetPlayerCheckpoint</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">playerid</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>SetPlayerCheckpoint</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">playerid</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">gX </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">gY </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">gZ </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">gS </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">gCheckpointPlayer </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> playerid</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">OPacket</span><span class="token operator" style=color:#393A34>:</span><span class="token number" style=color:#36acaa>107</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">playerid</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> BitStream</span><span class="token operator" style=color:#393A34>:</span><span class="token plain">bs</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    gCheckpointPlayer </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> playerid</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>BS_IgnoreBits</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">bs</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>8</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>BS_ReadFloat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">bs</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> gX</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>BS_ReadFloat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">bs</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> gY</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>BS_ReadFloat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">bs</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> gZ</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>BS_ReadFloat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">bs</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> gS</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>return</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p>With open.mp, we have an API similar to that of Pawn.RakNet, but with fake players. So you create a player, without a game instance, and use that exactly like a normal player:</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">TEST__ </span><span class="token function" style=color:#d73a49>SetPlayerCheckpoint</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new playerid </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>Mock_CreatePlayer</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Mr Mock"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Clear all existing packets, for ease of searching.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>Mock_PurgeSent</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">playerid</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Show a checkpoint normally.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>SetPlayerCheckpoint</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">playerid</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Check a "SetCheckpoint" packet was seen.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new MockPacket</span><span class="token operator" style=color:#393A34>:</span><span class="token plain">packet </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>Mock_GetPacket</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">playerid</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"SetCheckpoint"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>!</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>return</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Check the packet has 4 components, each 32 bits.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>MockPacket_Components</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>MockPacket_Bits</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>*</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>32</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Check the various components.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new Float</span><span class="token operator" style=color:#393A34>:</span><span class="token plain">tmp</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>MockPacket_ReadFloat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> tmp</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">tmp </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>MockPacket_ReadFloat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> tmp</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">tmp </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>0.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>MockPacket_ReadFloat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> tmp</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">tmp </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>MockPacket_ReadFloat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> tmp</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">tmp </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p>This code is entirely repeatably testable, self-contained (no global variables and extra callbacks), and simple to expand upon.</p>
<p>But sometimes it isn't quite this simple. If you create an object you can't just check that it was instantly sent to a player, because they might not be anywhere near it and thus the in-built streamer hasn't sent them it yet. To solve this, we first need to go on a slight tangent to explain how basic sync works for things like <code>SetPlayerPos</code>. When you set a player's position with <code>SetPlayerPos</code> the server does NOT update their position internally and for all other players straight away. Instead a <code>SET POSITION</code> command is sent to that one player being moved, they are teleported to the new position, and then report the new position back to the server in their next sync packet. The reason why is basically lag - there may be one or more sync packets still in flight with the old position after setting the new position. So what does this mean for mock players? It means you can't actually set their position, at least not in the normal way. There's no real client, so there's nothing receiving packets (i.e. the set position command), and there's nothing syncing that data back to the server again.</p>
<p>We can generate any mock sync data for the server from mock players, so that is one way to update their position, but it can be a little cumbersome for just one common operation, so there is <code>Mock_SetPlayerPos</code> for exactly this one use-case. But this still isn't quite the whole story, because we need the streamer to run and update with their new position, which happens only periodically (every few milliseconds, depending on the server tick rate). For this we have another mock function - <code>Mock_Tick</code>, which jumps the server time forward by a given number of microseconds (NOT milliseconds). This should absolutely not be used on live servers as it can create all sorts of weirdness with timers and other time sensitive code, but can be used to fake time passing in tests. Note that <code>Mock_Tick(10000)</code> will not delay for 10ms, it will instead jump time forward by 10 milliseconds instantly.</p>
<div class="language-c codeBlockContainer_Ckt0 theme-code-block" style=--prism-color:#393A34;--prism-background-color:#f6f8fa><div class=codeBlockContent_QJqH><pre tabindex=0 class="prism-code language-c codeBlock_bY9V thin-scrollbar" style=color:#393A34;background-color:#f6f8fa><code class=codeBlockLines_e6Vv><span class=token-line style=color:#393A34><span class="token plain">TEST__ </span><span class="token function" style=color:#d73a49>SetPlayerCheckpoint</span><span class="token punctuation" style=color:#393A34>(</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>{</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new playerid </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>Mock_CreatePlayer</span><span class="token punctuation" style=color:#393A34>(</span><span class="token string" style=color:#e3116c>"Mr Mock"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Clear all existing packets, for ease of searching.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>Mock_PurgeSent</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">playerid</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Create an object.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>CreateObject</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>1337</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>100.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>100.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Fake the mock player's position updating to the server, near the object.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>Mock_SetPlayerPos</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">playerid</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>105.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>105.0</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Now FAKE pass some time, so the streamer can run (50ms should do).</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>Mock_Tick</span><span class="token punctuation" style=color:#393A34>(</span><span class="token number" style=color:#36acaa>50000</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Check a "CreateObject" packet was seen.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new MockPacket</span><span class="token operator" style=color:#393A34>:</span><span class="token plain">packet </span><span class="token operator" style=color:#393A34>=</span><span class="token plain"> </span><span class="token function" style=color:#d73a49>Mock_GetPacket</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">playerid</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token string" style=color:#e3116c>"CreateObject"</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token keyword" style=color:#00009f>if</span><span class="token plain"> </span><span class="token punctuation" style=color:#393A34>(</span><span class="token operator" style=color:#393A34>!</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>return</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Check the packet has 4 components, each 32 bits.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>MockPacket_Components</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>)</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>></span><span class="token plain"> </span><span class="token number" style=color:#36acaa>5</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain" style=display:inline-block></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token comment" style=color:#999988;font-style:italic>// Check some of the packet components.</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new </span><span class="token keyword" style=color:#00009f>int</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    new Float</span><span class="token operator" style=color:#393A34>:</span><span class="token plain">tmp</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>MockPacket_ReadInt32</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token keyword" style=color:#00009f>int</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token keyword" style=color:#00009f>int</span><span class="token plain"> </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>1337</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>MockPacket_ReadFloat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>2</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> tmp</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">tmp </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>100.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>MockPacket_ReadFloat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>3</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> tmp</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">tmp </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>100.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token function" style=color:#d73a49>MockPacket_ReadFloat</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">packet</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4</span><span class="token punctuation" style=color:#393A34>,</span><span class="token plain"> tmp</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain">    </span><span class="token function" style=color:#d73a49>ASSERT</span><span class="token punctuation" style=color:#393A34>(</span><span class="token plain">tmp </span><span class="token operator" style=color:#393A34>==</span><span class="token plain"> </span><span class="token number" style=color:#36acaa>4.0</span><span class="token punctuation" style=color:#393A34>)</span><span class="token punctuation" style=color:#393A34>;</span><span class="token plain"></span><br></span><span class=token-line style=color:#393A34><span class="token plain"></span><span class="token punctuation" style=color:#393A34>}</span><br></span></code></pre></div></div>
<p>An important note about <code>Mock_Tick</code>. If you call it as, say <code>Mock_Tick(100000)</code> and have a 1ms timer running, this will instantly trigger the timer to run, but the timer will think it missed its time by a long way (100ms) and will queue itself up again. During the call to <code>Mock_Tick</code> the timer will fire once, but after the current test ends the timer will be queued up a further 99 times, one per tick because it thinks it missed 100 invocation times.</p>
<p>Later we'll cover some higher-level debugging techniques so you can read and write fake packets more easily, instead of one component at a time as in that code, but this introduces the basics on which everything else is built. Hopefully it will make developing and testing code easier for everyone (and ensure the server is more stable as well).</p>
<p>We'll also go much more in to the API design for open.mp tomorrow. It is fully backwards- compatible with SA<!-- -->:MP<!-- -->, but that doesn't mean there isn't parallel room for improvement.</div><footer class=docusaurus-mt-lg><div class="row margin-top--sm theme-blog-footer-edit-meta-row"><div class=col><a href=https://github.com/openmultiplayer/web/edit/master/frontend/blog/blog/2020-04-06-debugging.md target=_blank rel="noopener noreferrer" class=theme-edit-this-page><svg fill=currentColor height=20 width=20 viewBox="0 0 40 40" class=iconEdit_Z9Sw aria-hidden=true><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"/></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><a class="pagination-nav__link pagination-nav__link--prev" href=/bs/blog/scripting-api><div class=pagination-nav__sublabel>Newer post</div><div class=pagination-nav__label>open.mp API design</div></a><a class="pagination-nav__link pagination-nav__link--next" href=/bs/blog/vehicle-sync><div class=pagination-nav__sublabel>Older post</div><div class=pagination-nav__label>Vehicle Sync</div></a></nav></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Documentations</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/bs/docs>Introduction</a><li class=footer__item><a class=footer__link-item href=/bs/docs>open.mp Migration</a><li class=footer__item><a class=footer__link-item href=/bs/docs/server/config.json>config.json</a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>Community</div><ul class="footer__items clean-list"><li class=footer__item><a href=https://discord.gg/samp target=_blank rel="noopener noreferrer" class=footer__link-item>Discord<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://github.com/openmultiplayer/open.mp target=_blank rel="noopener noreferrer" class=footer__link-item>GitHub<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://opencollective.com/openmultiplayer target=_blank rel="noopener noreferrer" class=footer__link-item>Donate<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://youtube.com/openmultiplayer target=_blank rel="noopener noreferrer" class=footer__link-item>YouTube<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a><li class=footer__item><a href=https://x.com/openmultiplayer target=_blank rel="noopener noreferrer" class=footer__link-item>X<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div><div class="theme-layout-footer-column col footer__col"><div class=footer__title>More</div><ul class="footer__items clean-list"><li class=footer__item><a class=footer__link-item href=/bs/servers>Servers</a><li class=footer__item><a class=footer__link-item href=/bs/blog>Blog</a><li class=footer__item><a class=footer__link-item href=/bs/animations>Animations</a><li class=footer__item><a class=footer__link-item href=/bs/uid>UID Generator</a><li class=footer__item><a href=https://sa-mp.mp/ target=_blank rel="noopener noreferrer" class=footer__link-item>SA-MP<svg width=13.5 height=13.5 aria-hidden=true class=iconExternalLink_nPIU><use href=#theme-svg-external-link /></svg></a></ul></div></div><div class="footer__bottom text--center"><div class=margin-bottom--sm><img src=/bs/images/assets/logo.svg alt="open.mp logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src=/bs/images/assets/logo.svg alt="open.mp logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></div><div class=footer__copyright>Copyright ¬© 2025 open.mp. Built with Docusaurus.</div></div></div></footer></div>