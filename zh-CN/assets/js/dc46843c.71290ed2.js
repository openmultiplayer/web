"use strict";(self.webpackChunkomp_web=self.webpackChunkomp_web||[]).push([["53960"],{28289:function(n,e,i){i.r(e),i.d(e,{frontMatter:()=>t,toc:()=>o,default:()=>p,metadata:()=>l,assets:()=>d,contentTitle:()=>a});var l=JSON.parse('{"id":"scripting/callbacks/OnDialogResponse","title":"OnDialogResponse","description":"\u5F53\u73A9\u5BB6\u54CD\u5E94\u901A\u8FC7ShowPlayerDialog\u663E\u793A\u7684\u5BF9\u8BDD\u6846\u65F6\u89E6\u53D1\u8BE5\u56DE\u8C03\u3002\u54CD\u5E94\u65B9\u5F0F\u5305\u62EC\u70B9\u51FB\u6309\u94AE\u3001\u6309\u4E0BENTER/ESC\u952E\u6216\u53CC\u51FB\u5217\u8868\u9879\uFF08\u5217\u8868\u5F0F\u5BF9\u8BDD\u6846\uFF09\u3002","source":"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/scripting/callbacks/OnDialogResponse.md","sourceDirName":"scripting/callbacks","slug":"/scripting/callbacks/OnDialogResponse","permalink":"/zh-CN/docs/scripting/callbacks/OnDialogResponse","draft":false,"unlisted":false,"editUrl":"https://github.com/openmultiplayer/web/edit/master/frontend/docs/scripting/callbacks/OnDialogResponse.md","tags":[{"inline":true,"label":"\u5BF9\u8BDD\u6846","permalink":"/zh-CN/docs/tags/\u5BF9\u8BDD\u6846"}],"version":"current","frontMatter":{"title":"OnDialogResponse","sidebar_label":"OnDialogResponse","description":"\u5F53\u73A9\u5BB6\u54CD\u5E94\u901A\u8FC7ShowPlayerDialog\u663E\u793A\u7684\u5BF9\u8BDD\u6846\u65F6\u89E6\u53D1\u8BE5\u56DE\u8C03\u3002\u54CD\u5E94\u65B9\u5F0F\u5305\u62EC\u70B9\u51FB\u6309\u94AE\u3001\u6309\u4E0BENTER/ESC\u952E\u6216\u53CC\u51FB\u5217\u8868\u9879\uFF08\u5217\u8868\u5F0F\u5BF9\u8BDD\u6846\uFF09\u3002","tags":["\u5BF9\u8BDD\u6846"]},"sidebar":"docsSidebar","previous":{"title":"OnClientMessage","permalink":"/zh-CN/docs/scripting/callbacks/OnClientMessage"},"next":{"title":"OnEnterExitModShop","permalink":"/zh-CN/docs/scripting/callbacks/OnEnterExitModShop"}}'),s=i(85893),r=i(50065);let t={title:"OnDialogResponse",sidebar_label:"OnDialogResponse",description:"\u5F53\u73A9\u5BB6\u54CD\u5E94\u901A\u8FC7ShowPlayerDialog\u663E\u793A\u7684\u5BF9\u8BDD\u6846\u65F6\u89E6\u53D1\u8BE5\u56DE\u8C03\u3002\u54CD\u5E94\u65B9\u5F0F\u5305\u62EC\u70B9\u51FB\u6309\u94AE\u3001\u6309\u4E0BENTER/ESC\u952E\u6216\u53CC\u51FB\u5217\u8868\u9879\uFF08\u5217\u8868\u5F0F\u5BF9\u8BDD\u6846\uFF09\u3002",tags:["\u5BF9\u8BDD\u6846"]},a=void 0,d={},o=[{value:"\u63CF\u8FF0",id:"\u63CF\u8FF0",level:2},{value:"\u8FD4\u56DE\u503C",id:"\u8FD4\u56DE\u503C",level:2},{value:"\u793A\u4F8B",id:"\u793A\u4F8B",level:2},{value:"\u6CE8\u610F",id:"\u6CE8\u610F",level:2},{value:"\u76F8\u5173\u51FD\u6570",id:"\u76F8\u5173\u51FD\u6570",level:2}];function c(n){let e={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.a)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{id:"\u63CF\u8FF0",children:"\u63CF\u8FF0"}),"\n",(0,s.jsx)(e.p,{children:"\u5F53\u73A9\u5BB6\u54CD\u5E94\u901A\u8FC7ShowPlayerDialog\u663E\u793A\u7684\u5BF9\u8BDD\u6846\u65F6\u89E6\u53D1\u8BE5\u56DE\u8C03\u3002\u54CD\u5E94\u65B9\u5F0F\u5305\u62EC\uFF1A"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"\u70B9\u51FB\u6309\u94AE"}),"\n",(0,s.jsx)(e.li,{children:"\u6309\u4E0BENTER/ESC\u952E"}),"\n",(0,s.jsx)(e.li,{children:"\u53CC\u51FB\u5217\u8868\u9879\uFF08\u9488\u5BF9\u5217\u8868\u5F0F\u5BF9\u8BDD\u6846\uFF09"}),"\n"]}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"\u53C2\u6570"}),(0,s.jsx)(e.th,{children:"\u8BF4\u660E"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"playerid"}),(0,s.jsx)(e.td,{children:"\u54CD\u5E94\u5BF9\u8BDD\u6846\u7684\u73A9\u5BB6ID"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"dialogid"}),(0,s.jsx)(e.td,{children:"\u5BF9\u8BDD\u6846ID\uFF08\u4E0EShowPlayerDialog\u4E2D\u8BBE\u7F6E\u7684ID\u5BF9\u5E94\uFF09"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"response"}),(0,s.jsx)(e.td,{children:"\u6309\u94AE\u54CD\u5E94\u503C\uFF1A1=\u5DE6\u6309\u94AE\uFF0C0=\u53F3\u6309\u94AE\uFF08\u82E5\u4EC5\u663E\u793A\u5355\u4E2A\u6309\u94AE\u5219\u59CB\u7EC8\u4E3A1\uFF09"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"listitem"}),(0,s.jsx)(e.td,{children:"\u73A9\u5BB6\u9009\u62E9\u7684\u5217\u8868\u9879ID\uFF08\u4ECE0\u5F00\u59CB\u8BA1\u6570\uFF09\uFF0C\u975E\u5217\u8868\u5F0F\u5BF9\u8BDD\u6846\u8BE5\u503C\u4E3A-1"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"inputtext[]"}),(0,s.jsx)(e.td,{children:"\u73A9\u5BB6\u5728\u8F93\u5165\u6846\u4E2D\u8F93\u5165\u7684\u6587\u672C\u5185\u5BB9 \u6216 \u9009\u4E2D\u7684\u5217\u8868\u9879\u6587\u672C"})]})]})]}),"\n",(0,s.jsx)(e.h2,{id:"\u8FD4\u56DE\u503C",children:"\u8FD4\u56DE\u503C"}),"\n",(0,s.jsx)(e.p,{children:"\u8BE5\u56DE\u8C03\u5728\u6EE4\u955C\u811A\u672C\u4E2D\u603B\u662F\u4F18\u5148\u89E6\u53D1\u3002\u8FD4\u56DE1\u5C06\u963B\u6B62\u5176\u4ED6\u6EE4\u955C\u811A\u672C\u5904\u7406\u8BE5\u56DE\u8C03\u3002"}),"\n",(0,s.jsx)(e.h2,{id:"\u793A\u4F8B",children:"\u793A\u4F8B"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u6D88\u606F\u6846\u6837\u5F0F (DIALOG_STYLE_MSGBOX)"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:'// \u5B9A\u4E49\u5BF9\u8BDD\u6846ID\n#define DIALOG_RULES 1\n\n// \u5728\u67D0\u4E2A\u6307\u4EE4\u4E2D\nShowPlayerDialog(playerid, DIALOG_RULES, DIALOG_STYLE_MSGBOX, "\u670D\u52A1\u5668\u89C4\u5219",\n"- \u7981\u6B62\u4F5C\u5F0A\\n- \u7981\u6B62\u5237\u5C4F\\n- \u5C0A\u91CD\u7BA1\u7406\u5458\\n\\n\u60A8\u662F\u5426\u540C\u610F\u9075\u5B88\u8FD9\u4E9B\u89C4\u5219\uFF1F", "\u540C\u610F", "\u62D2\u7EDD");\n\npublic OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])\n{\n    if (dialogid == DIALOG_RULES)\n    {\n        if (response) // \u70B9\u51FB\u5DE6\u6309\u94AE\u6216\u6309\u4E0BENTER\n        {\n            SendClientMessage(playerid, COLOR_GREEN, "\u611F\u8C22\u60A8\u540C\u610F\u9075\u5B88\u670D\u52A1\u5668\u89C4\u5219\uFF01");\n        }\n        else // \u6309\u4E0BESC\u6216\u70B9\u51FB\u53F3\u6309\u94AE\n        {\n            Kick(playerid);\n        }\n        return 1; // \u8FD4\u56DE1\u8868\u793A\u5DF2\u5904\u7406\u8BE5\u5BF9\u8BDD\u6846\n    }\n\n    return 0; // \u8FD4\u56DE0\u8868\u793A\u672A\u5904\u7406\u5176\u4ED6\u5BF9\u8BDD\u6846\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u8F93\u5165\u6846\u6837\u5F0F (DIALOG_STYLE_INPUT)"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:'#define DIALOG_LOGIN 2\n\n// \u5728\u67D0\u4E2A\u6307\u4EE4\u4E2D\nShowPlayerDialog(playerid, DIALOG_LOGIN, DIALOG_STYLE_INPUT, "\u767B\u5F55",\n"\u8BF7\u8F93\u5165\u60A8\u7684\u5BC6\u7801\uFF1A", "\u767B\u5F55", "\u53D6\u6D88");\n\npublic OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])\n{\n    if (dialogid == DIALOG_LOGIN)\n    {\n        if (!response) // \u6309\u4E0BESC\u6216\u70B9\u51FB\u53F3\u6309\u94AE\n        {\n            Kick(playerid);\n        }\n        else\n        {\n            if (CheckPassword(playerid, inputtext))\n            {\n                SendClientMessage(playerid, COLOR_RED, "\u767B\u5F55\u6210\u529F\uFF01");\n            }\n            else\n            {\n                SendClientMessage(playerid, COLOR_RED, "\u767B\u5F55\u5931\u8D25");\n\n                // \u91CD\u65B0\u663E\u793A\u767B\u5F55\u5BF9\u8BDD\u6846\n                ShowPlayerDialog(playerid, DIALOG_LOGIN, DIALOG_STYLE_INPUT,\n                "\u767B\u5F55", "\u8BF7\u8F93\u5165\u60A8\u7684\u5BC6\u7801\uFF1A", "\u767B\u5F55", "\u53D6\u6D88");\n            }\n        }\n        return 1;\n    }\n\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u5217\u8868\u6837\u5F0F (DIALOG_STYLE_LIST)"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:'#define DIALOG_WEAPONS 3\n\n// \u5728\u67D0\u4E2A\u6307\u4EE4\u4E2D\nShowPlayerDialog(playerid, DIALOG_WEAPONS, DIALOG_STYLE_LIST, "\u6B66\u5668\u5E93",\n"\u6C99\u6F20\u4E4B\u9E70\\nAK-47\\n\u6218\u6597\u9730\u5F39\u67AA", "\u9009\u62E9", "\u5173\u95ED");\n\npublic OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])\n{\n    if (dialogid == DIALOG_WEAPONS)\n    {\n        if (response) // \u70B9\u51FB\u9009\u62E9\u6309\u94AE\u6216\u53CC\u51FB\u5217\u8868\u9879\n        {\n            switch (listitem)\n            {\n                case 0: GivePlayerWeapon(playerid, WEAPON_DEAGLE, 14);   // \u6C99\u6F20\u4E4B\u9E70\n                case 1: GivePlayerWeapon(playerid, WEAPON_AK47, 120);    // AK-47\n                case 2: GivePlayerWeapon(playerid, WEAPON_SHOTGSPA, 28); // \u6218\u6597\u9730\u5F39\u67AA\n            }\n        }\n        return 1;\n    }\n\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"\u8868\u683C\u5217\u8868\u6837\u5F0F (DIALOG_STYLE_TABLIST)"})}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-c",children:'#define DIALOG_WEAPONS 3\n\n// \u5728\u67D0\u4E2A\u6307\u4EE4\u4E2D\nShowPlayerDialog(playerid, DIALOG_WEAPONS, DIALOG_STYLE_TABLIST, "\u6B66\u5668\u5546\u5E97",\n"\u6B66\u5668\\t\u5F39\u836F\\t\u4EF7\u683C\\n\\\nM4\\t120\\t500\\n\\\nMP5\\t90\\t350\\n\\\nAK-47\\t120\\t400",\n"\u8D2D\u4E70", "\u5173\u95ED");\n\npublic OnDialogResponse(playerid, dialogid, response, listitem, inputtext[])\n{\n    if (dialogid == DIALOG_WEAPONS)\n    {\n        if (response) // \u70B9\u51FB\u8D2D\u4E70\u6216\u53CC\u51FB\u6B66\u5668\n        {\n            switch (listitem)\n            {\n                case 0: GivePlayerWeapon(playerid, WEAPON_M4, 120);    // M4\n                case 1: GivePlayerWeapon(playerid, WEAPON_MP5, 90);    // MP5\n                case 2: GivePlayerWeapon(playerid, WEAPON_AK47, 120);  // AK-47\n            }\n        }\n        return 1;\n    }\n\n    return 0;\n}\n'})}),"\n",(0,s.jsx)(e.h2,{id:"\u6CE8\u610F",children:"\u6CE8\u610F"}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsxs)(e.p,{children:["\u53C2\u6570\u503C\u4F1A\u6839\u636E\u5BF9\u8BDD\u6846\u6837\u5F0F\u4E0D\u540C\u800C\u53D8\u5316\uFF08",(0,s.jsx)(e.a,{href:"../resources/dialogstyles",children:"\u70B9\u51FB\u67E5\u770B\u8BE6\u7EC6\u793A\u4F8B"}),"\uFF09"]})}),"\n",(0,s.jsx)(e.admonition,{type:"tip",children:(0,s.jsx)(e.p,{children:"\u4F7F\u7528switch-case\u8BED\u53E5\u5904\u7406\u591A\u4E2A\u5BF9\u8BDD\u6846\u6BD4if\u8BED\u53E5\u66F4\u9AD8\u6548"})}),"\n",(0,s.jsx)(e.admonition,{type:"warning",children:(0,s.jsx)(e.p,{children:'\u670D\u52A1\u5668\u91CD\u542F\u540E\u73A9\u5BB6\u7684\u5BF9\u8BDD\u6846\u4E0D\u4F1A\u81EA\u52A8\u5173\u95ED\u3002\u82E5\u73A9\u5BB6\u5728\u670D\u52A1\u5668\u91CD\u542F\u540E\u54CD\u5E94\u5BF9\u8BDD\u6846\uFF0C\u670D\u52A1\u7AEF\u4F1A\u63D0\u793A\u8B66\u544A\uFF1A"Warning: PlayerDialogResponse PlayerId: 0 dialog ID doesn\'t match last sent dialog ID"'})}),"\n",(0,s.jsx)(e.h2,{id:"\u76F8\u5173\u51FD\u6570",children:"\u76F8\u5173\u51FD\u6570"}),"\n",(0,s.jsx)(e.p,{children:"\u4EE5\u4E0B\u51FD\u6570\u53EF\u80FD\u4E0E\u5F53\u524D\u56DE\u8C03\u76F8\u5173\uFF1A"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"../functions/ShowPlayerDialog",children:"ShowPlayerDialog"}),"\uFF1A\u5411\u73A9\u5BB6\u663E\u793A\u5BF9\u8BDD\u6846"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"../functions/GetPlayerDialogID",children:"GetPlayerDialogID"}),"\uFF1A\u83B7\u53D6\u73A9\u5BB6\u5F53\u524D\u5BF9\u8BDD\u6846ID"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"../functions/GetPlayerDialogData",children:"GetPlayerDialogData"}),"\uFF1A\u83B7\u53D6\u73A9\u5BB6\u5F53\u524D\u5BF9\u8BDD\u6846\u6570\u636E"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.a,{href:"../functions/HidePlayerDialog",children:"HidePlayerDialog"}),"\uFF1A\u9690\u85CF\u73A9\u5BB6\u5F53\u524D\u5BF9\u8BDD\u6846"]}),"\n"]})]})}function p(n={}){let{wrapper:e}={...(0,r.a)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},50065:function(n,e,i){i.d(e,{Z:()=>a,a:()=>t});var l=i(67294);let s={},r=l.createContext(s);function t(n){let e=l.useContext(r);return l.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function a(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);