"use strict";(self.webpackChunkomp_web=self.webpackChunkomp_web||[]).push([["1336"],{12050:function(e,a,n){n.r(a),n.d(a,{frontMatter:()=>i,toc:()=>c,default:()=>u,metadata:()=>r,assets:()=>d,contentTitle:()=>l});var r=JSON.parse('{"id":"scripting/callbacks/OnPlayerTakeDamage","title":"OnPlayerTakeDamage","description":"Cette callback est appel\xe9e lorsqu\'un joueur prends des degats.","source":"@site/i18n/fr/docusaurus-plugin-content-docs/current/scripting/callbacks/OnPlayerTakeDamage.md","sourceDirName":"scripting/callbacks","slug":"/scripting/callbacks/OnPlayerTakeDamage","permalink":"/fr/docs/scripting/callbacks/OnPlayerTakeDamage","draft":false,"unlisted":false,"editUrl":"https://github.com/openmultiplayer/web/edit/master/frontend/i18n/fr/docusaurus-plugin-content-docs/current/scripting/callbacks/OnPlayerTakeDamage.md","tags":[{"inline":true,"label":"player","permalink":"/fr/docs/tags/player"}],"version":"current","frontMatter":{"title":"OnPlayerTakeDamage","sidebar_label":"OnPlayerTakeDamage","description":"Cette callback est appel\xe9e lorsqu\'un joueur prends des degats.","tags":["player"]},"sidebar":"docsSidebar","previous":{"title":"OnPlayerStreamOut","permalink":"/fr/docs/scripting/callbacks/OnPlayerStreamOut"},"next":{"title":"OnPlayerText","permalink":"/fr/docs/scripting/callbacks/OnPlayerText"}}'),t=n(85893),s=n(50065);let i={title:"OnPlayerTakeDamage",sidebar_label:"OnPlayerTakeDamage",description:"Cette callback est appel\xe9e lorsqu'un joueur prends des degats.",tags:["player"]},l=void 0,d={},c=[{value:"Param\xe8tres",id:"param\xe8tres",level:2},{value:"Valeur de retour",id:"valeur-de-retour",level:2},{value:"Exemples",id:"exemples",level:2},{value:"Astuces",id:"astuces",level:2}];function o(e){let a={admonition:"admonition",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,s.a)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a.h2,{id:"param\xe8tres",children:"Param\xe8tres"}),"\n",(0,t.jsx)(a.p,{children:"Cette callback est appel\xe9e lorsqu'un joueur prends des degats.."}),"\n",(0,t.jsxs)(a.table,{children:[(0,t.jsx)(a.thead,{children:(0,t.jsxs)(a.tr,{children:[(0,t.jsx)(a.th,{children:"Nom"}),(0,t.jsx)(a.th,{children:"Description"})]})}),(0,t.jsxs)(a.tbody,{children:[(0,t.jsxs)(a.tr,{children:[(0,t.jsxs)(a.td,{children:[(0,t.jsx)(a.code,{children:"int"})," playerid"]}),(0,t.jsx)(a.td,{children:"L'ID du joueur qui prends les d\xe9gats."})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsxs)(a.td,{children:[(0,t.jsx)(a.code,{children:"int"})," issuerid"]}),(0,t.jsx)(a.td,{children:"L'ID du joueur qui cause les d\xe9gats. Si il vaut INVALID_PLAYER_ID, le joueur les a inflig\xe9s lui m\xeame."})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsxs)(a.td,{children:[(0,t.jsx)(a.code,{children:"float"})," Float",":amount"]}),(0,t.jsxs)(a.td,{children:["Le montant des d\xe9gats re\xe7us ",(0,t.jsx)(a.em,{children:"(vie et armure combin\xe9s)"}),"."]})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsxs)(a.td,{children:[(0,t.jsx)(a.code,{children:"int"})," WEAPON",":weaponid"]}),(0,t.jsx)(a.td,{children:"L'ID de l'arme/la raison qui a caus\xe9 les d\xe9gats."})]}),(0,t.jsxs)(a.tr,{children:[(0,t.jsxs)(a.td,{children:[(0,t.jsx)(a.code,{children:"int"})," bodypart"]}),(0,t.jsx)(a.td,{children:"La partie du corps qui s'est faite touch\xe9e."})]})]})]}),"\n",(0,t.jsx)(a.h2,{id:"valeur-de-retour",children:"Valeur de retour"}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.strong,{children:"1"})," - Autorise la callback \xe0 \xeatre utilis\xe9e dans un autre script"]}),"\n",(0,t.jsxs)(a.p,{children:[(0,t.jsx)(a.strong,{children:"0"})," - La callback ne sera pas appel\xe9e dans les autres scripts"]}),"\n",(0,t.jsxs)(a.p,{children:["Elle est toujours appel\xe9e en premier dans le gamemode donc retourner ",(0,t.jsx)(a.strong,{children:"0"})," dans le gamemode bloquera la callback dans les filterscripts."]}),"\n",(0,t.jsx)(a.h2,{id:"exemples",children:"Exemples"}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-c",children:'public OnPlayerTakeDamage(playerid, issuerid, Float:amount, WEAPON:weaponid, bodypart)\n{\n    if(issuerid != INVALID_PLAYER_ID) // Si il ne se les inflige pas lui m\xeame\n    {\n        new\n            infoString[128],\n            weaponName[24],\n            victimName[MAX_PLAYER_NAME],\n            attackerName[MAX_PLAYER_NAME];\n \n        GetPlayerName(playerid, victimName, sizeof (victimName));\n        GetPlayerName(issuerid, attackerName, sizeof (attackerName));\n \n        GetWeaponName(weaponid, weaponName, sizeof (weaponName));\n \n        format(infoString, sizeof(infoString), "%s a prof\xe9r\xe9 %.0f d\xe9gats \xe0 %s, arme: %s", attackerName, amount, victimName, weaponName);\n        SendClientMessageToAll(-1, infoString);\n    }\n    return 1;\n}\n'})}),"\n",(0,t.jsx)(a.pre,{children:(0,t.jsx)(a.code,{className:"language-c",children:"public OnPlayerTakeDamage(playerid, issuerid, Float:amount, WEAPON:weaponid, bodypart)\n{\n    if(issuerid != INVALID_PLAYER_ID && weaponid == 34 && bodypart == 9)\n    {\n        //Tirez une fois dans la t\xeate au sniper tue instantan\xe9ment\n        SetPlayerHealth(playerid, 0.0);\n    }\n    return 1;\n}\n"})}),"\n",(0,t.jsx)(a.h2,{id:"astuces",children:"Astuces"}),"\n",(0,t.jsxs)(a.admonition,{type:"tip",children:[(0,t.jsxs)(a.p,{children:["Le weaponid retournera la raison 37 ",(0,t.jsx)(a.em,{children:"(lance-flammes)"})," de n'importe quelle source de feu ",(0,t.jsx)(a.em,{children:"(par exemple molotov, 18)"}),"."]}),(0,t.jsxs)(a.p,{children:["Le weaponid retournera la raison 51 de n'importe quelle arme qui cr\xe9e une explosion ",(0,t.jsx)(a.em,{children:"(par exemple RPG, grenade)"}),"."]}),(0,t.jsx)(a.p,{children:"Le montant est toujours le maximum de d\xe9g\xe2ts que l'arme peut faire, m\xeame si la sant\xe9 restante est inf\xe9rieure \xe0 ce maximum de d\xe9g\xe2ts. Ainsi, lorsqu'un joueur a 100,0 points de vie et se fait tirer dessus avec un Desert Eagle qui a une valeur de d\xe9g\xe2ts de 46,2, il faut 3 coups pour tuer ce joueur. Les 3 tirs montreront au final un montant de 46,2, m\xeame si lorsque le dernier coup frappe, le joueur n'a plus que 7,6 points de vie."})]}),"\n",(0,t.jsxs)(a.admonition,{type:"warning",children:[(0,t.jsx)(a.p,{children:"GetPlayerHealth et GetPlayerArmour renverront les anciens montants du joueur avant cette callback."}),(0,t.jsxs)(a.p,{children:["V\xe9rifiez toujours si ",(0,t.jsx)(a.code,{children:"issuerid"})," est valide avant de l'utiliser comme index de tableau."]})]})]})}function u(e={}){let{wrapper:a}={...(0,s.a)(),...e.components};return a?(0,t.jsx)(a,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},50065:function(e,a,n){n.d(a,{Z:()=>l,a:()=>i});var r=n(67294);let t={},s=r.createContext(t);function i(e){let a=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(a):{...a,...e}},[a,e])}function l(e){let a;return a=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(s.Provider,{value:a},e.children)}}}]);